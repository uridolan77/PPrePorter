"use strict";(self.webpackChunkppreporter_client=self.webpackChunkppreporter_client||[]).push([[8554],{28554:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var r=a(65043),s=a(79183),i=a(71985),n=a(50007),o=a(31951),l=a(19435),c=a(70579);const h=e=>{let{data:t,autoRotate:a,rotationSpeed:i,enableZoom:h,enableRotation:f,enableGrid:p,enableAxes:u,darkMode:d,xLabel:m,yLabel:x,zLabel:b,surfaceResolution:j,selectedInterpolation:M,showWireframe:y,selectedColorMap:g,xRange:w,yRange:k,onPointClick:z,theme:A}=e;const{camera:v}=(0,s.D)(),R=(0,r.useRef)(),F=(0,r.useRef)(null);(0,r.useEffect)((()=>{v.position.set(10,10,10),v.lookAt(0,0,0)}),[v]),(0,s.F)((()=>{a&&R.current&&(R.current.autoRotateSpeed=i,R.current.update())}));const{positions:P,colors:S,indices:C}=(0,r.useMemo)((()=>{const e=w?w[0]:Math.min(...t.map((e=>e.x))),a=w?w[1]:Math.max(...t.map((e=>e.x))),r=k?k[0]:Math.min(...t.map((e=>e.y))),s=k?k[1]:Math.max(...t.map((e=>e.y))),i=Math.min(...t.map((e=>e.z))),n=Math.max(...t.map((e=>e.z))),o=((e,t,a,r,s)=>{const i=[],n=[],o=(r[1]-r[0])/t,l=(s[1]-s[0])/t;for(let c=0;c<=t;c++)for(let a=0;a<=t;a++){const t=r[0]+c*o,n=s[0]+a*l;let h=0,f=0;e.forEach((e=>{const a=e.x-t,r=e.y-n,s=Math.sqrt(a*a+r*r);if(s<.001)h=e.z,f=1;else{const t=1/(s*s);h+=e.z*t,f+=t}})),f>0&&(h/=f),i.push({x:t,y:n,z:h})}for(let c=0;c<t;c++)for(let e=0;e<t;e++){const a=c*(t+1)+e,r=c*(t+1)+e+1,s=(c+1)*(t+1)+e,i=(c+1)*(t+1)+e+1;n.push(a,r,s),n.push(r,i,s)}return{vertices:i,indices:n}})(t,j,0,[e,a],[r,s]),l=new Float32Array(3*o.vertices.length);for(let t=0;t<o.vertices.length;t++){const e=o.vertices[t];l[3*t]=e.x,l[3*t+1]=e.z,l[3*t+2]=e.y}const c=new Float32Array(3*o.vertices.length);for(let t=0;t<o.vertices.length;t++){const e=(o.vertices[t].z-i)/(n-i||1);let a=0,r=0,s=0;switch(g){case"heatmap":a=e,r=0,s=1-e;break;case"terrain":e<.2?(a=0,r=2*e,s=.5+2.5*e):e<.4?(a=0,r=.4+3*(e-.2),s=1-5*(e-.2)):e<.7?(a=3.33*(e-.4),r=1,s=0):(a=1,r=1-3.33*(e-.7),s=0);break;case"plasma":a=.5+.5*Math.sin(e*Math.PI*2),r=.5+.5*Math.sin(e*Math.PI*2+Math.PI/2),s=.5+.5*Math.sin(e*Math.PI*2+Math.PI);break;default:const t=240*(1-e),i=1,n=.5,o=(1-Math.abs(2*n-1))*i,l=o*(1-Math.abs(t/60%2-1)),c=n-o/2;t<60?(a=o,r=l,s=0):t<120?(a=l,r=o,s=0):t<180?(a=0,r=o,s=l):t<240?(a=0,r=l,s=o):t<300?(a=l,r=0,s=o):(a=o,r=0,s=l),a+=c,r+=c,s+=c}c[3*t]=a,c[3*t+1]=r,c[3*t+2]=s}return{positions:l,colors:c,indices:o.indices}}),[t,j,M,g,w,k]),E=(0,r.useCallback)((e=>{var a;if(!z)return;const r=null===(a=e.intersections)||void 0===a?void 0:a[0];if(!r)return;const s=r.point;let i=t[0],n=1/0;t.forEach((e=>{const t=Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.z,2)+Math.pow(e.z-s.y,2));t<n&&(n=t,i=e)})),z(i)}),[t,z]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.N,{ref:R,autoRotate:a,enableZoom:h,enableRotate:f,enablePan:!0}),(0,c.jsx)("ambientLight",{intensity:d?.3:.5}),(0,c.jsx)("directionalLight",{position:[10,10,10],intensity:d?.7:1,castShadow:!0}),p&&(0,c.jsx)("gridHelper",{args:[10,10,d?4473924:13421772,d?2236962:14737632],position:[0,-5,0],rotation:[Math.PI/2,0,0]}),u&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("line",{children:[(0,c.jsx)("bufferGeometry",{attach:"geometry",children:(0,c.jsx)("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([-5,-5,-5,5,-5,-5]),3,!1]})}),(0,c.jsx)("lineBasicMaterial",{attach:"material",color:A.palette.error.main,linewidth:2})]}),(0,c.jsxs)("line",{children:[(0,c.jsx)("bufferGeometry",{attach:"geometry",children:(0,c.jsx)("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([-5,-5,-5,-5,5,-5]),3,!1]})}),(0,c.jsx)("lineBasicMaterial",{attach:"material",color:A.palette.success.main,linewidth:2})]}),(0,c.jsxs)("line",{children:[(0,c.jsx)("bufferGeometry",{attach:"geometry",children:(0,c.jsx)("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([-5,-5,-5,-5,-5,5]),3,!1]})}),(0,c.jsx)("lineBasicMaterial",{attach:"material",color:A.palette.primary.main,linewidth:2})]}),(0,c.jsx)(o.E,{position:[6,-5,-5],color:A.palette.error.main,fontSize:.5,anchorX:"center",anchorY:"middle",children:m}),(0,c.jsx)(o.E,{position:[-5,6,-5],color:A.palette.success.main,fontSize:.5,anchorX:"center",anchorY:"middle",children:b}),(0,c.jsx)(o.E,{position:[-5,-5,6],color:A.palette.primary.main,fontSize:.5,anchorX:"center",anchorY:"middle",children:x})]}),(0,c.jsxs)("mesh",{ref:F,onClick:E,children:[(0,c.jsxs)("bufferGeometry",{children:[(0,c.jsx)("bufferAttribute",{attach:"attributes-position",args:[P,3,!1]}),(0,c.jsx)("bufferAttribute",{attach:"attributes-color",args:[S,3,!1]}),(0,c.jsx)("bufferAttribute",{attach:"index",args:[new Uint16Array(C),1,!1]})]}),(0,c.jsx)("meshStandardMaterial",{vertexColors:!0,wireframe:y,side:l.$EB,roughness:.5,metalness:.2})]}),t.map(((e,t)=>(0,c.jsxs)("mesh",{position:[e.x,e.z,e.y],scale:.1,children:[(0,c.jsx)("sphereGeometry",{args:[1,16,16]}),(0,c.jsx)("meshStandardMaterial",{color:"#ffffff"})]},`point-${t}`)))]})},f=e=>(0,c.jsx)(i.Hl,{camera:{position:[10,10,10],fov:60},style:{background:e.darkMode?"#111":"#f5f5f5"},children:(0,c.jsx)(h,{...e})})}}]);
//# sourceMappingURL=8554.ae631b21.chunk.js.map
"use strict";(self.webpackChunkppreporter_client=self.webpackChunkppreporter_client||[]).push([[605],{9605:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(65043),r=a(49367),l=a(96446),s=a(22698),i=a(88446),o=a(85865),d=a(35475),c=a(73216),x=a(19252),h=a(81637),A=a(14194),y=a(11906),p=a(12110),u=a(26494),j=a(77739),m=a(17392),g=a(688),D=a(32143),b=a(63336),f=a(68903),v=a(8939),C=a(24056),w=a(48625),M=a(28242),E=a(41132),S=a(72898),k=a(5780),F=a(19170),R=a(46087),P=a(69525),T=a(70579);const B=e=>{let{metadata:t,data:a,loading:r,error:s,onFilterChange:i,onRefresh:d,onExport:c}=e;const[x,B]=(0,n.useState)(0),[V,z]=(0,n.useState)(null),[W,N]=(0,n.useState)(!1),[I,L]=(0,n.useState)({startDate:(0,k.A)((0,F.A)(new Date,30)),endDate:(0,R.A)(new Date),gameCategory:"",playerStatus:"",country:"",minAmount:"",maxAmount:""}),$=()=>{z(null)},_=e=>{c(I,e),$()},O=()=>{d(I)};return(0,T.jsx)(p.A,{children:(0,T.jsxs)(u.A,{children:[(0,T.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,T.jsx)(o.A,{variant:"h5",children:"Advanced Daily Actions Report"}),(0,T.jsxs)(l.A,{children:[(0,T.jsx)(j.A,{title:"Refresh data",children:(0,T.jsx)(m.A,{onClick:O,disabled:r,children:(0,T.jsx)(w.A,{})})}),(0,T.jsx)(j.A,{title:"Filter data",children:(0,T.jsx)(m.A,{onClick:()=>{N(!W)},color:W?"primary":"default",children:(0,T.jsx)(M.A,{})})}),(0,T.jsx)(j.A,{title:"Export data",children:(0,T.jsx)(m.A,{onClick:e=>{z(e.currentTarget)},disabled:r||!a,children:(0,T.jsx)(E.A,{})})}),(0,T.jsxs)(g.A,{anchorEl:V,open:Boolean(V),onClose:$,children:[(0,T.jsx)(D.A,{onClick:()=>_("csv"),children:"Export as CSV"}),(0,T.jsx)(D.A,{onClick:()=>_("xlsx"),children:"Export as Excel"}),(0,T.jsx)(D.A,{onClick:()=>_("pdf"),children:"Export as PDF"}),(0,T.jsx)(D.A,{onClick:()=>_("json"),children:"Export as JSON"})]})]})]}),s&&(0,T.jsx)(A.A,{severity:"error",sx:{mb:3},children:s}),W&&(0,T.jsxs)(b.A,{variant:"outlined",sx:{p:2,mb:3},children:[(0,T.jsx)(o.A,{variant:"subtitle1",gutterBottom:!0,children:"Filters"}),(0,T.jsx)(f.Ay,{container:!0,spacing:2,children:(0,T.jsx)(f.Ay,{item:!0,xs:12,children:(0,T.jsx)(S.A,{startDate:I.startDate,endDate:I.endDate,onChange:e=>{if(e.start&&e.end){const t={...I,startDate:e.start,endDate:e.end};L(t),i(t)}},buttonLabel:"Date Range"})})}),(0,T.jsxs)(l.A,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:[(0,T.jsx)(y.A,{variant:"outlined",onClick:()=>{const e={startDate:(0,k.A)((0,F.A)(new Date,30)),endDate:(0,R.A)(new Date),gameCategory:"",playerStatus:"",country:"",minAmount:"",maxAmount:""};L(e),i(e)},sx:{mr:1},children:"Reset"}),(0,T.jsx)(y.A,{variant:"contained",onClick:O,children:"Apply Filters"})]})]}),(0,T.jsx)(l.A,{sx:{mb:3},children:(0,T.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["Showing data from ",(0,P.A)(I.startDate,"MMM d, yyyy")," to ",(0,P.A)(I.endDate,"MMM d, yyyy")]})}),r&&(0,T.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,T.jsx)(h.A,{})}),!r&&a&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,T.jsxs)(v.A,{value:x,onChange:(e,t)=>{B(t)},children:[(0,T.jsx)(C.A,{label:"Summary"}),(0,T.jsx)(C.A,{label:"Detailed View"}),(0,T.jsx)(C.A,{label:"Charts"})]})}),(0,T.jsx)(l.A,{role:"tabpanel",hidden:0!==x,children:0===x&&(0,T.jsx)(o.A,{variant:"body1",children:"Summary content would go here. This is a placeholder component."})}),(0,T.jsx)(l.A,{role:"tabpanel",hidden:1!==x,children:1===x&&(0,T.jsx)(o.A,{variant:"body1",children:"Detailed view content would go here. This is a placeholder component."})}),(0,T.jsx)(l.A,{role:"tabpanel",hidden:2!==x,children:2===x&&(0,T.jsx)(o.A,{variant:"body1",children:"Charts content would go here. This is a placeholder component."})})]}),!r&&!a&&(0,T.jsxs)(l.A,{sx:{p:4,textAlign:"center"},children:[(0,T.jsx)(o.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No data available"}),(0,T.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Try adjusting your filters or select a different date range."}),(0,T.jsx)(y.A,{variant:"outlined",startIcon:(0,T.jsx)(w.A,{}),onClick:O,sx:{mt:2},children:"Refresh Data"})]})]})})};var V=a(54235),z=a(72450);const W=()=>{const[e,t]=(0,n.useState)(null),[a,r]=(0,n.useState)(null),[s,i]=(0,n.useState)(!1),[d,y]=(0,n.useState)(null),[p,u]=(0,n.useState)(!1),[j,m]=(0,n.useState)(null);(0,c.Zp)();(0,n.useEffect)((()=>{g()}),[]);const g=async()=>{try{u(!0),m(null);const e=await V.A.getMetadata();t(e)}catch(e){console.error("Error fetching metadata:",e),m(e.message||"Failed to load filter options")}finally{u(!1)}};return p&&!e?(0,T.jsx)(x.A,{maxWidth:"lg",children:(0,T.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,T.jsx)(h.A,{})})}):j&&!e?(0,T.jsx)(x.A,{maxWidth:"lg",children:(0,T.jsx)(l.A,{sx:{mt:4},children:(0,T.jsxs)(A.A,{severity:"error",children:[j,(0,T.jsx)(l.A,{sx:{mt:2},children:(0,T.jsx)(o.A,{variant:"body2",children:"Please try refreshing the page or contact support if the problem persists."})})]})})}):(0,T.jsx)(x.A,{maxWidth:"lg",children:(0,T.jsx)(l.A,{sx:{mt:4,mb:4},children:(0,T.jsx)(B,{metadata:e,data:a,loading:s,error:d,onFilterChange:e=>{console.log("Filters changed:",e)},onRefresh:async e=>{try{i(!0),y(null);const t={...e,startDate:e.startDate?(0,P.A)(new Date(e.startDate),"yyyy-MM-dd"):null,endDate:e.endDate?(0,P.A)(new Date(e.endDate),"yyyy-MM-dd"):null},a=await V.A.getFilteredData(t);r(a)}catch(t){console.error("Error fetching report data:",t),y(t.message||"Failed to load report data")}finally{i(!1)}},onExport:async(e,t)=>{try{i(!0);const a={...e,startDate:e.startDate?(0,P.A)(new Date(e.startDate),"yyyy-MM-dd"):null,endDate:e.endDate?(0,P.A)(new Date(e.endDate),"yyyy-MM-dd"):null},n=await V.A.exportFilteredReport(a,t),r=`daily-actions-report-${(0,P.A)(new Date,"yyyy-MM-dd")}.${t}`;(0,z.saveAs)(n,r)}catch(a){console.error("Error exporting report:",a),y(a.message||"Failed to export report")}finally{i(!1)}}})})})},N=()=>(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(r.mg,{children:(0,T.jsx)("title",{children:"Advanced Daily Actions Report | PPrePorter"})}),(0,T.jsxs)(l.A,{sx:{p:3},children:[(0,T.jsxs)(s.A,{"aria-label":"breadcrumb",sx:{mb:2},children:[(0,T.jsx)(i.A,{component:d.N_,to:"/",color:"inherit",children:"Dashboard"}),(0,T.jsx)(i.A,{component:d.N_,to:"/reports",color:"inherit",children:"Reports"}),(0,T.jsx)(o.A,{color:"text.primary",children:"Advanced Daily Actions"})]}),(0,T.jsx)(o.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Advanced Daily Actions Report"}),(0,T.jsx)(o.A,{variant:"subtitle1",color:"text.secondary",paragraph:!0,children:"Comprehensive analysis of daily player actions with advanced filtering options."}),(0,T.jsx)(W,{})]})]})},72898:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(65043),r=a(11906),l=a(17392),s=a(41020),i=a(85865),o=a(96446),d=a(29598),c=a(58390),x=a(82232),h=a(5780),A=a(46087),y=a(19170),p=a(72128),u=a(86255),j=a(45837),m=a(69525),g=a(3021),D=a(10155),b=a(70579);const f=e=>{let{startDate:t=null,endDate:a=null,onChange:f,buttonLabel:v="Date Range",presets:C=null,showClearButton:w=!0,autoApplyPresets:M=!0,disabled:E=!1,className:S,sx:k}=e;const[F,R]=(0,n.useState)(null),[P,T]=(0,n.useState)(t),[B,V]=(0,n.useState)(a),z=C||[{label:"Today",getValue:()=>({start:(0,h.A)(new Date),end:(0,A.A)(new Date)})},{label:"Yesterday",getValue:()=>({start:(0,h.A)((0,y.A)(new Date,1)),end:(0,A.A)((0,y.A)(new Date,1))})},{label:"Last 7 days",getValue:()=>({start:(0,h.A)((0,y.A)(new Date,6)),end:(0,A.A)(new Date)})},{label:"Last 30 days",getValue:()=>({start:(0,h.A)((0,y.A)(new Date,29)),end:(0,A.A)(new Date)})},{label:"This month",getValue:()=>({start:(0,p.A)(new Date),end:(0,u.A)(new Date)})},{label:"Last month",getValue:()=>{const e=new Date;return e.setMonth(e.getMonth()-1),{start:(0,p.A)(e),end:(0,u.A)(e)}}}],W=()=>{R(null)},N=Boolean(F),I=N?"date-range-popover":void 0;return(0,b.jsxs)("div",{className:S,style:k,children:[(0,b.jsx)(r.A,{variant:"outlined",onClick:e=>{R(e.currentTarget),T(t),V(a)},startIcon:(0,b.jsx)(g.A,{}),endIcon:w&&t&&a&&(0,j.A)(t)&&(0,j.A)(a)?(0,b.jsx)(l.A,{size:"small",onClick:e=>{e&&e.stopPropagation(),T(null),V(null),f&&f({start:null,end:null}),W()},children:(0,b.jsx)(D.A,{fontSize:"small"})}):void 0,sx:{justifyContent:"space-between",minWidth:200,textTransform:"none"},disabled:E,children:t&&a&&(0,j.A)(t)&&(0,j.A)(a)?`${(0,m.A)(t,"MMM dd, yyyy")} - ${(0,m.A)(a,"MMM dd, yyyy")}`:v}),(0,b.jsxs)(s.Ay,{id:I,open:N,anchorEl:F,onClose:W,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{elevation:8,sx:{p:2,width:{xs:"90vw",sm:400}}},children:[(0,b.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Select Date Range"}),(0,b.jsx)(o.A,{sx:{mb:2},children:(0,b.jsx)(c.$,{dateAdapter:x.h,children:(0,b.jsxs)(o.A,{sx:{display:"flex",gap:2},children:[(0,b.jsx)(d.l,{label:"Start Date",value:P,onChange:e=>T(e),slotProps:{textField:{size:"small",fullWidth:!0,helperText:P?(0,m.A)(P,"EEEE"):""}}}),(0,b.jsx)(d.l,{label:"End Date",value:B,onChange:e=>V(e),minDate:P,slotProps:{textField:{size:"small",fullWidth:!0,helperText:B?(0,m.A)(B,"EEEE"):""}}})]})})}),(0,b.jsx)(i.A,{variant:"subtitle2",gutterBottom:!0,children:"Presets"}),(0,b.jsx)(o.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:z.map(((e,t)=>(0,b.jsx)(r.A,{size:"small",variant:"outlined",onClick:()=>(e=>{const{start:t,end:a}=e.getValue();T(t),V(a),M&&(f&&f({start:t,end:a}),W())})(e),children:e.label},t)))}),(0,b.jsxs)(o.A,{sx:{display:"flex",justifyContent:"flex-end",gap:1,mt:2},children:[(0,b.jsx)(r.A,{variant:"outlined",onClick:W,children:"Cancel"}),(0,b.jsx)(r.A,{variant:"contained",color:"primary",onClick:()=>{f&&f({start:P,end:B}),W()},children:"Apply"})]})]})]})}}}]);
//# sourceMappingURL=605.4b56f120.chunk.js.map
"use strict";(self.webpackChunkppreporter_client=self.webpackChunkppreporter_client||[]).push([[230],{13593:(e,i,l)=>{l.d(i,{A:()=>h});var t=l(65043),n=l(63336),a=l(96446),s=l(85865),r=l(17392),o=l(39336),d=l(30279),c=l(21337),x=l(85473),u=l(70579);const h=e=>{let{children:i,title:l,subheader:h,action:m,icon:p,sx:A,collapsible:j=!1,defaultExpanded:v=!0,variant:g="outlined"}=e;const[y,b]=(0,t.useState)(v);return(0,u.jsxs)(n.A,{variant:g,sx:{borderRadius:1,overflow:"hidden",...A},children:[(l||h)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(a.A,{sx:{px:3,py:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,u.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[p&&(0,u.jsx)(a.A,{sx:{mr:1.5,display:"flex",alignItems:"center"},children:p}),(0,u.jsxs)(a.A,{children:[l&&(0,u.jsx)(s.A,{variant:"h6",component:"div",children:l}),h&&(0,u.jsx)(s.A,{variant:"body2",color:"text.secondary",children:h})]})]}),(0,u.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[m,j&&(0,u.jsx)(r.A,{onClick:()=>{b(!y)},sx:{ml:m?1:0},size:"small",children:y?(0,u.jsx)(x.A,{}):(0,u.jsx)(c.A,{})})]})]}),(0,u.jsx)(o.A,{})]}),j?(0,u.jsx)(d.A,{in:y,children:(0,u.jsx)(a.A,{children:i})}):(0,u.jsx)(a.A,{children:i})]})}},45230:(e,i,l)=>{l.r(i),l.d(i,{default:()=>$i});var t=l(65043),n=l(35475),a=l(96446),s=l(85865),r=l(63336),o=l(11906),d=l(19252),c=l(68903),x=l(8939),u=l(24056),h=l(35721),m=l(37918),p=l(38968),A=l(48734),j=l(12110),v=l(79958),g=l(39336),y=l(26494),b=l(69120),f=l(67784),C=l(51787),w=l(81637),S=l(77739),z=l(17392),k=l(43845),D=l(27600),R=l(45424),I=l(32143),P=l(2050),F=l(83462),W=l(4219),T=l(35316),B=l(98533),N=l(29347),E=l(66360),$=l(28242),q=l(22505),L=l(98082),V=l(95540),M=l(63471),G=l(78355),U=l(47260),Q=l(97412),O=l(92994),Y=l(68864),H=l(39244),_=l(67781),J=l(59071),K=l(70579);const Z=e=>{let{reports:i=[],onViewReport:l,onCreateReport:n,onEditReport:d,onDeleteReport:x,onDuplicateReport:u,onSearch:h,onFavoriteToggle:m,loading:p=!1,totalCount:A=0,error:v=null,categories:b=[],showActions:Z=!0}=e;const[X,ee]=(0,t.useState)(""),[ie,le]=(0,t.useState)("all"),[te,ne]=(0,t.useState)("updated"),[ae,se]=(0,t.useState)(1),[re,oe]=(0,t.useState)(12),[de,ce]=(0,t.useState)(null),[xe,ue]=(0,t.useState)(null),[he,me]=(0,t.useState)(null),[pe,Ae]=(0,t.useState)(null),[je,ve]=(0,t.useState)(!1),ge=e=>{le(e),Ae(null),h&&h(X,e,te)},ye=e=>{ne(e),me(null),h&&h(X,ie,e)},be=()=>{ce(null)},fe=e=>{l&&l(e)},Ce=()=>{d&&xe&&d(xe),be()},we=()=>{ve(!1)};return(0,K.jsxs)(a.A,{children:[(0,K.jsx)(a.A,{sx:{mb:3},children:(0,K.jsxs)(c.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,K.jsx)(f.A,{fullWidth:!0,placeholder:"Search reports...",value:X,onChange:e=>{const i=e.target.value;ee(i),h&&h(i,ie,te)},InputProps:{startAdornment:(0,K.jsx)(C.A,{position:"start",children:(0,K.jsx)(E.A,{})})},size:"small"})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:8,children:(0,K.jsxs)(a.A,{sx:{display:"flex",gap:2,justifyContent:{xs:"flex-start",md:"flex-end"}},children:[(0,K.jsx)(o.A,{variant:"outlined",startIcon:(0,K.jsx)($.A,{}),onClick:e=>{Ae(e.currentTarget)},size:"small",children:(()=>{if("all"===ie)return"All Categories";if("favorites"===ie)return"Favorites";const e=b.find((e=>e.id===ie));return e?e.name:"All Categories"})()}),(0,K.jsx)(o.A,{variant:"outlined",startIcon:(0,K.jsx)(Y.A,{}),onClick:e=>{me(e.currentTarget)},size:"small",children:(()=>{switch(te){case"name":return"Name (A-Z)";case"created":return"Newest";case"updated":return"Recently Updated";case"popular":return"Most Popular";default:return"Sort By"}})()}),Z&&n&&(0,K.jsx)(o.A,{variant:"contained",startIcon:(0,K.jsx)(q.A,{}),onClick:n,size:"small",children:"Create Report"})]})})]})}),v&&(0,K.jsx)(a.A,{sx:{mb:3},children:(0,K.jsx)(s.A,{color:"error",children:v})}),p?(0,K.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",py:10},children:(0,K.jsx)(w.A,{})}):0===i.length?(0,K.jsxs)(r.A,{variant:"outlined",sx:{p:4,textAlign:"center",borderStyle:"dashed"},children:[(0,K.jsx)(H.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,K.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"No reports found"}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:X||"all"!==ie?"Try adjusting your search or filters":"Get started by creating your first report"}),Z&&n&&(0,K.jsx)(o.A,{variant:"contained",startIcon:(0,K.jsx)(q.A,{}),onClick:n,children:"Create New Report"})]}):(0,K.jsx)(c.Ay,{container:!0,spacing:3,children:i.map((e=>(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,K.jsxs)(j.A,{variant:"outlined",sx:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer","&:hover":{boxShadow:2,borderColor:"primary.main"}},onClick:()=>fe(e),children:[(0,K.jsxs)(y.A,{sx:{flexGrow:1},children:[(0,K.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,K.jsx)(s.A,{variant:"subtitle1",component:"h3",noWrap:!0,sx:{fontWeight:"medium"},children:e.name}),(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(S.A,{title:e.isFavorite?"Remove from favorites":"Add to favorites",children:(0,K.jsx)(z.A,{size:"small",onClick:i=>((e,i)=>{e.stopPropagation(),m&&m(i)})(i,e),color:e.isFavorite?"primary":"default",children:e.isFavorite?(0,K.jsx)(Q.A,{fontSize:"small"}):(0,K.jsx)(O.A,{fontSize:"small"})})}),Z&&(0,K.jsx)(z.A,{size:"small",onClick:i=>((e,i)=>{e.stopPropagation(),ce(e.currentTarget),ue(i)})(i,e),children:(0,K.jsx)(L.A,{fontSize:"small"})})]})]}),e.category&&(0,K.jsx)(k.A,{label:e.category,size:"small",sx:{mt:1,mb:2}}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mt:1,mb:2},children:e.description&&e.description.length>100?`${e.description.substring(0,100)}...`:e.description}),(0,K.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mt:"auto"},children:[(0,K.jsxs)(s.A,{variant:"caption",color:"text.secondary",children:["Updated ",(0,_.A)(new Date(e.updatedAt),{addSuffix:!0})]}),void 0!==e.viewCount&&(0,K.jsx)(S.A,{title:"Number of views",children:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(U.A,{fontSize:"small",sx:{fontSize:14,mr:.5,color:"text.secondary"}}),(0,K.jsx)(s.A,{variant:"caption",color:"text.secondary",children:e.viewCount})]})})]})]}),(0,K.jsx)(g.A,{}),(0,K.jsxs)(D.A,{children:[(0,K.jsx)(o.A,{size:"small",startIcon:(0,K.jsx)(U.A,{}),onClick:()=>fe(e),children:"View"}),Z&&d&&(0,K.jsx)(o.A,{size:"small",startIcon:(0,K.jsx)(V.A,{}),onClick:i=>{i.stopPropagation(),ue(e),Ce()},children:"Edit"})]})]})},e.id)))}),!p&&i.length>0&&(0,K.jsx)(a.A,{sx:{mt:4},children:(0,K.jsx)(J.A,{count:A,page:ae,pageSize:re,onPageChange:e=>{se(e)},onPageSizeChange:e=>{oe(e),se(1)}})}),(0,K.jsxs)(R.A,{anchorEl:de,open:Boolean(de),onClose:be,children:[(0,K.jsxs)(I.A,{onClick:Ce,children:[(0,K.jsx)(P.A,{children:(0,K.jsx)(V.A,{fontSize:"small"})}),"Edit"]}),(0,K.jsxs)(I.A,{onClick:()=>{u&&xe&&u(xe),be()},children:[(0,K.jsx)(P.A,{children:(0,K.jsx)(G.A,{fontSize:"small"})}),"Duplicate"]}),(0,K.jsxs)(I.A,{onClick:()=>{ve(!0),be()},sx:{color:"error.main"},children:[(0,K.jsx)(P.A,{children:(0,K.jsx)(M.A,{fontSize:"small",color:"error"})}),"Delete"]})]}),(0,K.jsxs)(R.A,{anchorEl:he,open:Boolean(he),onClose:()=>{me(null)},children:[(0,K.jsx)(I.A,{selected:"updated"===te,onClick:()=>ye("updated"),children:"Recently Updated"}),(0,K.jsx)(I.A,{selected:"created"===te,onClick:()=>ye("created"),children:"Newest"}),(0,K.jsx)(I.A,{selected:"name"===te,onClick:()=>ye("name"),children:"Name (A-Z)"}),(0,K.jsx)(I.A,{selected:"popular"===te,onClick:()=>ye("popular"),children:"Most Popular"})]}),(0,K.jsxs)(R.A,{anchorEl:pe,open:Boolean(pe),onClose:()=>{Ae(null)},children:[(0,K.jsx)(I.A,{selected:"all"===ie,onClick:()=>ge("all"),children:"All Categories"}),(0,K.jsx)(I.A,{selected:"favorites"===ie,onClick:()=>ge("favorites"),children:"Favorites"}),(0,K.jsx)(g.A,{}),b.map((e=>(0,K.jsx)(I.A,{selected:ie===e.id,onClick:()=>ge(e.id),children:e.name},e.id)))]}),(0,K.jsxs)(F.A,{open:je,onClose:we,children:[(0,K.jsx)(W.A,{children:"Delete Report"}),(0,K.jsx)(T.A,{children:(0,K.jsxs)(B.A,{children:['Are you sure you want to delete "',null===xe||void 0===xe?void 0:xe.name,'"? This action cannot be undone.']})}),(0,K.jsxs)(N.A,{children:[(0,K.jsx)(o.A,{onClick:we,children:"Cancel"}),(0,K.jsx)(o.A,{onClick:()=>{x&&xe&&x(xe),ve(!1)},color:"error",children:"Delete"})]})]})]})};var X=l(14194),ee=l(53193),ie=l(60338),le=l(74605),te=l(14256),ne=l(4598),ae=l(15397),se=l(24914),re=l(74802),oe=l(57566),de=l(8212),ce=l(17555),xe=l(73513),ue=l(82746),he=l(58390),me=l(53766);const pe=e=>{let{open:i,onClose:l,report:n={},sharedUsers:d=[],availableUsers:c=[],isPublic:p=!1,publicUrl:j="",expirationDate:v=null,onAddUser:g,onRemoveUser:y,onPermissionChange:b,onPublicToggle:k,onExpirationChange:D,loading:R=!1,error:I=null}=e;const[P,B]=(0,t.useState)(0),[$,q]=(0,t.useState)(""),[L,V]=(0,t.useState)([]),[G,U]=(0,t.useState)("view"),[Q,O]=(0,t.useState)({open:!1,message:"",severity:"info"}),[Y,H]=(0,t.useState)(p),[_,J]=(0,t.useState)(v);(0,t.useEffect)((()=>{H(p)}),[p]),(0,t.useEffect)((()=>{J(v)}),[v]);const Z=e=>{V((i=>i.some((i=>i.id===e.id))?i.filter((i=>i.id!==e.id)):[...i,e]))},pe=()=>{O({...Q,open:!1})},Ae=c.filter((e=>!d.some((i=>i.id===e.id))&&(!$||(e.name.toLowerCase().includes($.toLowerCase())||e.email.toLowerCase().includes($.toLowerCase())))));return(0,K.jsxs)(F.A,{open:i,onClose:l,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,K.jsx)(W.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,K.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,K.jsx)(s.A,{variant:"h6",children:"Share Report"}),(0,K.jsx)(z.A,{edge:"end",onClick:l,"aria-label":"close",children:(0,K.jsx)(re.A,{})})]})}),(0,K.jsxs)(T.A,{sx:{p:0},children:[(0,K.jsxs)(a.A,{sx:{p:2,bgcolor:"background.paper"},children:[(0,K.jsx)(s.A,{variant:"subtitle1",sx:{fontWeight:"medium"},children:n.title||n.name||"Report"}),n.description&&(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",children:n.description})]}),(0,K.jsxs)(x.A,{value:P,onChange:(e,i)=>{B(i)},variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider"},children:[(0,K.jsx)(u.A,{label:"Share with People"}),(0,K.jsx)(u.A,{label:"Public Access"})]}),0===P&&(0,K.jsxs)(a.A,{sx:{p:3},children:[I&&(0,K.jsx)(X.A,{severity:"error",sx:{mb:3},children:I}),(0,K.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"Add people"}),(0,K.jsxs)(a.A,{sx:{display:"flex",gap:2,mb:3},children:[(0,K.jsx)(f.A,{placeholder:"Search users...",size:"small",fullWidth:!0,value:$,onChange:e=>{q(e.target.value)},InputProps:{startAdornment:(0,K.jsx)(C.A,{position:"start",children:(0,K.jsx)(E.A,{fontSize:"small"})})}}),(0,K.jsx)(ee.A,{component:"fieldset",children:(0,K.jsxs)(ie.A,{row:!0,value:G,onChange:e=>{U(e.target.value)},children:[(0,K.jsx)(le.A,{value:"view",control:(0,K.jsx)(te.A,{size:"small"}),label:"View"}),(0,K.jsx)(le.A,{value:"edit",control:(0,K.jsx)(te.A,{size:"small"}),label:"Edit"}),(0,K.jsx)(le.A,{value:"manage",control:(0,K.jsx)(te.A,{size:"small"}),label:"Manage"})]})}),(0,K.jsx)(o.A,{variant:"contained",startIcon:(0,K.jsx)(oe.A,{}),onClick:()=>{L.length>0&&g&&(g(L,G),V([]),O({open:!0,message:`${L.length} user(s) added successfully`,severity:"success"}))},disabled:0===L.length||R,children:"Add"})]}),(0,K.jsx)(r.A,{variant:"outlined",sx:{maxHeight:200,overflow:"auto",mb:3},children:R?(0,K.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,K.jsx)(w.A,{size:24})}):0===Ae.length?(0,K.jsx)(a.A,{sx:{p:2,textAlign:"center"},children:(0,K.jsx)(s.A,{color:"text.secondary",children:$?"No users found matching your search":"No users available to add"})}):(0,K.jsx)(h.A,{disablePadding:!0,children:Ae.map((e=>{const i=L.some((i=>i.id===e.id));return(0,K.jsxs)(m.Ay,{divider:!0,dense:!0,button:!0,selected:i,onClick:()=>Z(e),children:[(0,K.jsx)(A.A,{primary:e.name,secondary:e.email}),(0,K.jsx)(ne.A,{edge:"end",checked:i,onChange:()=>Z(e),size:"small"})]},e.id)}))})}),(0,K.jsxs)(a.A,{sx:{mb:2},children:[(0,K.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"People with access"}),(0,K.jsx)(r.A,{variant:"outlined",children:(0,K.jsx)(h.A,{disablePadding:!0,children:0===d.length?(0,K.jsx)(m.Ay,{divider:!0,dense:!0,children:(0,K.jsx)(A.A,{primary:"No users have access to this report yet",primaryTypographyProps:{color:"text.secondary",align:"center"}})}):d.map((e=>(0,K.jsxs)(m.Ay,{divider:!0,dense:!0,children:[(0,K.jsx)(A.A,{primary:e.name,secondary:e.email}),(0,K.jsx)(ee.A,{size:"small",sx:{minWidth:100,mr:1},children:(0,K.jsxs)("select",{value:e.permission,onChange:i=>((e,i)=>{b&&b(e,i)})(e,i.target.value),style:{padding:"5px 10px",borderRadius:"4px",border:"1px solid #ccc"},children:[(0,K.jsx)("option",{value:"view",children:"View"}),(0,K.jsx)("option",{value:"edit",children:"Edit"}),(0,K.jsx)("option",{value:"manage",children:"Manage"})]})}),(0,K.jsx)(z.A,{edge:"end",onClick:()=>(e=>{y&&y(e)})(e),size:"small",children:(0,K.jsx)(M.A,{fontSize:"small"})})]},e.id)))})})]})]}),1===P&&(0,K.jsxs)(a.A,{sx:{p:3},children:[I&&(0,K.jsx)(X.A,{severity:"error",sx:{mb:3},children:I}),(0,K.jsxs)(a.A,{sx:{mb:3},children:[(0,K.jsx)(le.A,{control:(0,K.jsx)(ne.A,{checked:Y,onChange:()=>{H(!Y)},disabled:R}),label:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[Y?(0,K.jsx)(xe.A,{color:"primary",sx:{mr:1}}):(0,K.jsx)(ce.A,{sx:{mr:1}}),(0,K.jsx)(s.A,{children:Y?"Public access enabled":"Private report"})]})}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{ml:4,mt:.5},children:Y?"Anyone with the link can view this report without logging in":"Only users with explicit access can view this report"})]}),Y&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(a.A,{sx:{mb:3},children:[(0,K.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Public link"}),(0,K.jsx)(f.A,{fullWidth:!0,value:j||"Link will be generated when you save",variant:"outlined",size:"small",InputProps:{readOnly:!0,startAdornment:(0,K.jsx)(C.A,{position:"start",children:(0,K.jsx)(de.A,{})}),endAdornment:j&&(0,K.jsx)(C.A,{position:"end",children:(0,K.jsx)(S.A,{title:"Copy link",children:(0,K.jsx)(z.A,{edge:"end",onClick:()=>{return e=j,navigator.clipboard.writeText(e),void O({open:!0,message:"Link copied to clipboard",severity:"success"});var e},size:"small",children:(0,K.jsx)(se.A,{fontSize:"small"})})})})}})]}),(0,K.jsxs)(a.A,{children:[(0,K.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Link expiration"}),(0,K.jsx)(he.$,{dateAdapter:me.h,children:(0,K.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,K.jsx)(le.A,{control:(0,K.jsx)(ne.A,{checked:!!_,onChange:()=>J(_?null:new Date(Date.now()+6048e5))}),label:"Set expiration date"}),_&&(0,K.jsx)(ue.l,{label:"Expiration date",value:_,onChange:e=>{J(e)},slotProps:{textField:{size:"small"}},minDate:new Date,disabled:R})]})}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:_?`The link will expire on ${_.toLocaleDateString()}`:"The link will not expire"})]})]})]})]}),(0,K.jsxs)(N.A,{sx:{p:2,borderTop:1,borderColor:"divider"},children:[(0,K.jsx)(o.A,{onClick:l,children:"Cancel"}),0===P?(0,K.jsx)(o.A,{onClick:l,variant:"contained",children:"Done"}):(0,K.jsx)(o.A,{onClick:()=>{k&&k(Y),D&&Y&&D(_)},variant:"contained",disabled:R,children:R?(0,K.jsx)(w.A,{size:24}):"Save Settings"})]}),(0,K.jsx)(ae.A,{open:Q.open,autoHideDuration:6e3,onClose:pe,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,K.jsx)(X.A,{onClose:pe,severity:Q.severity||"info",children:Q.message})})]})};var Ae=l(18356),je=l(69285),ve=l(81673),ge=l(8266),ye=l(4245),be=l(37402),fe=l(75310),Ce=l(36631),we=l(42090),Se=l(96778);const ze=e=>{let{open:i,onClose:l,report:n={},schedules:d=[],exportFormats:x=[{id:"pdf",name:"PDF"},{id:"excel",name:"Excel"},{id:"csv",name:"CSV"}],recipients:u=[],onAddSchedule:p,onUpdateSchedule:j,onDeleteSchedule:v,loading:y=!1,error:b=null}=e;const[f,C]=(0,t.useState)({frequency:"daily",weekday:1,monthDay:1,time:new Date((new Date).setHours(8,0,0,0)),exportFormat:"pdf",recipientIds:[],includeEmail:!1,includeNotification:!0,active:!0}),[D,R]=(0,t.useState)({}),[B,E]=(0,t.useState)(!1),[$,L]=(0,t.useState)(null),G=()=>{C({frequency:"daily",weekday:1,monthDay:1,time:new Date((new Date).setHours(8,0,0,0)),exportFormat:"pdf",recipientIds:[],includeEmail:!1,includeNotification:!0,active:!0}),R({}),E(!1),L(null)},U=()=>{G(),l()},Q=e=>{const{name:i,value:l,checked:t,type:n}=e.target;C((e=>({...e,[i]:"checkbox"===n?t:l}))),D[i]&&R((e=>({...e,[i]:void 0})))},O=e=>{C((i=>{let l;return l=i.recipientIds.includes(e)?i.recipientIds.filter((i=>i!==e)):[...i.recipientIds,e],{...i,recipientIds:l}})),D.recipientIds&&R((e=>({...e,recipientIds:void 0})))},Y=e=>{switch(e.frequency){case"daily":return"Every day";case"weekly":return`Every ${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.weekday]}`;case"monthly":return`Every month on day ${e.monthDay}`;case"quarterly":return"Every quarter";case"yearly":return"Every year";default:return"Custom schedule"}},H=e=>{if(!e)return"";return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},_=e=>{const i=[];return e.includeEmail&&i.push("Email"),e.includeNotification&&i.push("Notification"),i.join(" & ")};return(0,K.jsxs)(F.A,{open:i,onClose:U,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,K.jsx)(W.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,K.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(ye.A,{sx:{mr:1}}),(0,K.jsx)(s.A,{variant:"h6",children:B?"Edit Schedule":"Schedule Report"})]}),(0,K.jsx)(z.A,{edge:"end",onClick:U,"aria-label":"close",children:(0,K.jsx)(re.A,{})})]})}),(0,K.jsxs)(T.A,{dividers:!0,children:[b&&(0,K.jsx)(X.A,{severity:"error",sx:{mb:3},children:b}),(0,K.jsxs)(a.A,{sx:{mb:3},children:[(0,K.jsx)(s.A,{variant:"subtitle1",sx:{fontWeight:"medium",mb:1},children:n.title||"Report"}),n.description&&(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",children:n.description})]}),(0,K.jsxs)(a.A,{sx:{mb:3},children:[(0,K.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Schedule Configuration"}),(0,K.jsx)(r.A,{variant:"outlined",sx:{p:2},children:(0,K.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(ee.A,{fullWidth:!0,children:[(0,K.jsx)(Ae.A,{id:"frequency-label",children:"Frequency"}),(0,K.jsxs)(je.A,{labelId:"frequency-label",name:"frequency",value:f.frequency,onChange:Q,label:"Frequency",disabled:y,children:[(0,K.jsx)(I.A,{value:"daily",children:"Daily"}),(0,K.jsx)(I.A,{value:"weekly",children:"Weekly"}),(0,K.jsx)(I.A,{value:"monthly",children:"Monthly"}),(0,K.jsx)(I.A,{value:"quarterly",children:"Quarterly"}),(0,K.jsx)(I.A,{value:"yearly",children:"Yearly"})]})]})}),"weekly"===f.frequency&&(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(ee.A,{fullWidth:!0,children:[(0,K.jsx)(Ae.A,{id:"weekday-label",children:"Day of Week"}),(0,K.jsxs)(je.A,{labelId:"weekday-label",name:"weekday",value:f.weekday,onChange:e=>{const i={target:{name:"weekday",value:Number(e.target.value),type:"select"}};Q(i)},label:"Day of Week",disabled:y,children:[(0,K.jsx)(I.A,{value:1,children:"Monday"}),(0,K.jsx)(I.A,{value:2,children:"Tuesday"}),(0,K.jsx)(I.A,{value:3,children:"Wednesday"}),(0,K.jsx)(I.A,{value:4,children:"Thursday"}),(0,K.jsx)(I.A,{value:5,children:"Friday"}),(0,K.jsx)(I.A,{value:6,children:"Saturday"}),(0,K.jsx)(I.A,{value:0,children:"Sunday"})]})]})}),"monthly"===f.frequency&&(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(ee.A,{fullWidth:!0,children:[(0,K.jsx)(Ae.A,{id:"monthday-label",children:"Day of Month"}),(0,K.jsx)(je.A,{labelId:"monthday-label",name:"monthDay",value:f.monthDay,onChange:e=>{const i={target:{name:"monthDay",value:Number(e.target.value),type:"select"}};Q(i)},label:"Day of Month",disabled:y,children:Array.from({length:31},((e,i)=>i+1)).map((e=>(0,K.jsx)(I.A,{value:e,children:e},e)))})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsx)(he.$,{dateAdapter:me.h,children:(0,K.jsx)(Se.A,{label:"Time",value:f.time,onChange:e=>{e&&C((i=>({...i,time:e})))},slotProps:{textField:{fullWidth:!0}},disabled:y})})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(ee.A,{fullWidth:!0,children:[(0,K.jsx)(Ae.A,{id:"export-format-label",children:"Export Format"}),(0,K.jsx)(je.A,{labelId:"export-format-label",name:"exportFormat",value:f.exportFormat,onChange:Q,label:"Export Format",disabled:y,children:x.map((e=>(0,K.jsx)(I.A,{value:e.id,children:e.name},e.id)))})]})}),(0,K.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,K.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Delivery Methods"}),(0,K.jsxs)(a.A,{sx:{display:"flex",gap:2},children:[(0,K.jsx)(le.A,{control:(0,K.jsx)(ne.A,{checked:f.includeEmail,onChange:Q,name:"includeEmail",disabled:y}),label:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(be.A,{fontSize:"small",sx:{mr:.5}}),(0,K.jsx)(s.A,{variant:"body2",children:"Email"})]})}),(0,K.jsx)(le.A,{control:(0,K.jsx)(ne.A,{checked:f.includeNotification,onChange:Q,name:"includeNotification",disabled:y}),label:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(fe.A,{fontSize:"small",sx:{mr:.5}}),(0,K.jsx)(s.A,{variant:"body2",children:"In-app Notification"})]})})]}),D.deliveryMethod&&(0,K.jsx)(ve.A,{error:!0,children:D.deliveryMethod})]}),f.includeEmail&&(0,K.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,K.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Recipients"}),(0,K.jsx)(r.A,{variant:"outlined",sx:{p:1,maxHeight:200,overflow:"auto"},children:(0,K.jsx)(h.A,{dense:!0,children:0===u.length?(0,K.jsx)(m.Ay,{children:(0,K.jsx)(A.A,{primary:"No recipients available",primaryTypographyProps:{color:"text.secondary"}})}):u.map((e=>{const i=f.recipientIds.includes(e.id);return(0,K.jsxs)(m.Ay,{button:!0,onClick:()=>O(e.id),selected:i,children:[(0,K.jsx)(A.A,{primary:e.name,secondary:e.email}),(0,K.jsx)(ne.A,{edge:"end",checked:i,onChange:()=>O(e.id),disabled:y})]},e.id)}))})}),D.recipientIds&&(0,K.jsx)(ve.A,{error:!0,children:D.recipientIds})]})]})})]}),(0,K.jsx)(g.A,{sx:{my:3}}),(0,K.jsxs)(a.A,{children:[(0,K.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Existing Schedules"}),0===d.length?(0,K.jsx)(r.A,{variant:"outlined",sx:{p:2,textAlign:"center"},children:(0,K.jsx)(s.A,{color:"text.secondary",children:"No schedules configured yet"})}):(0,K.jsx)(r.A,{variant:"outlined",children:(0,K.jsx)(h.A,{children:d.map((e=>{var i;return(0,K.jsxs)(m.Ay,{divider:!0,children:[(0,K.jsx)(P.A,{children:(0,K.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,K.jsx)(we.A,{color:e.active?"primary":"disabled"}),(0,K.jsx)(s.A,{variant:"caption",color:e.active?"primary":"text.disabled",children:H(e.time)})]})}),(0,K.jsx)(A.A,{primary:Y(e),secondary:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:1,mt:.5},children:[(0,K.jsx)(k.A,{size:"small",label:_(e),icon:e.includeEmail?(0,K.jsx)(be.A,{fontSize:"small"}):(0,K.jsx)(fe.A,{fontSize:"small"})}),(0,K.jsx)(k.A,{size:"small",label:(null===(i=x.find((i=>i.id===e.exportFormat)))||void 0===i?void 0:i.name)||e.exportFormat,icon:(0,K.jsx)(Ce.A,{fontSize:"small"})}),e.includeEmail&&(0,K.jsxs)(s.A,{variant:"caption",color:"text.secondary",children:[e.recipientIds.length," recipient",1!==e.recipientIds.length?"s":""]})]})}),(0,K.jsxs)(ge.A,{children:[(0,K.jsx)(S.A,{title:"Edit",children:(0,K.jsx)(z.A,{edge:"end",onClick:()=>(e=>{C({frequency:e.frequency,weekday:e.weekday,monthDay:e.monthDay,time:new Date(e.time),exportFormat:e.exportFormat,recipientIds:[...e.recipientIds],includeEmail:e.includeEmail,includeNotification:e.includeNotification,active:e.active}),E(!0),L(e.id||null)})(e),disabled:y,sx:{mr:1},children:(0,K.jsx)(V.A,{})})}),(0,K.jsx)(S.A,{title:"Delete",children:(0,K.jsx)(z.A,{edge:"end",onClick:()=>{return i=e.id,void(v&&v(i));var i},disabled:y,color:"error",children:(0,K.jsx)(M.A,{})})})]})]},e.id)}))})})]})]}),(0,K.jsxs)(N.A,{sx:{px:3,py:2},children:[(0,K.jsx)(o.A,{onClick:U,disabled:y,children:"Cancel"}),(0,K.jsx)(o.A,{variant:"contained",color:"primary",onClick:()=>{if(!(()=>{const e={};return f.includeEmail||f.includeNotification||(e.deliveryMethod="At least one delivery method must be selected"),f.includeEmail&&0===f.recipientIds.length&&(e.recipientIds="At least one recipient must be selected for email delivery"),R(e),0===Object.keys(e).length})())return;const e={...f,id:B&&$||void 0};B&&j?j(e):p&&p(e),G()},disabled:y,startIcon:y?(0,K.jsx)(w.A,{size:20}):B?(0,K.jsx)(V.A,{}):(0,K.jsx)(q.A,{}),children:B?"Update Schedule":"Add Schedule"})]})]})};var ke=l(86061),De=l(94329),Re=l(57981),Ie=l(8767);const Pe=e=>{let{template:i={id:"",name:"",description:"",sections:[],dataSource:null,filters:[],isPublic:!1,createdBy:"",createdAt:null,updatedAt:null},onSave:l,onCancel:n,availableVisualizations:d=[],availableDataSources:x=[]}=e;const[u,p]=(0,t.useState)({...i}),[j,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(!1),[C,w]=(0,t.useState)(!1),S=(e,i)=>{p({...u,[e]:i})},k=function(){v((arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||{id:`section_${Date.now()}`,title:"",description:"",visualizations:[],expanded:!0}),b(!0)},D=()=>{b(!1),v(null)},R=()=>{w(!1)};return(0,K.jsxs)(a.A,{children:[(0,K.jsxs)(r.A,{elevation:0,variant:"outlined",sx:{p:3,mb:3},children:[(0,K.jsx)(s.A,{variant:"h5",gutterBottom:!0,children:u.id?"Edit Report Template":"Create New Report Template"}),(0,K.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsx)(f.A,{label:"Template Name",value:u.name,onChange:e=>S("name",e.target.value),fullWidth:!0,required:!0,margin:"normal"})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(ee.A,{fullWidth:!0,margin:"normal",children:[(0,K.jsx)(Ae.A,{children:"Data Source"}),(0,K.jsxs)(je.A,{value:u.dataSource||"",onChange:e=>S("dataSource",e.target.value),label:"Data Source",required:!0,children:[(0,K.jsx)(I.A,{value:"",children:(0,K.jsx)("em",{children:"Select a data source"})}),x.map((e=>(0,K.jsx)(I.A,{value:e.id,children:e.name},e.id)))]})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,children:(0,K.jsx)(f.A,{label:"Description",value:u.description,onChange:e=>S("description",e.target.value),fullWidth:!0,multiline:!0,rows:2,margin:"normal"})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,children:(0,K.jsx)(le.A,{control:(0,K.jsx)(ne.A,{checked:u.isPublic,onChange:e=>S("isPublic",e.target.checked),color:"primary"}),label:"Make this report template available to all users"})})]})]}),(0,K.jsxs)(r.A,{elevation:0,variant:"outlined",sx:{p:3,mb:3},children:[(0,K.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,K.jsx)(s.A,{variant:"h6",children:"Report Sections"}),(0,K.jsx)(o.A,{variant:"outlined",startIcon:(0,K.jsx)(q.A,{}),onClick:()=>k(),children:"Add Section"})]}),(0,K.jsx)(g.A,{sx:{mb:2}}),0===u.sections.length?(0,K.jsxs)(a.A,{sx:{textAlign:"center",py:4},children:[(0,K.jsx)(Re.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,K.jsx)(s.A,{color:"text.secondary",children:"No sections added yet. Add a section to start building your report."})]}):(0,K.jsx)(Ie.JY,{onDragEnd:e=>{if(!e.destination)return;const i=Array.from(u.sections),[l]=i.splice(e.source.index,1);i.splice(e.destination.index,0,l),p({...u,sections:i})},children:(0,K.jsx)(Ie.gL,{droppableId:"sections",children:e=>(0,K.jsxs)(h.A,{...e.droppableProps,ref:e.innerRef,children:[u.sections.map(((e,i)=>(0,K.jsx)(Ie.sx,{draggableId:e.id,index:i,children:i=>(0,K.jsxs)(m.Ay,{ref:i.innerRef,...i.draggableProps,divider:!0,sx:{bgcolor:"background.paper",borderRadius:1,mb:1,border:"1px solid",borderColor:"divider"},children:[(0,K.jsx)(a.A,{...i.dragHandleProps,sx:{mr:1},children:(0,K.jsx)(ke.A,{color:"action"})}),(0,K.jsx)(A.A,{primary:e.title,secondary:(0,K.jsxs)(K.Fragment,{children:[e.description&&(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:e.description}),(0,K.jsxs)(s.A,{variant:"caption",color:"text.secondary",children:[e.visualizations.length," visualization",1!==e.visualizations.length?"s":""]})]})}),(0,K.jsxs)(ge.A,{children:[(0,K.jsx)(z.A,{edge:"end",onClick:()=>k(e),children:(0,K.jsx)(V.A,{})}),(0,K.jsx)(z.A,{edge:"end",onClick:()=>{return i=e.id,void p({...u,sections:u.sections.filter((e=>e.id!==i))});var i},children:(0,K.jsx)(M.A,{})})]})]})},e.id))),e.placeholder]})})})]}),(0,K.jsxs)(a.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:2},children:[(0,K.jsx)(o.A,{variant:"outlined",onClick:n,children:"Cancel"}),(0,K.jsx)(o.A,{variant:"contained",startIcon:(0,K.jsx)(De.A,{}),onClick:()=>{l&&l({...u,updatedAt:new Date})},disabled:!u.name||!u.dataSource,children:"Save Template"})]}),(0,K.jsxs)(F.A,{open:y,onClose:D,maxWidth:"md",fullWidth:!0,children:[(0,K.jsx)(W.A,{children:j&&j.title?`Edit Section: ${j.title}`:"Add New Section"}),(0,K.jsxs)(T.A,{dividers:!0,children:[(0,K.jsx)(f.A,{label:"Section Title",value:(null===j||void 0===j?void 0:j.title)||"",onChange:e=>v(j?{...j,title:e.target.value}:null),fullWidth:!0,required:!0,margin:"normal"}),(0,K.jsx)(f.A,{label:"Section Description",value:(null===j||void 0===j?void 0:j.description)||"",onChange:e=>v(j?{...j,description:e.target.value}:null),fullWidth:!0,multiline:!0,rows:2,margin:"normal"}),(0,K.jsxs)(a.A,{sx:{mt:3,mb:2},children:[(0,K.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"Visualizations"}),(0,K.jsx)(h.A,{children:null===j||void 0===j?void 0:j.visualizations.map(((e,i)=>(0,K.jsxs)(m.Ay,{divider:i<((null===j||void 0===j?void 0:j.visualizations.length)||0)-1,sx:{bgcolor:"action.hover",borderRadius:1,mb:1},children:[(0,K.jsx)(A.A,{primary:e.title,secondary:`Type: ${e.type}`}),(0,K.jsx)(ge.A,{children:(0,K.jsx)(z.A,{edge:"end",onClick:()=>{return i=e.id,void(j&&v({...j,visualizations:j.visualizations.filter((e=>e.id!==i))}));var i},children:(0,K.jsx)(M.A,{})})})]},e.id)))}),(0,K.jsx)(o.A,{variant:"outlined",startIcon:(0,K.jsx)(q.A,{}),onClick:()=>{w(!0)},sx:{mt:2},children:"Add Visualization"})]})]}),(0,K.jsxs)(N.A,{children:[(0,K.jsx)(o.A,{onClick:D,children:"Cancel"}),(0,K.jsx)(o.A,{onClick:()=>{if(!j)return;const e=[...u.sections],i=e.findIndex((e=>e.id===j.id));i>=0?e[i]={...j}:e.push({...j}),p({...u,sections:e}),D()},variant:"contained",disabled:!(null!==j&&void 0!==j&&j.title),children:"Save Section"})]})]}),(0,K.jsxs)(F.A,{open:C,onClose:R,maxWidth:"md",fullWidth:!0,children:[(0,K.jsx)(W.A,{children:"Select Visualization"}),(0,K.jsx)(T.A,{dividers:!0,children:(0,K.jsx)(c.Ay,{container:!0,spacing:2,children:d.map((e=>(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,K.jsxs)(r.A,{elevation:0,variant:"outlined",sx:{p:2,height:"100%",display:"flex",flexDirection:"column",cursor:"pointer","&:hover":{borderColor:"primary.main"}},onClick:()=>{return i=e,void(j&&(v({...j,visualizations:[...j.visualizations,{id:`viz_${Date.now()}`,type:i.type,title:i.title,config:{...i.defaultConfig},dataField:"",width:12}]}),w(!1)));var i},children:[(0,K.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.icon}),(0,K.jsx)(s.A,{variant:"subtitle1",align:"center",gutterBottom:!0,children:e.title}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",align:"center",children:e.description})]})},e.type)))})}),(0,K.jsx)(N.A,{children:(0,K.jsx)(o.A,{onClick:R,children:"Cancel"})})]})]})};var Fe=l(43608),We=l(10977),Te=l(17804),Be=l(28499),Ne=l(47030);const Ee=e=>{let{dataSource:i,selectedColumns:l=[],onChange:n,sortBy:o,onSortChange:d,groupBy:x,onGroupChange:u}=e;const[p,j]=(0,t.useState)([]);(0,t.useEffect)((()=>{if(null!==i&&void 0!==i&&i.schema){const e=i.schema.map((e=>({id:e.id,name:e.name,type:e.type,description:e.description,isSortable:!1!==e.sortable,isGroupable:!1!==e.groupable,isAggregatable:!0===e.aggregatable,aggregationFunctions:e.aggregationFunctions||[]})));if(j(e),0===l.length&&e.length>0&&n){const i=e.slice(0,Math.min(5,e.length)).map((e=>({id:e.id,name:e.name,type:e.type,width:"auto",visible:!0,aggregation:null})));n(i)}}}),[i,n,l.length]);const v=(e,i)=>{d&&d(e?{columnId:e,direction:i}:null)},y=e=>p.find((i=>i.id===e))||{id:"",name:"",type:""};return(0,K.jsxs)(a.A,{children:[(0,K.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Select Columns"}),!i&&(0,K.jsx)(X.A,{severity:"warning",sx:{mb:3},children:"Please select a data source first."}),(0,K.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,K.jsxs)(r.A,{variant:"outlined",sx:{height:"100%"},children:[(0,K.jsx)(a.A,{sx:{p:2},children:(0,K.jsxs)(s.A,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(Be.A,{sx:{mr:1}}),"Available Columns"]})}),(0,K.jsx)(g.A,{}),0===p.length?(0,K.jsx)(a.A,{sx:{p:2,textAlign:"center"},children:(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"No columns available in the selected data source."})}):(0,K.jsx)(h.A,{dense:!0,sx:{maxHeight:400,overflow:"auto"},children:p.map((e=>(0,K.jsx)(m.Ay,{secondaryAction:l.some((i=>i.id===e.id))?(0,K.jsx)(k.A,{size:"small",label:"Added",color:"primary",variant:"outlined"}):(0,K.jsx)(z.A,{edge:"end",size:"small",onClick:()=>(e=>{if(l.some((i=>i.id===e.id))||!n)return;const i={id:e.id,name:e.name,type:e.type,width:"auto",visible:!0,aggregation:null};n([...l,i])})(e),disabled:l.some((i=>i.id===e.id)),children:(0,K.jsx)(q.A,{})}),children:(0,K.jsx)(A.A,{primary:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[e.name,e.description&&(0,K.jsx)(S.A,{title:e.description,arrow:!0,children:(0,K.jsx)(Ne.A,{fontSize:"small",color:"action",sx:{ml:1}})})]}),secondary:e.type})},e.id)))})]})}),(0,K.jsxs)(c.Ay,{item:!0,xs:12,md:8,children:[(0,K.jsxs)(r.A,{variant:"outlined",children:[(0,K.jsxs)(a.A,{sx:{p:2},children:[(0,K.jsxs)(s.A,{variant:"subtitle1",gutterBottom:!0,children:["Selected Columns (",l.length,")"]}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"Drag to reorder columns. Configure visibility, width, and aggregation functions."})]}),(0,K.jsx)(g.A,{}),0===l.length?(0,K.jsx)(a.A,{sx:{p:3,textAlign:"center"},children:(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"No columns selected yet. Add columns from the available list."})}):(0,K.jsx)(h.A,{sx:{maxHeight:400,overflow:"auto"},children:l.map(((e,i)=>{const s=y(e.id);return(0,K.jsxs)(t.Fragment,{children:[(0,K.jsxs)(m.Ay,{children:[(0,K.jsx)(P.A,{children:(0,K.jsx)(ke.A,{color:"action"})}),(0,K.jsx)(A.A,{primary:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[e.name,e.aggregation&&(0,K.jsx)(k.A,{label:e.aggregation,size:"small",color:"secondary",sx:{ml:1}})]}),secondary:(0,K.jsxs)(a.A,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:1},children:[(0,K.jsx)(le.A,{control:(0,K.jsx)(ne.A,{checked:e.visible,onChange:i=>((e,i)=>{if(!n)return;const t=l.map((l=>l.id===e?{...l,visible:i}:l));n(t)})(e.id,i.target.checked),size:"small"}),label:"Visible"}),(0,K.jsxs)(ee.A,{size:"small",sx:{minWidth:100},children:[(0,K.jsx)(Ae.A,{id:`width-label-${e.id}`,children:"Width"}),(0,K.jsxs)(je.A,{labelId:`width-label-${e.id}`,value:e.width,label:"Width",onChange:i=>((e,i)=>{if(!n)return;const t=l.map((l=>l.id===e?{...l,width:i}:l));n(t)})(e.id,i.target.value),children:[(0,K.jsx)(I.A,{value:"auto",children:"Auto"}),(0,K.jsx)(I.A,{value:"small",children:"Small"}),(0,K.jsx)(I.A,{value:"medium",children:"Medium"}),(0,K.jsx)(I.A,{value:"large",children:"Large"})]})]}),s.isAggregatable&&(0,K.jsxs)(ee.A,{size:"small",sx:{minWidth:120},children:[(0,K.jsx)(Ae.A,{id:`aggregation-label-${e.id}`,children:"Aggregation"}),(0,K.jsxs)(je.A,{labelId:`aggregation-label-${e.id}`,value:e.aggregation||"",label:"Aggregation",onChange:i=>((e,i)=>{if(!n)return;const t=l.map((l=>l.id===e?{...l,aggregation:i}:l));n(t)})(e.id,i.target.value||null),children:[(0,K.jsx)(I.A,{value:"",children:"None"}),s.aggregationFunctions&&s.aggregationFunctions.length>0?s.aggregationFunctions.map((e=>(0,K.jsx)(I.A,{value:e,children:e},e))):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(I.A,{value:"sum",children:"Sum"}),(0,K.jsx)(I.A,{value:"avg",children:"Average"}),(0,K.jsx)(I.A,{value:"min",children:"Minimum"}),(0,K.jsx)(I.A,{value:"max",children:"Maximum"}),(0,K.jsx)(I.A,{value:"count",children:"Count"})]})]})]})]})}),(0,K.jsxs)(ge.A,{children:[(0,K.jsx)(z.A,{edge:"end",size:"small",onClick:()=>(e=>{if(e<=0||!n)return;const i=[...l];[i[e],i[e-1]]=[i[e-1],i[e]],n(i)})(i),disabled:0===i,sx:{mr:1},children:(0,K.jsx)(Fe.A,{fontSize:"small"})}),(0,K.jsx)(z.A,{edge:"end",size:"small",onClick:()=>(e=>{if(e>=l.length-1||!n)return;const i=[...l];[i[e],i[e+1]]=[i[e+1],i[e]],n(i)})(i),disabled:i===l.length-1,sx:{mr:1},children:(0,K.jsx)(We.A,{fontSize:"small"})}),(0,K.jsx)(z.A,{edge:"end",size:"small",onClick:()=>(e=>{if(!n)return;const i=l.filter((i=>i.id!==e));n(i),(null===o||void 0===o?void 0:o.columnId)===e&&d&&d(null),(null===x||void 0===x?void 0:x.columnId)===e&&u&&u(null)})(e.id),color:"error",children:(0,K.jsx)(M.A,{fontSize:"small"})})]})]}),(0,K.jsx)(g.A,{variant:"inset",component:"li"})]},e.id)}))})]}),(0,K.jsxs)(c.Ay,{container:!0,spacing:2,sx:{mt:2},children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,K.jsxs)(r.A,{variant:"outlined",sx:{p:2},children:[(0,K.jsxs)(s.A,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(Y.A,{sx:{mr:1}}),"Sort By"]}),(0,K.jsx)(a.A,{sx:{mt:2},children:(0,K.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,K.jsx)(c.Ay,{item:!0,xs:8,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{id:"sort-column-label",children:"Column"}),(0,K.jsxs)(je.A,{labelId:"sort-column-label",value:(null===o||void 0===o?void 0:o.columnId)||"",label:"Column",onChange:e=>v(e.target.value,(null===o||void 0===o?void 0:o.direction)||"asc"),children:[(0,K.jsx)(I.A,{value:"",children:"None"}),l.filter((e=>y(e.id).isSortable)).map((e=>(0,K.jsx)(I.A,{value:e.id,children:e.name},e.id)))]})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:4,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",disabled:!(null!==o&&void 0!==o&&o.columnId),children:[(0,K.jsx)(Ae.A,{id:"sort-direction-label",children:"Direction"}),(0,K.jsxs)(je.A,{labelId:"sort-direction-label",value:(null===o||void 0===o?void 0:o.direction)||"asc",label:"Direction",onChange:e=>v((null===o||void 0===o?void 0:o.columnId)||"",e.target.value),children:[(0,K.jsx)(I.A,{value:"asc",children:"Ascending"}),(0,K.jsx)(I.A,{value:"desc",children:"Descending"})]})]})})]})})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,K.jsxs)(r.A,{variant:"outlined",sx:{p:2},children:[(0,K.jsxs)(s.A,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(Te.A,{sx:{mr:1}}),"Group By"]}),(0,K.jsx)(a.A,{sx:{mt:2},children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{id:"group-column-label",children:"Column"}),(0,K.jsxs)(je.A,{labelId:"group-column-label",value:(null===x||void 0===x?void 0:x.columnId)||"",label:"Column",onChange:e=>{return i=e.target.value,void(u&&u(i?{columnId:i}:null));var i},children:[(0,K.jsx)(I.A,{value:"",children:"None"}),l.filter((e=>y(e.id).isGroupable)).map((e=>(0,K.jsx)(I.A,{value:e.id,children:e.name},e.id)))]})]})})]})})]})]})]})]})};var $e=l(2828),qe=l(81045),Le=l(24176),Ve=l(2759),Me=l(57875);const Ge=e=>{let{selected:i,availableDataSources:l=[],onChange:t,name:n="",description:r="",onNameChange:o,onDescriptionChange:d}=e;const x=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"database":return(0,K.jsx)(Ve.A,{fontSize:"large"});case"api":default:return(0,K.jsx)(Le.A,{fontSize:"large"});case"analytics":return(0,K.jsx)(Me.A,{fontSize:"large"})}};return(0,K.jsxs)(a.A,{children:[(0,K.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Report Information"}),(0,K.jsxs)(c.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(f.A,{label:"Report Name",fullWidth:!0,value:n,onChange:e=>o&&o(e.target.value),required:!0,placeholder:"Enter a name for your report",helperText:"This name will be displayed in the reports list"})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(f.A,{label:"Description",fullWidth:!0,value:r,onChange:e=>d&&d(e.target.value),multiline:!0,rows:1,placeholder:"Describe the purpose of this report",helperText:"Optional brief description"})})]}),(0,K.jsx)(g.A,{sx:{my:3}}),(0,K.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Select Data Source"}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Choose the data source that contains the information you want to include in your report."}),(0,K.jsx)(c.Ay,{container:!0,spacing:2,sx:{mt:2},children:l.map((e=>{var l;return(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,K.jsx)(j.A,{variant:(null===i||void 0===i?void 0:i.id)===e.id?"elevation":"outlined",elevation:(null===i||void 0===i?void 0:i.id)===e.id?3:0,sx:{borderColor:(null===i||void 0===i?void 0:i.id)===e.id?"primary.main":"divider",height:"100%",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"primary.main",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},children:(0,K.jsx)($e.A,{onClick:()=>(e=>{t&&t(e)})(e),sx:{height:"100%"},children:(0,K.jsxs)(y.A,{sx:{height:"100%"},children:[(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,K.jsx)(qe.A,{sx:{bgcolor:(null===i||void 0===i?void 0:i.id)===e.id?"primary.main":"action.selected",mr:2},children:x(e.type)}),(0,K.jsx)(s.A,{variant:"h6",component:"div",children:e.name})]}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:1},children:[(0,K.jsx)(k.A,{label:e.type,size:"small",color:(null===i||void 0===i?void 0:i.id)===e.id?"primary":"default"}),null===(l=e.tags)||void 0===l?void 0:l.map((e=>(0,K.jsx)(k.A,{label:e,size:"small",variant:"outlined"},e)))]})]})})})},e.id)}))}),0===l.length&&(0,K.jsx)(a.A,{sx:{textAlign:"center",py:4},children:(0,K.jsx)(s.A,{variant:"body1",color:"text.secondary",children:"No data sources available. Please contact your administrator."})})]})};var Ue=l(88911);const Qe=e=>{var i,l,n,d;let{dataSource:x,filters:u=[],onChange:h}=e;const[m,p]=(0,t.useState)([]),[A,v]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(null!==x&&void 0!==x&&x.schema){const e=x.schema.filter((e=>!1!==e.filterable)).map((e=>({id:e.id,name:e.name,type:e.type,operators:b(e.type),description:e.description})));p(e)}}),[x]);const b=e=>{switch(e){case"string":return[{id:"equals",label:"Equals"},{id:"contains",label:"Contains"},{id:"startsWith",label:"Starts with"},{id:"endsWith",label:"Ends with"},{id:"isNull",label:"Is empty"},{id:"isNotNull",label:"Is not empty"}];case"number":return[{id:"equals",label:"Equals"},{id:"notEquals",label:"Not equals"},{id:"greaterThan",label:"Greater than"},{id:"lessThan",label:"Less than"},{id:"between",label:"Between"},{id:"isNull",label:"Is empty"},{id:"isNotNull",label:"Is not empty"}];case"date":case"datetime":return[{id:"equals",label:"On"},{id:"before",label:"Before"},{id:"after",label:"After"},{id:"between",label:"Between"},{id:"isNull",label:"Is empty"},{id:"isNotNull",label:"Is not empty"}];case"boolean":return[{id:"equals",label:"Is"},{id:"isNull",label:"Is empty"},{id:"isNotNull",label:"Is not empty"}];default:return[{id:"equals",label:"Equals"},{id:"notEquals",label:"Not equals"},{id:"isNull",label:"Is empty"},{id:"isNotNull",label:"Is not empty"}]}},C=()=>{var e;if(!h)return;const i={id:`filter_${Date.now()}`,field:(null===(e=m[0])||void 0===e?void 0:e.id)||"",operator:"",value:"",displayValue:""};h([...u,i]),v(i.id)},w=(e,i,l)=>{if(!h)return;const t=u.map((t=>{if(t.id===e){const e={...t,[i]:l};if("field"===i){var n;const i=m.find((e=>e.id===l));e.operator=(null===i||void 0===i||null===(n=i.operators[0])||void 0===n?void 0:n.id)||"",e.value="",e.displayValue=""}return e}return t}));h(t)},k=e=>m.find((i=>i.id===e))||{id:"",name:"",type:"",operators:[]},D=e=>k(e).operators||[],R=e=>{var i;const l=k(e.field),t=(null===(i=D(e.field).find((i=>i.id===e.operator)))||void 0===i?void 0:i.label)||e.operator;return"isNull"===e.operator?`${l.name} is empty`:"isNotNull"===e.operator?`${l.name} is not empty`:`${l.name} ${t} ${e.displayValue}`};return(0,K.jsxs)(a.A,{children:[(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[(0,K.jsx)(s.A,{variant:"h6",children:"Define Filters"}),(0,K.jsx)(o.A,{variant:"contained",startIcon:(0,K.jsx)(q.A,{}),onClick:C,disabled:!x||0===m.length,children:"Add Filter"})]}),!x&&(0,K.jsx)(X.A,{severity:"warning",sx:{mb:3},children:"Please select a data source first."}),x&&0===m.length&&(0,K.jsx)(X.A,{severity:"info",sx:{mb:3},children:"The selected data source does not have any filterable fields."}),(0,K.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,K.jsxs)(r.A,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,K.jsxs)(s.A,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)($.A,{sx:{mr:1}}),"Applied Filters (",u.length,")"]}),(0,K.jsx)(g.A,{sx:{my:1}}),0===u.length?(0,K.jsxs)(a.A,{sx:{py:2,textAlign:"center"},children:[(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"No filters applied yet."}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",children:'Click "Add Filter" to create your first filter.'})]}):(0,K.jsx)(Ue.A,{spacing:1,sx:{mt:2},children:u.map((e=>(0,K.jsx)(j.A,{variant:"outlined",sx:{borderColor:A===e.id?"primary.main":"divider",cursor:"pointer","&:hover":{borderColor:"primary.main"}},onClick:()=>v(e.id),children:(0,K.jsx)(y.A,{sx:{p:1,"&:last-child":{pb:1}},children:(0,K.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,K.jsx)(s.A,{variant:"body2",children:R(e)}),(0,K.jsx)(z.A,{size:"small",color:"error",onClick:i=>{i.stopPropagation(),(e=>{if(!h)return;const i=u.filter((i=>i.id!==e));h(i),A===e&&v(null)})(e.id)},"aria-label":"remove filter",children:(0,K.jsx)(M.A,{fontSize:"small"})})]})})},e.id)))})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,md:8,children:(0,K.jsx)(r.A,{variant:"outlined",sx:{p:3},children:A?(0,K.jsxs)(a.A,{children:[(0,K.jsx)(s.A,{variant:"subtitle1",gutterBottom:!0,children:"Edit Filter"}),(0,K.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{id:`filter-field-${A}-label`,children:"Field"}),(0,K.jsx)(je.A,{labelId:`filter-field-${A}-label`,value:(null===(i=u.find((e=>e.id===A)))||void 0===i?void 0:i.field)||"",onChange:e=>w(A,"field",e.target.value),label:"Field",children:m.map((e=>(0,K.jsx)(I.A,{value:e.id,children:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[e.name,e.description&&(0,K.jsx)(S.A,{title:e.description,arrow:!0,children:(0,K.jsx)(Ne.A,{fontSize:"small",color:"action",sx:{ml:1}})})]})},e.id)))})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{id:`filter-operator-${A}-label`,children:"Operator"}),(0,K.jsx)(je.A,{labelId:`filter-operator-${A}-label`,value:(null===(l=u.find((e=>e.id===A)))||void 0===l?void 0:l.operator)||"",onChange:e=>w(A,"operator",e.target.value),label:"Operator",children:D((null===(n=u.find((e=>e.id===A)))||void 0===n?void 0:n.field)||"").map((e=>(0,K.jsx)(I.A,{value:e.id,children:e.label},e.id)))})]})}),(null===(d=u.find((e=>e.id===A)))||void 0===d?void 0:d.operator)&&(0,K.jsx)(c.Ay,{item:!0,xs:12,children:(e=>{var i,l,t,n;const s=k(e.field),r=e.operator;if("isNull"===r||"isNotNull"===r)return null;switch(s.type){case"date":case"datetime":return(0,K.jsx)(he.$,{dateAdapter:me.h,children:"between"===r?(0,K.jsxs)(Ue.A,{direction:"row",spacing:2,sx:{mt:2},children:[(0,K.jsx)(ue.l,{label:"From",value:(null===(i=e.value)||void 0===i?void 0:i.from)||null,onChange:i=>{var l,t;const n={...e.value||{},from:i};w(e.id,"value",n),w(e.id,"displayValue",`From ${(null===i||void 0===i?void 0:i.toLocaleDateString())||"any"} to ${(null===(l=e.value)||void 0===l||null===(t=l.to)||void 0===t?void 0:t.toLocaleDateString())||"any"}`)},slotProps:{textField:{fullWidth:!0,size:"small"}}}),(0,K.jsx)(ue.l,{label:"To",value:(null===(l=e.value)||void 0===l?void 0:l.to)||null,onChange:i=>{var l,t;const n={...e.value||{},to:i};w(e.id,"value",n),w(e.id,"displayValue",`From ${(null===(l=e.value)||void 0===l||null===(t=l.from)||void 0===t?void 0:t.toLocaleDateString())||"any"} to ${(null===i||void 0===i?void 0:i.toLocaleDateString())||"any"}`)},slotProps:{textField:{fullWidth:!0,size:"small"}}})]}):(0,K.jsx)(a.A,{sx:{mt:2},children:(0,K.jsx)(ue.l,{label:"Value",value:e.value,onChange:i=>{w(e.id,"value",i),w(e.id,"displayValue",(null===i||void 0===i?void 0:i.toLocaleDateString())||"")},slotProps:{textField:{fullWidth:!0,size:"small"}}})})});case"number":return"between"===r?(0,K.jsxs)(Ue.A,{direction:"row",spacing:2,sx:{mt:2},children:[(0,K.jsx)(f.A,{label:"From",type:"number",value:(null===(t=e.value)||void 0===t?void 0:t.from)||"",onChange:i=>{var l;const t={...e.value||{},from:i.target.value};w(e.id,"value",t),w(e.id,"displayValue",`From ${i.target.value||"any"} to ${(null===(l=e.value)||void 0===l?void 0:l.to)||"any"}`)},fullWidth:!0,size:"small"}),(0,K.jsx)(f.A,{label:"To",type:"number",value:(null===(n=e.value)||void 0===n?void 0:n.to)||"",onChange:i=>{var l;const t={...e.value||{},to:i.target.value};w(e.id,"value",t),w(e.id,"displayValue",`From ${(null===(l=e.value)||void 0===l?void 0:l.from)||"any"} to ${i.target.value||"any"}`)},fullWidth:!0,size:"small"})]}):(0,K.jsx)(f.A,{label:"Value",type:"number",value:e.value||"",onChange:i=>{w(e.id,"value",i.target.value),w(e.id,"displayValue",i.target.value)},fullWidth:!0,size:"small",sx:{mt:2}});case"boolean":return(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",sx:{mt:2},children:[(0,K.jsx)(Ae.A,{id:`filter-value-${e.id}-label`,children:"Value"}),(0,K.jsxs)(je.A,{labelId:`filter-value-${e.id}-label`,value:e.value||"",onChange:i=>{w(e.id,"value",i.target.value),w(e.id,"displayValue","true"===i.target.value?"Yes":"No")},label:"Value",children:[(0,K.jsx)(I.A,{value:"true",children:"Yes"}),(0,K.jsx)(I.A,{value:"false",children:"No"})]})]});default:return(0,K.jsx)(f.A,{label:"Value",value:e.value||"",onChange:i=>{w(e.id,"value",i.target.value),w(e.id,"displayValue",i.target.value)},fullWidth:!0,size:"small",sx:{mt:2}})}})(u.find((e=>e.id===A)))})]})]}):(0,K.jsxs)(a.A,{sx:{py:4,textAlign:"center"},children:[(0,K.jsx)(s.A,{variant:"body1",color:"text.secondary",sx:{mb:1},children:"Select a filter to edit or create a new one."}),(0,K.jsx)(o.A,{variant:"outlined",startIcon:(0,K.jsx)(q.A,{}),onClick:C,disabled:!x||0===m.length,children:"Add Filter"})]})})})]})]})};var Oe=l(79650),Ye=l(71806),He=l(84882),_e=l(28076),Je=l(10039),Ke=l(73460),Ze=l(41132),Xe=l(48625);const ei=e=>{var i,l,n,d;let{config:c,data:x=[],loading:u=!1,error:h=null,onRefresh:m,onDownload:p,onConfigChange:A}=e;const[j,v]=(0,t.useState)(10),g=()=>c.columns.filter((e=>e.visible)),y=(e,i)=>{if(null===e||void 0===e)return"-";if(i.renderer)return i.renderer(e);switch(i.type){case"date":return new Date(e).toLocaleDateString();case"datetime":return new Date(e).toLocaleString();case"number":return"number"===typeof e?e.toLocaleString():e;case"boolean":return e?"Yes":"No";case"currency":return"number"===typeof e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e):e;case"percentage":return"number"===typeof e?`${e.toFixed(2)}%`:e;default:return e}},b=e=>{switch(e.type){case"number":case"currency":case"percentage":return"right";default:return"left"}},f=e=>{switch(e){case"small":return{width:100,maxWidth:100};case"medium":return{width:150,maxWidth:150};case"large":return{width:200,maxWidth:200};default:return{}}};return(0,K.jsxs)(a.A,{children:[(0,K.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,K.jsx)(s.A,{variant:"h6",children:"Report Preview"}),(0,K.jsxs)(a.A,{sx:{display:"flex",gap:2},children:[(0,K.jsxs)(ee.A,{variant:"outlined",size:"small",sx:{minWidth:120},children:[(0,K.jsx)(Ae.A,{id:"preview-limit-label",children:"Preview Rows"}),(0,K.jsxs)(je.A,{labelId:"preview-limit-label",value:j,onChange:e=>{v(e.target.value)},label:"Preview Rows",children:[(0,K.jsx)(I.A,{value:5,children:"5 rows"}),(0,K.jsx)(I.A,{value:10,children:"10 rows"}),(0,K.jsx)(I.A,{value:20,children:"20 rows"}),(0,K.jsx)(I.A,{value:50,children:"50 rows"})]})]}),m&&(0,K.jsx)(o.A,{variant:"outlined",startIcon:(0,K.jsx)(Xe.A,{}),onClick:m,disabled:u,children:"Refresh"}),p&&(0,K.jsx)(o.A,{variant:"outlined",startIcon:(0,K.jsx)(Ze.A,{}),onClick:p,disabled:u||!!h||0===x.length,children:"Download"})]})]}),(0,K.jsxs)(r.A,{variant:"outlined",sx:{p:2,mb:3},children:[(0,K.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Report Configuration"}),(0,K.jsxs)(Ue.A,{direction:"row",spacing:2,sx:{flexWrap:"wrap",gap:1},children:[(0,K.jsx)(k.A,{icon:(0,K.jsx)(Le.A,{}),label:(null===(i=c.dataSource)||void 0===i?void 0:i.name)||"No data source selected",color:c.dataSource?"primary":"default",variant:"outlined"}),(0,K.jsx)(k.A,{icon:(0,K.jsx)(Be.A,{}),label:`${g().length} columns`,variant:"outlined"}),(0,K.jsx)(k.A,{icon:(0,K.jsx)($.A,{}),label:`${c.filters.length} filters`,variant:"outlined"}),c.sortBy&&(0,K.jsx)(k.A,{label:`Sorted by ${(null===(l=c.columns.find((e=>{var i;return e.id===(null===(i=c.sortBy)||void 0===i?void 0:i.columnId)})))||void 0===l?void 0:l.name)||""} (${"asc"===(null===(n=c.sortBy)||void 0===n?void 0:n.direction)?"Ascending":"Descending"})`,variant:"outlined"}),c.groupBy&&(0,K.jsx)(k.A,{label:`Grouped by ${(null===(d=c.columns.find((e=>{var i;return e.id===(null===(i=c.groupBy)||void 0===i?void 0:i.columnId)})))||void 0===d?void 0:d.name)||""}`,variant:"outlined"})]})]}),(0,K.jsxs)(r.A,{variant:"outlined",children:[u?(0,K.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:5},children:(0,K.jsx)(w.A,{})}):h?(0,K.jsx)(X.A,{severity:"error",sx:{m:2},children:h}):0===x.length?(0,K.jsxs)(a.A,{sx:{p:3,textAlign:"center"},children:[(0,K.jsx)(s.A,{variant:"body1",color:"text.secondary",children:"No data available for preview with the current configuration."}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Try adjusting your filters or data source selection."})]}):(0,K.jsx)(Oe.A,{sx:{maxHeight:500},children:(0,K.jsxs)(Ye.A,{stickyHeader:!0,children:[(0,K.jsx)(He.A,{children:(0,K.jsx)(_e.A,{children:g().map((e=>(0,K.jsxs)(Je.A,{align:b(e),style:f(e.width),sx:{fontWeight:"bold"},children:[e.name,e.aggregation&&(0,K.jsx)(k.A,{label:e.aggregation,size:"small",color:"secondary",sx:{ml:1}})]},e.id)))})}),(0,K.jsx)(Ke.A,{children:x.slice(0,j).map(((e,i)=>(0,K.jsx)(_e.A,{hover:!0,children:g().map((l=>(0,K.jsx)(Je.A,{align:b(l),children:y(e[l.id],l)},`${i}-${l.id}`)))},`row-${i}`)))})]})}),x.length>j&&(0,K.jsx)(a.A,{sx:{p:2,textAlign:"center",borderTop:1,borderColor:"divider"},children:(0,K.jsxs)(s.A,{variant:"body2",color:"text.secondary",children:["Showing ",j," of ",x.length," rows. Download the full report to see all data."]})})]})]})};var ii=l(30279),li=l(61958),ti=l(10155),ni=l(53753),ai=l(21337),si=l(85473),ri=l(57677),oi=l(93012),di=l(92530);const ci=e=>{let{onSearch:i,onSaveQuery:l,recentQueries:n=[],savedQueries:d=[],loading:c=!1,error:x=null,showSuggestions:u=!0,suggestions:p=[],onApplySuggestion:j,sx:v}=e;const[y,b]=(0,t.useState)(""),[C,D]=(0,t.useState)(!1),[R,I]=(0,t.useState)(!1),[P,F]=(0,t.useState)(null);(0,t.useEffect)((()=>{if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!1,e.interimResults=!1,e.onresult=e=>{const i=e.results[0][0].transcript;b(i),I(!1)},e.onerror=()=>{I(!1)},e.onend=()=>{I(!1)},F(e)}}),[]);const W=()=>{y.trim()&&i&&i(y.trim())},T=e=>{b(e),j&&j(e)},B=e=>d.some((i=>i.text===e)),N=p.length>0?p:["Show me total revenue by month for the last quarter","What are the top 5 performing products?","Compare conversion rates between desktop and mobile","Show user growth trend over the past year","Identify customers with declining activity"];return(0,K.jsxs)(r.A,{variant:"outlined",sx:{p:2,mb:3,borderRadius:1,...v},children:[(0,K.jsxs)(a.A,{sx:{mb:2},children:[(0,K.jsxs)(s.A,{variant:"subtitle1",sx:{fontWeight:"medium",mb:1,display:"flex",alignItems:"center"},children:[(0,K.jsx)(E.A,{sx:{mr:1,fontSize:20}}),"Ask a question about your data"]}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:'Use natural language to query your data. For example, "Show me sales by region for Q1"'}),(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,K.jsx)(f.A,{fullWidth:!0,variant:"outlined",placeholder:"Ask a question about your data...",value:y,onChange:e=>{b(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&W()},disabled:c,InputProps:{endAdornment:(0,K.jsxs)(a.A,{sx:{display:"flex"},children:[y&&(0,K.jsx)(z.A,{size:"small",onClick:()=>{b("")},edge:"end",children:(0,K.jsx)(ti.A,{})}),P&&(0,K.jsx)(S.A,{title:R?"Stop listening":"Voice search",children:(0,K.jsx)(z.A,{size:"small",onClick:()=>{P&&(R?P.stop():(P.start(),I(!0)))},color:R?"primary":"default",edge:"end",children:(0,K.jsx)(ni.A,{})})})]})},sx:{mr:1}}),(0,K.jsx)(o.A,{variant:"contained",color:"primary",onClick:W,disabled:!y.trim()||c,startIcon:c?(0,K.jsx)(w.A,{size:20,color:"inherit"}):(0,K.jsx)(E.A,{}),children:c?"Processing":"Search"})]}),(0,K.jsxs)(a.A,{sx:{display:"flex",mt:1,alignItems:"center"},children:[(0,K.jsx)(S.A,{title:"View search history",children:(0,K.jsxs)(z.A,{size:"small",onClick:()=>{D(!C)},children:[C?(0,K.jsx)(si.A,{}):(0,K.jsx)(ai.A,{}),(0,K.jsx)(li.A,{fontSize:"small",sx:{ml:.5}})]})}),y.trim()&&(0,K.jsx)(S.A,{title:B(y.trim())?"Query already saved":"Save this query",children:(0,K.jsx)(z.A,{size:"small",onClick:()=>{y.trim()&&l&&l(y.trim())},disabled:B(y.trim())||!y.trim(),children:B(y.trim())?(0,K.jsx)(oi.A,{color:"primary"}):(0,K.jsx)(di.A,{})})}),x&&(0,K.jsx)(s.A,{variant:"caption",color:"error",sx:{ml:2},children:x})]})]}),(0,K.jsxs)(ii.A,{in:C,children:[(0,K.jsx)(g.A,{sx:{my:2}}),(0,K.jsxs)(a.A,{children:[(0,K.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Recent Queries"}),n.length>0?(0,K.jsx)(h.A,{dense:!0,disablePadding:!0,children:n.slice(0,5).map(((e,i)=>(0,K.jsxs)(m.Ay,{button:!0,onClick:()=>T(e.text),dense:!0,sx:{borderRadius:1},children:[(0,K.jsx)(A.A,{primary:e.text,secondary:e.timestamp&&new Date(e.timestamp).toLocaleString()}),B(e.text)&&(0,K.jsx)(oi.A,{fontSize:"small",color:"primary"})]},i)))}):(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"No recent queries"}),d.length>0&&(0,K.jsxs)(a.A,{sx:{mt:2},children:[(0,K.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Saved Queries"}),(0,K.jsx)(h.A,{dense:!0,disablePadding:!0,children:d.map(((e,i)=>(0,K.jsxs)(m.Ay,{button:!0,onClick:()=>T(e.text),dense:!0,sx:{borderRadius:1},children:[(0,K.jsx)(A.A,{primary:e.text,secondary:e.name||e.description}),(0,K.jsx)(oi.A,{fontSize:"small",color:"primary"})]},i)))})]})]})]}),u&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(g.A,{sx:{my:2}}),(0,K.jsxs)(a.A,{children:[(0,K.jsxs)(s.A,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",mb:1},children:[(0,K.jsx)(ri.A,{fontSize:"small",sx:{mr:.5},color:"warning"}),"Try asking"]}),(0,K.jsx)(a.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:N.map(((e,i)=>(0,K.jsx)(k.A,{label:e,onClick:()=>T(e),clickable:!0,size:"small",sx:{mb:1}},i)))})]})]})]})};var xi=l(10611),ui=l(37965),hi=l(66461),mi=l(72819),pi=l(63709),Ai=l(96325);const ji=e=>{var i;let{title:l="Report",description:n="Report description",loading:d=!1,error:c=null,sections:x=[],data:u={},filters:h,filterValues:m,onFilterChange:p,onFilterApply:A,onRefresh:b,onExport:f,onSave:C,onShare:w,showExport:P=!0,headerActions:F,sx:W}=e;const[T,B]=(0,t.useState)(x.map((e=>e.id))),[N,E]=(0,t.useState)(null),[$,q]=(0,t.useState)(null),V=()=>{E(null)},M=()=>{q(null)},G=e=>{f&&f(e,u),V()};return(0,K.jsxs)(a.A,{sx:{width:"100%",...W},children:[(0,K.jsxs)(r.A,{sx:{p:3,mb:3,borderRadius:1},children:[(0,K.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,K.jsxs)(a.A,{children:[(0,K.jsx)(s.A,{variant:"h5",gutterBottom:!0,children:l}),(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",children:n})]}),(0,K.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[b&&(0,K.jsx)(o.A,{variant:"outlined",size:"small",startIcon:(0,K.jsx)(Xe.A,{}),onClick:b,disabled:d,children:"Refresh"}),P&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(o.A,{variant:"outlined",size:"small",startIcon:(0,K.jsx)(Ze.A,{}),onClick:e=>{E(e.currentTarget)},disabled:d,children:"Export"}),(0,K.jsxs)(R.A,{anchorEl:N,open:Boolean(N),onClose:V,children:[(0,K.jsx)(I.A,{onClick:()=>G("pdf"),children:"PDF Document"}),(0,K.jsx)(I.A,{onClick:()=>G("excel"),children:"Excel Spreadsheet"}),(0,K.jsx)(I.A,{onClick:()=>G("csv"),children:"CSV File"}),(0,K.jsx)(I.A,{onClick:()=>G("image"),children:"Image (PNG)"}),(0,K.jsx)(I.A,{onClick:()=>G("json"),children:"Raw Data (JSON)"})]})]}),C&&(0,K.jsx)(o.A,{variant:"outlined",size:"small",startIcon:(0,K.jsx)(De.A,{}),onClick:()=>C(u),disabled:d,children:"Save"}),w&&(0,K.jsx)(o.A,{variant:"outlined",size:"small",startIcon:(0,K.jsx)(ui.A,{}),onClick:()=>w(u),disabled:d,children:"Share"}),F,(0,K.jsx)(z.A,{size:"small",onClick:e=>{q(e.currentTarget)},disabled:d,children:(0,K.jsx)(L.A,{})}),(0,K.jsxs)(R.A,{anchorEl:$,open:Boolean($),onClose:M,children:[(0,K.jsxs)(I.A,{onClick:()=>{window.print(),M()},children:[(0,K.jsx)(pi.A,{fontSize:"small",sx:{mr:1}}),"Print Report"]}),(0,K.jsxs)(I.A,{onClick:()=>{B(x.map((e=>e.id)))},children:[(0,K.jsx)(U.A,{fontSize:"small",sx:{mr:1}}),"Expand All Sections"]}),(0,K.jsxs)(I.A,{onClick:()=>{B([])},children:[(0,K.jsx)(mi.A,{fontSize:"small",sx:{mr:1}}),"Collapse All Sections"]}),(0,K.jsxs)(I.A,{onClick:M,children:[(0,K.jsx)(hi.A,{fontSize:"small",sx:{mr:1}}),"Fullscreen Mode"]}),(0,K.jsxs)(I.A,{onClick:M,children:[(0,K.jsx)(Ai.A,{fontSize:"small",sx:{mr:1}}),"View Raw Data"]})]})]})]}),d&&(0,K.jsx)(a.A,{sx:{width:"100%",mt:2},children:(0,K.jsx)(xi.A,{})}),c&&(0,K.jsx)(X.A,{severity:"error",sx:{mt:2},children:c?"string"===typeof c?c:c.message||"An error occurred":""}),!d&&!c&&u&&(0,K.jsxs)(a.A,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:1},children:[(0,K.jsx)(k.A,{label:`Generated: ${(new Date).toLocaleString()}`,size:"small",color:"default",icon:(0,K.jsx)(Ne.A,{})}),u.summary&&(0,K.jsx)(S.A,{title:"Total records in this report",children:(0,K.jsx)(k.A,{label:`Records: ${(null===(i=u.byDimension)||void 0===i?void 0:i.length)||0}`,size:"small",color:"primary",variant:"outlined"})})]})]}),x.map((e=>(0,K.jsxs)(j.A,{sx:{mb:3,borderRadius:1},variant:"outlined",children:[(0,K.jsx)(v.A,{title:e.title,subheader:e.description,action:(0,K.jsx)(z.A,{onClick:()=>{return i=e.id,void B((e=>e.includes(i)?e.filter((e=>e!==i)):[...e,i]));var i},size:"small",children:T.includes(e.id)?(0,K.jsx)(mi.A,{}):(0,K.jsx)(U.A,{})})}),(0,K.jsxs)(ii.A,{in:T.includes(e.id),children:[(0,K.jsx)(g.A,{}),(0,K.jsx)(y.A,{children:e.content}),e.actions&&(0,K.jsx)(D.A,{children:e.actions})]})]},e.id))),0===x.length&&!d&&(0,K.jsx)(r.A,{sx:{p:4,textAlign:"center"},children:(0,K.jsx)(s.A,{variant:"body1",color:"text.secondary",children:"No report sections available."})})]})};var vi=l(69859),gi=l(90469),yi=l(51962),bi=l(86974),fi=l(56893),Ci=l(51726),wi=l(86069),Si=l(33458),zi=l(15415),ki=l(22536),Di=l(37912),Ri=l(89704),Ii=l(99395),Pi=l(38795),Fi=l(13593);const Wi=e=>{var i,l,n,d,h,m,p;let{initialFilters:j={},loading:v=!1,error:y=null,data:b={},onFilterChange:S,onRefresh:z,onExport:D,onSave:R,onShare:P,onExecuteQuery:F,onDrillDown:W,savedConfigurations:T=[],sx:B}=e;const[N,q]=(0,t.useState)("overview"),[L,V]=(0,t.useState)("table"),[M,G]=(0,t.useState)("player"),[Q,O]=(0,t.useState)("day"),[Y,H]=(0,t.useState)(!0),[_,J]=(0,t.useState)(""),[Z,X]=(0,t.useState)(!1),[ie,le]=(0,t.useState)(!1),[te,ne]=(0,t.useState)({}),[ae,se]=(0,t.useState)("totalRevenue"),[re,oe]=(0,t.useState)("desc"),[de,ce]=(0,t.useState)(20),[pe,ve]=(0,t.useState)([null,null]),[ge,ye]=(0,t.useState)("sum"),[be,fe]=(0,t.useState)([]),[Ce,Se]=(0,t.useState)([]),[ze,ke]=(0,t.useState)([]),[Re,Ie]=(0,t.useState)([]),[Pe,Fe]=(0,t.useState)(["deposits","withdrawals","bets","wins","netGaming","uniquePlayers"]),[We,Te]=(0,t.useState)([]),[Be,Ne]=(0,t.useState)("standard"),[Ee,$e]=(0,t.useState)(!1),[qe,Ve]=(0,t.useState)(null),[Ge,Ue]=(0,t.useState)(null),Qe=[{value:"player",label:"Player",icon:(0,K.jsx)(fi.A,{fontSize:"small"})},{value:"whitelabel",label:"White Label",icon:(0,K.jsx)(Ci.A,{fontSize:"small"})},{value:"country",label:"Country",icon:(0,K.jsx)(xe.A,{fontSize:"small"})},{value:"gametype",label:"Game Type",icon:(0,K.jsx)(Ii.A,{fontSize:"small"})},{value:"tier",label:"Player Tier",icon:(0,K.jsx)(Ri.A,{fontSize:"small"})},{value:"device",label:"Device Type",icon:(0,K.jsx)(U.A,{fontSize:"small"})},{value:"playerStatus",label:"Player Status",icon:(0,K.jsx)(Di.A,{fontSize:"small"})},{value:"registrationSource",label:"Registration Source",icon:(0,K.jsx)(E.A,{fontSize:"small"})}],Oe=[{value:"day",label:"Daily",icon:(0,K.jsx)(we.A,{fontSize:"small"})},{value:"week",label:"Weekly",icon:(0,K.jsx)(wi.A,{fontSize:"small"})},{value:"month",label:"Monthly",icon:(0,K.jsx)(wi.A,{fontSize:"small"})},{value:"quarter",label:"Quarterly",icon:(0,K.jsx)(wi.A,{fontSize:"small"})},{value:"year",label:"Yearly",icon:(0,K.jsx)(wi.A,{fontSize:"small"})},{value:"all",label:"All Time",icon:(0,K.jsx)(wi.A,{fontSize:"small"})}],Ye=[{value:"table",label:"Table",icon:(0,K.jsx)(Le.A,{fontSize:"small"})},{value:"bar",label:"Bar Chart",icon:(0,K.jsx)(Me.A,{fontSize:"small"})},{value:"line",label:"Line Chart",icon:(0,K.jsx)(zi.A,{fontSize:"small"})},{value:"pie",label:"Pie Chart",icon:(0,K.jsx)(Si.A,{fontSize:"small"})},{value:"map",label:"Map View",icon:(0,K.jsx)(ki.A,{fontSize:"small"})},{value:"mixed",label:"Mixed View",icon:(0,K.jsx)(bi.A,{fontSize:"small"})}],He=[{value:"deposits",label:"Deposits",category:"Financial",type:"currency"},{value:"withdrawals",label:"Withdrawals",category:"Financial",type:"currency"},{value:"bets",label:"Total Bets",category:"Activity",type:"currency"},{value:"wins",label:"Total Wins",category:"Activity",type:"currency"},{value:"netGaming",label:"Net Gaming Revenue",category:"Financial",type:"currency"},{value:"uniquePlayers",label:"Unique Players",category:"User",type:"count"},{value:"activeUsers",label:"Active Users",category:"User",type:"count"},{value:"newRegistrations",label:"New Registrations",category:"User",type:"count"},{value:"sessions",label:"Total Sessions",category:"Activity",type:"count"},{value:"avgSessionDuration",label:"Avg. Session Duration",category:"Activity",type:"time"},{value:"gamesPlayed",label:"Games Played",category:"Activity",type:"count"},{value:"betsPerPlayer",label:"Bets per Player",category:"Activity",type:"ratio"},{value:"avgBetSize",label:"Average Bet Size",category:"Activity",type:"currency"},{value:"conversionRate",label:"Conversion Rate",category:"Performance",type:"percentage"},{value:"retentionRate",label:"Retention Rate",category:"Performance",type:"percentage"},{value:"churnRate",label:"Churn Rate",category:"Performance",type:"percentage"},{value:"depositConversion",label:"Deposit Conversion",category:"Performance",type:"percentage"},{value:"arpu",label:"ARPU",category:"Financial",type:"currency"},{value:"arppu",label:"ARPPU",category:"Financial",type:"currency"},{value:"ltv",label:"Lifetime Value",category:"Financial",type:"currency"}],_e=()=>{const e={dimension:M,timeGrouping:Q,dateRange:pe,metrics:Pe,whitelabels:be,countries:Ce,playerTiers:ze,gameTypes:Re,aggregation:ge,sortBy:ae,sortDirection:re,limit:de};S&&S(e),z&&z(e)},Je=()=>{if(!_.trim())return;const e={name:_,timestamp:(new Date).toISOString(),configuration:{dimension:M,timeGrouping:Q,visualizationType:L,metrics:Pe,filters:{dateRange:pe,whitelabels:be,countries:Ce,playerTiers:ze,gameTypes:Re},aggregation:ge,sortBy:ae,sortDirection:re,limit:de}};R&&R(e),J("")};return(0,K.jsxs)(a.A,{sx:{width:"100%",...B},children:[Y&&(0,K.jsx)(ci,{onSearch:async e=>{if(F){$e(!0),Ve(null);try{const i=await F(e);Ue(i)}catch(i){Ve(i.message||"Failed to execute query")}finally{$e(!1)}}},onSaveQuery:e=>{console.log("Saving query:",e)},loading:Ee,error:qe,showSuggestions:!0,suggestions:["Show me top 10 players by total deposits for last month","Compare revenue by country for Q2 vs Q1","Which white labels have the highest player retention rate?","Show daily bets and wins trend for VIP players","What's the average session duration by device type?","Which games generate the most revenue by country?","Show me players with declining activity in the last 3 months"]}),(0,K.jsxs)(r.A,{variant:"outlined",sx:{p:3,mb:3,borderRadius:1},children:[(0,K.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,K.jsxs)(s.A,{variant:"h5",sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(Le.A,{sx:{mr:1}}),"Daily Actions Report"]}),(0,K.jsxs)(a.A,{sx:{display:"flex",gap:2},children:[(0,K.jsx)(f.A,{size:"small",placeholder:"Name this report",value:_,onChange:e=>J(e.target.value),sx:{width:180}}),(0,K.jsx)(o.A,{variant:"outlined",startIcon:(0,K.jsx)(De.A,{}),disabled:!_.trim(),onClick:Je,children:"Save"}),T.length>0&&(0,K.jsxs)(ee.A,{size:"small",sx:{minWidth:180},children:[(0,K.jsx)(Ae.A,{children:"Load Configuration"}),(0,K.jsxs)(je.A,{value:"",onChange:e=>{const i=T.find((i=>i.id===e.target.value));i&&(e=>{if(!e||!e.configuration)return;const{configuration:i}=e;G(i.dimension),O(i.timeGrouping),V(i.visualizationType),Fe(i.metrics),ve(i.filters.dateRange),fe(i.filters.whitelabels),Se(i.filters.countries),ke(i.filters.playerTiers),Ie(i.filters.gameTypes),ye(i.aggregation),se(i.sortBy),oe(i.sortDirection),ce(i.limit),_e()})(i)},label:"Load Configuration",children:[(0,K.jsx)(I.A,{value:"",disabled:!0,children:(0,K.jsx)("em",{children:"Select saved report"})}),T.map((e=>(0,K.jsx)(I.A,{value:e.id,children:e.name},e.id)))]})]}),(0,K.jsxs)(ee.A,{size:"small",sx:{minWidth:130},children:[(0,K.jsx)(Ae.A,{children:"Report Mode"}),(0,K.jsx)(je.A,{value:Be,onChange:e=>Ne(e.target.value),label:"Report Mode",children:[{value:"standard",label:"Standard",description:"Easy to use interface with common options"},{value:"advanced",label:"Advanced",description:"More options and customization capabilities"},{value:"expert",label:"Expert",description:"Full control over all report parameters"}].map((e=>(0,K.jsx)(I.A,{value:e.value,children:e.label},e.value)))})]}),(0,K.jsx)(o.A,{variant:Y?"contained":"outlined",color:"primary",onClick:()=>H(!Y),children:Y?"Hide Query":"Show Query"})]})]}),(0,K.jsx)(g.A,{sx:{my:2}}),(0,K.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{children:"Group By"}),(0,K.jsx)(je.A,{value:M,onChange:e=>{G(e.target.value)},label:"Group By",startAdornment:(0,K.jsx)(C.A,{position:"start",children:(null===(i=Qe.find((e=>e.value===M)))||void 0===i?void 0:i.icon)||(0,K.jsx)(fi.A,{fontSize:"small"})}),children:Qe.map((e=>(0,K.jsx)(I.A,{value:e.value,children:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[e.icon,(0,K.jsx)(s.A,{sx:{ml:1},children:e.label})]})},e.value)))})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{children:"Time Grouping"}),(0,K.jsx)(je.A,{value:Q,onChange:e=>{O(e.target.value)},label:"Time Grouping",startAdornment:(0,K.jsx)(C.A,{position:"start",children:(null===(l=Oe.find((e=>e.value===Q)))||void 0===l?void 0:l.icon)||(0,K.jsx)(we.A,{fontSize:"small"})}),children:Oe.map((e=>(0,K.jsx)(I.A,{value:e.value,children:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[e.icon,(0,K.jsx)(s.A,{sx:{ml:1},children:e.label})]})},e.value)))})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{children:"Visualization"}),(0,K.jsx)(je.A,{value:L,onChange:e=>{V(e.target.value)},label:"Visualization",startAdornment:(0,K.jsx)(C.A,{position:"start",children:(null===(n=Ye.find((e=>e.value===L)))||void 0===n?void 0:n.icon)||(0,K.jsx)(Le.A,{fontSize:"small"})}),children:Ye.map((e=>(0,K.jsx)(I.A,{value:e.value,children:(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[e.icon,(0,K.jsx)(s.A,{sx:{ml:1},children:e.label})]})},e.value)))})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,K.jsx)(he.$,{dateAdapter:me.h,children:(0,K.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,K.jsx)(ue.l,{label:"From",value:pe[0],onChange:e=>{ve([e,pe[1]])},slotProps:{textField:{size:"small",fullWidth:!0}}}),(0,K.jsx)(ue.l,{label:"To",value:pe[1],onChange:e=>{ve([pe[0],e])},slotProps:{textField:{size:"small",fullWidth:!0}}})]})})})]}),(0,K.jsxs)(a.A,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[(0,K.jsx)(o.A,{startIcon:(0,K.jsx)($.A,{}),onClick:()=>X(!Z),sx:{borderBottom:Z?"2px solid":"none",borderRadius:0,pb:.5},color:"primary",children:Z?"Hide Advanced Filters":"Show Advanced Filters"}),(0,K.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,K.jsx)(o.A,{variant:"outlined",startIcon:(0,K.jsx)(Xe.A,{}),onClick:_e,disabled:v,children:"Refresh Data"}),(0,K.jsx)(o.A,{variant:ie?"contained":"outlined",startIcon:(0,K.jsx)(Pi.A,{}),onClick:()=>{le(!ie),ie||ne({dateRange:pe,whitelabels:be,countries:Ce,playerTiers:ze,gameTypes:Re})},disabled:v,color:ie?"primary":"inherit",children:ie?"Comparison Mode":"Enable Comparison"})]})]}),(0,K.jsx)(ii.A,{in:Z,children:(0,K.jsx)(a.A,{sx:{mt:3,p:2,bgcolor:"background.paper",borderRadius:1},children:(0,K.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{children:"Metrics"}),(0,K.jsxs)(je.A,{multiple:!0,value:Pe,onChange:e=>{const{target:{value:i}}=e;Fe("string"===typeof i?i.split(","):i)},input:(0,K.jsx)(vi.A,{label:"Metrics"}),renderValue:e=>(0,K.jsx)(a.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var i;return(0,K.jsx)(k.A,{label:(null===(i=He.find((i=>i.value===e)))||void 0===i?void 0:i.label)||e,size:"small"},e)}))}),MenuProps:{PaperProps:{style:{maxHeight:300}}},children:[(0,K.jsx)(gi.A,{children:"Financial"}),He.filter((e=>"Financial"===e.category)).map((e=>(0,K.jsxs)(I.A,{value:e.value,children:[(0,K.jsx)(yi.A,{checked:Pe.indexOf(e.value)>-1}),(0,K.jsx)(A.A,{primary:e.label})]},e.value))),(0,K.jsx)(gi.A,{children:"Activity"}),He.filter((e=>"Activity"===e.category)).map((e=>(0,K.jsxs)(I.A,{value:e.value,children:[(0,K.jsx)(yi.A,{checked:Pe.indexOf(e.value)>-1}),(0,K.jsx)(A.A,{primary:e.label})]},e.value))),(0,K.jsx)(gi.A,{children:"User"}),He.filter((e=>"User"===e.category)).map((e=>(0,K.jsxs)(I.A,{value:e.value,children:[(0,K.jsx)(yi.A,{checked:Pe.indexOf(e.value)>-1}),(0,K.jsx)(A.A,{primary:e.label})]},e.value))),(0,K.jsx)(gi.A,{children:"Performance"}),He.filter((e=>"Performance"===e.category)).map((e=>(0,K.jsxs)(I.A,{value:e.value,children:[(0,K.jsx)(yi.A,{checked:Pe.indexOf(e.value)>-1}),(0,K.jsx)(A.A,{primary:e.label})]},e.value)))]})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,K.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{children:"Aggregation"}),(0,K.jsx)(je.A,{value:ge,onChange:e=>ye(e.target.value),label:"Aggregation",children:[{value:"sum",label:"Sum"},{value:"avg",label:"Average"},{value:"min",label:"Minimum"},{value:"max",label:"Maximum"},{value:"count",label:"Count"},{value:"countDistinct",label:"Count Distinct"}].map((e=>(0,K.jsx)(I.A,{value:e.value,children:e.label},e.value)))})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{children:"Sort By"}),(0,K.jsx)(je.A,{value:ae,onChange:e=>se(e.target.value),label:"Sort By",children:Pe.map((e=>{var i;return(0,K.jsx)(I.A,{value:e,children:(null===(i=He.find((i=>i.value===e)))||void 0===i?void 0:i.label)||e},e)}))})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{children:"Direction"}),(0,K.jsxs)(je.A,{value:re,onChange:e=>oe(e.target.value),label:"Direction",children:[(0,K.jsx)(I.A,{value:"asc",children:"Ascending"}),(0,K.jsx)(I.A,{value:"desc",children:"Descending"})]})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,children:(0,K.jsx)(f.A,{fullWidth:!0,label:"Row Limit",type:"number",size:"small",value:de,onChange:e=>ce(parseInt(e.target.value)||20),InputProps:{inputProps:{min:1,max:1e3}}})})]})})]})})}),ie&&(0,K.jsxs)(a.A,{sx:{mt:3,p:2,bgcolor:"background.paper",borderRadius:1,border:"1px dashed",borderColor:"primary.main"},children:[(0,K.jsxs)(s.A,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(Pi.A,{sx:{mr:1}}),"Comparison Settings"]}),(0,K.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,K.jsx)(he.$,{dateAdapter:me.h,children:(0,K.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,K.jsx)(ue.l,{label:"Compare From",value:te.dateRange?te.dateRange[0]:null,onChange:e=>{ne({...te,dateRange:[e,te.dateRange?te.dateRange[1]:null]})},slotProps:{textField:{size:"small",fullWidth:!0}}}),(0,K.jsx)(ue.l,{label:"Compare To",value:te.dateRange?te.dateRange[1]:null,onChange:e=>{ne({...te,dateRange:[te.dateRange?te.dateRange[0]:null,e]})},slotProps:{textField:{size:"small",fullWidth:!0}}})]})})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,K.jsxs)(ee.A,{fullWidth:!0,size:"small",children:[(0,K.jsx)(Ae.A,{children:"Quick Compare"}),(0,K.jsxs)(je.A,{value:"",onChange:e=>{const i=new Date,l=pe[0]||i,t=pe[1]||i,n=t.getTime()-l.getTime();let a,s;switch(e.target.value){case"previous_period":a=new Date(l.getTime()-n),s=new Date(t.getTime()-n);break;case"previous_year":a=new Date(l),a.setFullYear(a.getFullYear()-1),s=new Date(t),s.setFullYear(s.getFullYear()-1);break;case"ytd":a=new Date(i.getFullYear()-1,0,1),s=new Date(i.getFullYear()-1,i.getMonth(),i.getDate());break;default:return}ne({...te,dateRange:[a,s]})},label:"Quick Compare",children:[(0,K.jsx)(I.A,{value:"",disabled:!0,children:(0,K.jsx)("em",{children:"Select comparison period"})}),(0,K.jsx)(I.A,{value:"previous_period",children:"Previous Period"}),(0,K.jsx)(I.A,{value:"previous_year",children:"Previous Year"}),(0,K.jsx)(I.A,{value:"ytd",children:"Year-to-Date"})]})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,md:4,sx:{display:"flex",alignItems:"center"},children:(0,K.jsx)(o.A,{variant:"contained",color:"primary",onClick:()=>{const e={dimension:M,timeGrouping:Q,metrics:Pe,aggregation:ge,sortBy:ae,sortDirection:re,limit:de,primary:{dateRange:pe,whitelabels:be,countries:Ce,playerTiers:ze,gameTypes:Re},comparison:te};S&&S(e),z&&z(e)},fullWidth:!0,disabled:!te.dateRange||!te.dateRange[0]||!te.dateRange[1],children:"Apply Comparison"})})]})]}),We.length>0&&(0,K.jsxs)(a.A,{sx:{mt:2,display:"flex",alignItems:"center",flexWrap:"wrap",gap:1},children:[(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"Drill Path:"}),We.map(((e,i)=>{var l;return(0,K.jsxs)(t.Fragment,{children:[(0,K.jsx)(k.A,{label:`${(null===(l=Qe.find((i=>i.value===e.dimension)))||void 0===l?void 0:l.label)||e.dimension}`,size:"small",onClick:()=>(e=>{if(e>=0&&e<We.length){const i=We[e],l=We.slice(0,e);Te(l),G(i.dimension),O(i.timeGrouping),ve(i.filters.dateRange),fe(i.filters.whitelabels),Se(i.filters.countries),ke(i.filters.playerTiers),Ie(i.filters.gameTypes),_e()}})(i),clickable:!0}),i<We.length-1&&(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mx:.5},children:">"})]},i)})),(0,K.jsx)(k.A,{label:(null===(d=Qe.find((e=>e.value===M)))||void 0===d?void 0:d.label)||M,size:"small",color:"primary",variant:"outlined"})]})]}),(0,K.jsx)(a.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,K.jsxs)(x.A,{value:N,onChange:(e,i)=>{q(i)},variant:"scrollable",scrollButtons:"auto",children:[(0,K.jsx)(u.A,{label:"Overview",value:"overview",icon:(0,K.jsx)(Le.A,{}),iconPosition:"start"}),(0,K.jsx)(u.A,{label:"Trends",value:"trends",icon:(0,K.jsx)(zi.A,{}),iconPosition:"start"}),(0,K.jsx)(u.A,{label:"Players",value:"players",icon:(0,K.jsx)(fi.A,{}),iconPosition:"start"}),(0,K.jsx)(u.A,{label:"Geography",value:"geography",icon:(0,K.jsx)(xe.A,{}),iconPosition:"start"}),(0,K.jsx)(u.A,{label:"White Labels",value:"whitelabels",icon:(0,K.jsx)(Ci.A,{}),iconPosition:"start"}),(0,K.jsx)(u.A,{label:"Games",value:"games",icon:(0,K.jsx)(Ii.A,{}),iconPosition:"start"})]})}),(0,K.jsx)(ji,{title:`Daily Actions - ${(null===(h=Qe.find((e=>e.value===M)))||void 0===h?void 0:h.label)||"Report"}`,description:`Analysis of player metrics grouped by ${(null===(m=Qe.find((e=>e.value===M)))||void 0===m?void 0:m.label.toLowerCase())||"dimension"} with ${(null===(p=Oe.find((e=>e.value===Q)))||void 0===p?void 0:p.label.toLowerCase())||"time"} grouping.`,loading:v,error:y,sections:(()=>{var e,i,l;const t=[];return t.push({id:"data-visualization",title:`${(null===(e=Qe.find((e=>e.value===M)))||void 0===e?void 0:e.label)||"Data"} Analysis by ${(null===(i=Oe.find((e=>e.value===Q)))||void 0===i?void 0:i.label)||"Time"}`,description:`${(null===(l=Ye.find((e=>e.value===L)))||void 0===l?void 0:l.label)||"Visualization"} of selected metrics`,content:(0,K.jsx)(a.A,{p:2,children:v?(0,K.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,K.jsx)(w.A,{})}):(0,K.jsxs)(s.A,{variant:"body1",children:["Visualization of player daily actions data would be displayed here.",ie&&"Comparison view is enabled."]})})}),Ge&&t.push({id:"query-results",title:"Query Results",description:"Results from your natural language query",content:(0,K.jsx)(a.A,{p:2,children:(0,K.jsx)(s.A,{variant:"body1",children:"Query results would be displayed here."})})}),"overview"===N&&t.push({id:"summary-metrics",title:"Summary Metrics",description:"Key performance indicators and summary statistics",content:(0,K.jsx)(a.A,{p:2,children:(0,K.jsx)(c.Ay,{container:!0,spacing:3,children:Pe.slice(0,4).map((e=>{const i=He.find((i=>i.value===e));return(0,K.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,K.jsxs)(r.A,{sx:{p:2},children:[(0,K.jsx)(s.A,{variant:"subtitle2",color:"text.secondary",children:(null===i||void 0===i?void 0:i.label)||e}),(0,K.jsx)(s.A,{variant:"h4",sx:{mt:1},children:v?(0,K.jsx)(w.A,{size:24}):"deposits"===e?"$1,245,678":"bets"===e?"$3,456,789":"wins"===e?"$2,987,654":"netGaming"===e?"$469,135":"uniquePlayers"===e?"12,345":"87.5%"}),(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,K.jsx)(k.A,{size:"small",color:"success",label:"+8.2%",icon:(0,K.jsx)(Di.A,{}),sx:{height:20,"& .MuiChip-label":{px:1},"& .MuiChip-icon":{ml:.5}}}),(0,K.jsx)(s.A,{variant:"caption",color:"text.secondary",sx:{ml:1},children:"vs previous period"})]})]})},e)}))})})}),t.push({id:"trend-analysis",title:"Trend Analysis",description:"Trends and patterns over time",content:(0,K.jsx)(a.A,{p:2,children:(0,K.jsx)(s.A,{variant:"body1",children:"Time series analysis and trend visualization would be displayed here."})})}),t})(),data:b,onRefresh:_e,onExport:D,onSave:Je,onShare:P,showExport:!0}),"table"===L&&b&&(0,K.jsx)(Fi.A,{title:"Data Table",subheader:"Detailed tabular view of the data",sx:{mt:3},children:(0,K.jsx)(a.A,{p:2,children:(0,K.jsxs)(s.A,{variant:"body1",children:["Detailed data table would be displayed here.",ie&&" Comparison data would be shown side by side."]})})})]})},Ti={dataSource:{schema:[{id:"date",name:"Date",type:"date",filterable:!0,description:"Transaction date"},{id:"amount",name:"Amount",type:"number",filterable:!0,description:"Transaction amount"},{id:"status",name:"Status",type:"string",filterable:!0,description:"Transaction status"},{id:"customer",name:"Customer",type:"string",filterable:!0,description:"Customer name"},{id:"country",name:"Country",type:"string",filterable:!0,description:"Country"},{id:"isActive",name:"Is Active",type:"boolean",filterable:!0,description:"Active status"}]},filters:[{id:"filter_1",field:"date",operator:"between",value:{from:new Date("2023-01-01"),to:new Date("2023-12-31")},displayValue:"From 01/01/2023 to 12/31/2023"},{id:"filter_2",field:"amount",operator:"greaterThan",value:"1000",displayValue:"1000"}]},Bi={sections:[{id:"section-1",title:"Summary Metrics",description:"Key performance indicators",content:"This section would display summary metrics and KPIs."},{id:"section-2",title:"Data Visualization",description:"Charts and graphs",content:"This section would display charts and data visualizations."},{id:"section-3",title:"Detailed Data",description:"Tabular data display",content:"This section would display detailed tabular data."}],data:{summary:{totalRevenue:1245678,totalOrders:8765,averageOrderValue:142.12,conversionRate:3.45},byDimension:[{id:"dim-1",name:"Category A",value:45e4},{id:"dim-2",name:"Category B",value:325e3},{id:"dim-3",name:"Category C",value:275e3},{id:"dim-4",name:"Category D",value:195678}]}},Ni=["Show me total revenue by month for last quarter","What are the top 5 performing products?","Compare conversion rates between desktop and mobile","Show user growth trend over the past year","Which countries have the highest average order value?","Show me daily active users for the past week"],Ei={summary:{totalRegistrations:12345,totalFTD:5678,totalDeposits:98765,totalCashouts:76543,totalGGR:543210},dailyActions:[{id:"day-1",date:"2023-05-01",whiteLabelName:"Casino Royale",whiteLabelId:"casino-royale",registrations:45,ftd:22,deposits:156,paidCashouts:89,ggrCasino:3450,ggrSport:1250,ggrLive:980,totalGGR:5680},{id:"day-2",date:"2023-05-02",whiteLabelName:"Casino Royale",whiteLabelId:"casino-royale",registrations:38,ftd:19,deposits:142,paidCashouts:76,ggrCasino:3120,ggrSport:1180,ggrLive:850,totalGGR:5150},{id:"day-3",date:"2023-05-03",whiteLabelName:"Casino Royale",whiteLabelId:"casino-royale",registrations:52,ftd:26,deposits:178,paidCashouts:95,ggrCasino:3780,ggrSport:1320,ggrLive:1050,totalGGR:6150},{id:"day-4",date:"2023-05-01",whiteLabelName:"Lucky Spin",whiteLabelId:"lucky-spin",registrations:35,ftd:17,deposits:128,paidCashouts:65,ggrCasino:2850,ggrSport:980,ggrLive:720,totalGGR:4550}]},$i=()=>{var e;const[i,l]=(0,t.useState)("filters"),[f,C]=(0,t.useState)("reportFilterSelector"),w=Bi.sections.map((e=>({...e,content:(0,K.jsx)(a.A,{p:2,children:(0,K.jsx)(s.A,{variant:"body1",children:e.content})})}))),S=[{id:"filters",name:"Filters & Selectors",components:[{id:"reportFilterSelector",name:"Report Filter Selector",description:"Component for defining report filters",component:(0,K.jsx)(r.A,{sx:{p:3},children:(0,K.jsx)(Qe,{dataSource:Ti.dataSource,filters:Ti.filters,onChange:e=>console.log("Filters changed:",e)})})},{id:"reportColumnSelector",name:"Report Column Selector",description:"Component for selecting columns to display in a report",component:(0,K.jsx)(r.A,{sx:{p:3},children:(0,K.jsx)(Ee,{dataSource:{schema:[{id:"date",name:"Date",type:"date"},{id:"label",name:"Label",type:"string"},{id:"country",name:"Country",type:"string"},{id:"registrations",name:"Registrations",type:"number"},{id:"deposits",name:"Deposits",type:"number"},{id:"withdrawals",name:"Withdrawals",type:"number"}]},selectedColumns:[{id:"date",name:"Date",type:"date",width:"150px",visible:!0,aggregation:null},{id:"label",name:"Label",type:"string",width:"150px",visible:!0,aggregation:null},{id:"registrations",name:"Registrations",type:"number",width:"150px",visible:!0,aggregation:null},{id:"deposits",name:"Deposits",type:"number",width:"150px",visible:!0,aggregation:null},{id:"withdrawals",name:"Withdrawals",type:"number",width:"150px",visible:!1,aggregation:null}],onChange:e=>console.log("Columns changed:",e)})})},{id:"reportDataSourceSelector",name:"Report Data Source Selector",description:"Component for selecting the data source for a report",component:(0,K.jsx)(r.A,{sx:{p:3},children:(0,K.jsx)(Ge,{availableDataSources:[{id:"dailyActions",name:"Daily Actions",type:"database",description:"Daily player activity data"},{id:"transactions",name:"Transactions",type:"database",description:"Financial transaction data"},{id:"players",name:"Players",type:"database",description:"Player profile data"}],selected:{id:"dailyActions",name:"Daily Actions",type:"database",description:"Daily player activity data"},onChange:e=>console.log("Data source changed:",e)})})}]},{id:"reports",name:"Report Components",components:[{id:"reportViewer",name:"Report Viewer",description:"Component for displaying report data and sections",component:(0,K.jsx)(ji,{title:"Sample Report",description:"This is a sample report for demonstration purposes",sections:w,data:Bi.data,onRefresh:()=>console.log("Refresh report"),onExport:e=>console.log("Export report as",e),showExport:!0})},{id:"dailyActionsReport",name:"Daily Actions Report",description:"Comprehensive daily actions reporting component",component:(0,K.jsx)(Wi,{data:Ei,onFilterChange:e=>console.log("Filters changed:",e),onRefresh:e=>console.log("Refresh with filters:",e),onExport:e=>console.log("Export as",e)})},{id:"reportPreview",name:"Report Preview",description:"Component for previewing a report before generating it",component:(0,K.jsx)(r.A,{sx:{p:3},children:(0,K.jsx)(ei,{config:{name:"Daily Actions Report",description:"Summary of daily player actions",dataSource:{id:"dailyActions",name:"Daily Actions"},filters:[{column:"dateRange",operator:"equals",value:"Last 7 days"},{column:"labels",operator:"equals",value:"All"},{column:"groupBy",operator:"equals",value:"Day"}],columns:[{id:"date",name:"Date",type:"date",width:"150px",visible:!0,aggregation:null},{id:"label",name:"Label",type:"string",width:"150px",visible:!0,aggregation:null},{id:"registrations",name:"Registrations",type:"number",width:"150px",visible:!0,aggregation:null},{id:"deposits",name:"Deposits",type:"number",width:"150px",visible:!0,aggregation:null},{id:"withdrawals",name:"Withdrawals",type:"number",width:"150px",visible:!0,aggregation:null}],sortBy:null,groupBy:null},data:Ei.dailyActions,onRefresh:()=>console.log("Refresh report"),onConfigChange:()=>console.log("Edit report configuration")})})},{id:"reportTemplate",name:"Report Template",description:"Component for creating and editing report templates",component:(0,K.jsx)(r.A,{sx:{p:3},children:(0,K.jsx)(Pe,{template:{id:"1",name:"Daily Activity Summary",description:"Daily summary of player activities",dataSource:"dailyActions",filters:[{id:"dateRange",field:"dateRange",operator:"equals",value:"last7Days"},{id:"groupBy",field:"groupBy",operator:"equals",value:"day"}],sections:[],isPublic:!1,createdBy:"admin",createdAt:null,updatedAt:null},onSave:e=>console.log("Template saved:",e)})})}]},{id:"query",name:"Query Components",components:[{id:"naturalLanguageQuery",name:"Natural Language Query",description:"Component for querying data using natural language",component:(0,K.jsx)(ci,{onSearch:e=>console.log("Search query:",e),suggestions:Ni})}]},{id:"management",name:"Report Management",components:[{id:"reportList",name:"Report List",description:"Component for displaying a list of reports",component:(0,K.jsx)(r.A,{sx:{p:3},children:(0,K.jsx)(Z,{reports:[{id:"1",name:"Daily Activity Report",type:"daily",createdAt:"2023-01-01",updatedAt:"2023-05-01",createdBy:"admin"},{id:"2",name:"Monthly Revenue Report",type:"revenue",createdAt:"2023-02-01",updatedAt:"2023-05-01",createdBy:"admin"},{id:"3",name:"Player Retention Analysis",type:"player",createdAt:"2023-03-01",updatedAt:"2023-05-01",createdBy:"admin"}],onViewReport:e=>console.log("View report:",e.id),onEditReport:e=>console.log("Edit report:",e.id),onDeleteReport:e=>console.log("Delete report:",e.id),onDuplicateReport:e=>console.log("Duplicate report:",e.id)})})},{id:"reportScheduleDialog",name:"Report Schedule Dialog",description:"Dialog for scheduling reports",component:(0,K.jsx)(r.A,{sx:{p:3},children:(0,K.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,K.jsx)(s.A,{variant:"body1",children:"Click the button below to open the schedule dialog:"}),(0,K.jsx)(o.A,{variant:"contained",onClick:()=>console.log("Open schedule dialog"),children:"Schedule Report"}),(0,K.jsx)(ze,{open:!1,onClose:()=>console.log("Dialog closed"),onAddSchedule:e=>console.log("Schedule added:",e),report:{id:"1",title:"Daily Activity Report",description:"Daily summary of player activities",type:"daily",createdAt:"2023-01-01",updatedAt:"2023-05-01",createdBy:"admin"},schedules:[{id:"sched1",frequency:"daily",weekday:1,monthDay:1,time:new Date("2023-01-01T08:00:00"),exportFormat:"pdf",recipientIds:["user1","user2"],includeEmail:!0,includeNotification:!0,active:!0}]})]})})},{id:"reportShareDialog",name:"Report Share Dialog",description:"Dialog for sharing reports",component:(0,K.jsx)(r.A,{sx:{p:3},children:(0,K.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,K.jsx)(s.A,{variant:"body1",children:"Click the button below to open the share dialog:"}),(0,K.jsx)(o.A,{variant:"contained",onClick:()=>console.log("Open share dialog"),children:"Share Report"}),(0,K.jsx)(pe,{open:!1,onClose:()=>console.log("Dialog closed"),onAddUser:(e,i)=>console.log("Users added:",e,"with permission:",i),report:{id:"1",name:"Daily Activity Report",type:"daily",createdAt:"2023-01-01",updatedAt:"2023-05-01",createdBy:"admin"},availableUsers:[{id:"user1",name:"John Doe",email:"john@example.com"},{id:"user2",name:"Jane Smith",email:"jane@example.com"}]})]})})}]}],z=(()=>{const e=S.find((e=>e.id===i));if(!e)return null;return e.components.find((e=>e.id===f))})();return(0,K.jsxs)(d.A,{maxWidth:"xl",sx:{py:4},children:[(0,K.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,K.jsx)(o.A,{component:n.N_,to:"/showcase",startIcon:(0,K.jsx)(b.A,{}),sx:{mr:2},children:"Back to Showcase"}),(0,K.jsx)(s.A,{variant:"h4",children:"Report Components"})]}),(0,K.jsx)(s.A,{variant:"subtitle1",color:"text.secondary",paragraph:!0,children:"Components for building and displaying reports"}),(0,K.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,K.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,K.jsxs)(r.A,{sx:{p:0,height:"100%"},children:[(0,K.jsx)(x.A,{value:i,onChange:(e,i)=>{l(i);const t=S.find((e=>e.id===i));t&&t.components.length>0&&C(t.components[0].id)},variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:S.map((e=>(0,K.jsx)(u.A,{label:e.name,value:e.id},e.id)))}),(0,K.jsx)(h.A,{sx:{pt:0},children:null===(e=S.find((e=>e.id===i)))||void 0===e?void 0:e.components.map((e=>(0,K.jsx)(m.Ay,{disablePadding:!0,children:(0,K.jsx)(p.A,{selected:f===e.id,onClick:()=>C(e.id),children:(0,K.jsx)(A.A,{primary:e.name,secondary:e.description,primaryTypographyProps:{fontWeight:f===e.id?"bold":"normal"}})})},e.id)))})]})}),(0,K.jsx)(c.Ay,{item:!0,xs:12,md:9,children:z&&(0,K.jsxs)(a.A,{children:[(0,K.jsxs)(j.A,{sx:{mb:3},children:[(0,K.jsx)(v.A,{title:z.name,subheader:z.description}),(0,K.jsx)(g.A,{}),(0,K.jsx)(y.A,{children:(0,K.jsx)(s.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"This is a preview of the component with mock data. No API calls are being made."})})]}),z.component]})})]})]})}},59071:(e,i,l)=>{l.d(i,{A:()=>u});l(65043);var t=l(26240),n=l(83600),a=l(96446),s=l(85865),r=l(53193),o=l(69285),d=l(32143),c=l(33691),x=l(70579);const u=e=>{let{page:i=1,count:l=0,pageSize:u=10,pageSizeOptions:h=[5,10,25,50,100],onPageChange:m,onPageSizeChange:p,showPageSizeSelector:A=!0,showTotalCount:j=!0,labelPageSize:v="Items per page:",labelTotalItems:g="of",sx:y={}}=e;const b=(0,t.A)(),f=(0,n.A)(b.breakpoints.down("sm")),C=Math.ceil(l/u);return(0,x.jsxs)(a.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",gap:2,mt:2,...y},children:[A&&(0,x.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,x.jsx)(s.A,{variant:"body2",color:"text.secondary",children:v}),(0,x.jsx)(r.A,{size:"small",variant:"outlined",children:(0,x.jsx)(o.A,{value:u,onChange:e=>{const i=e.target.value;p&&p(i)},displayEmpty:!0,sx:{minWidth:80},children:h.map((e=>(0,x.jsx)(d.A,{value:e,children:e},e)))})})]}),(0,x.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[j&&(0,x.jsx)(s.A,{variant:"body2",color:"text.secondary",children:f?`${(i-1)*u+1}-${Math.min(i*u,l)} ${g} ${l}`:`Showing ${(i-1)*u+1}-${Math.min(i*u,l)} ${g} ${l} items`}),(0,x.jsx)(c.A,{page:i,count:C,onChange:(e,i)=>{m&&m(i)},color:"primary",shape:"rounded",size:f?"small":"medium",showFirstButton:!f,showLastButton:!f})]})]})}}}]);
//# sourceMappingURL=230.a47392f2.chunk.js.map
"use strict";(self.webpackChunkppreporter_client=self.webpackChunkppreporter_client||[]).push([[5344],{7526:(e,a,r)=>{r.d(a,{B_:()=>o,Co:()=>x,Es:()=>t,ZB:()=>p,e$:()=>h,k_:()=>d,pI:()=>c,tj:()=>l});const t={xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px"},n="8px",s="rgba(0, 0, 0, 0.12)",i="rgba(0, 0, 0, 0.08)",o={padding:t.lg,borderRadius:n,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},l={marginBottom:t.xs},d={marginBottom:t.lg},c={height:300,border:`1px dashed ${s}`,borderRadius:n,padding:t.lg},h={borderBottom:`1px solid ${s}`,marginBottom:t.lg},p={marginBottom:t.lg},x={backgroundColor:i,borderRadius:n,padding:t.lg,minHeight:100,display:"flex",alignItems:"center",justifyContent:"center"}},39591:(e,a,r)=>{r.d(a,{L:()=>o,S:()=>i});var t=r(34535),n=r(96446),s=r(7526);const i=(0,t.Ay)(n.A)({display:"flex",justifyContent:"space-between",alignItems:"center"}),o=(0,t.Ay)(n.A)({...s.pI,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})},45344:(e,a,r)=>{r.r(a),r.d(a,{default:()=>K});var t=r(65043),n=r(49367),s=r(19252),i=r(85865),o=r(11906),l=r(8939),d=r(24056),c=r(81637),h=r(48625),p=r(54971),x=r(47987),u=r(39591),m=r(34535),g=r(7526),y=r(70579);const b=(0,m.Ay)("div")({width:"100%"}),v=(0,m.Ay)("div")({paddingTop:g.Es.lg}),j=(0,m.Ay)("div")({display:"flex",justifyContent:"center",padding:g.Es.lg}),A=e=>{let{children:a,value:r,index:n,id:s,lazyLoad:i=!1,...o}=e;const l=r===n,[d,h]=(0,t.useState)(l);(0,t.useEffect)((()=>{l&&!d&&h(!0)}),[l,d]);const p=(0,t.useMemo)((()=>!i||d),[i,d]);return l?(0,y.jsx)(b,{role:"tabpanel",id:`tabpanel-${s}`,"aria-labelledby":`tab-${s}`,"aria-hidden":"false",...o,children:(0,y.jsx)(v,{children:p?(0,y.jsx)(t.Suspense,{fallback:(0,y.jsx)(j,{children:(0,y.jsx)(c.A,{size:40})}),children:a}):(0,y.jsx)(j,{children:(0,y.jsx)(c.A,{size:40})})})}):(0,y.jsx)(b,{role:"tabpanel",hidden:!0,id:`tabpanel-${s}`,"aria-labelledby":`tab-${s}`,"aria-hidden":"true",...o})},f=(0,t.memo)(A);var z=r(73281),C=r(83003),M=r(76682),T=r(32099);const D=e=>e.auth,k=((0,T.Mz)([D],(e=>e.isAuthenticated)),(0,T.Mz)([D],(e=>e.user)),(0,T.Mz)([D],(e=>e.loading)),(0,T.Mz)([D],(e=>e.error)),e=>e.dashboard),S=(0,T.Mz)([k],(e=>({summaryStats:e.summaryStats,casinoRevenue:e.casinoRevenue,playerRegistrations:e.playerRegistrations,topGames:e.topGames,recentTransactions:e.recentTransactions,heatmapData:e.heatmapData,playerJourneyData:e.playerJourneyData,segmentComparisonData:e.segmentComparisonData}))),R=(0,T.Mz)([k],(e=>e.isLoading)),w=(0,T.Mz)([k],(e=>e.error)),L=(0,T.Mz)([k],(e=>e.summaryStats)),B=(0,T.Mz)([k],(e=>e.casinoRevenue)),I=(0,T.Mz)([k],(e=>e.playerRegistrations)),E=(0,T.Mz)([k],(e=>e.topGames)),$=(0,T.Mz)([k],(e=>e.recentTransactions)),P=((0,T.Mz)([k],(e=>e.heatmapData)),(0,T.Mz)([k],(e=>e.playerJourneyData)),(0,T.Mz)([k],(e=>e.segmentComparisonData)),(0,T.Mz)([k],(e=>e.componentErrors))),G=((0,T.Mz)([L,R,P],((e,a,r)=>({data:e,loading:a,error:(null===r||void 0===r?void 0:r.summary)||null}))),(0,T.Mz)([B,R,P],((e,a,r)=>({data:e,loading:a,error:(null===r||void 0===r?void 0:r.revenue)||null}))),(0,T.Mz)([I,R,P],((e,a,r)=>({data:e,loading:a,error:(null===r||void 0===r?void 0:r.registrations)||null}))),(0,T.Mz)([E,R,P],((e,a,r)=>({data:e,loading:a,error:(null===r||void 0===r?void 0:r.topGames)||null}))),(0,T.Mz)([$,R,P],((e,a,r)=>({data:e,loading:a,error:(null===r||void 0===r?void 0:r.transactions)||null}))),e=>e.reports),_=((0,T.Mz)([G],(e=>({players:e.players.data,dailyActions:e.dailyActions.data}))),(0,T.Mz)([G],(e=>e.players.loading||e.dailyActions.loading)),(0,T.Mz)([G],(e=>e.players.error||e.dailyActions.error)),e=>e.ui),F=((0,T.Mz)([_],(e=>e.sidebarOpen)),(0,T.Mz)([_],(e=>e.darkMode)),(0,T.Mz)([_],(e=>e.activeTab))),J=((0,T.Mz)([S,R,w,F],((e,a,r,t)=>({dashboardData:e,isLoading:a,error:r,activeTab:t}))),[{id:"overview",label:"Overview",ariaControls:"tabpanel-overview"},{id:"performance",label:"Performance",ariaControls:"tabpanel-performance"},{id:"player-analysis",label:"Player Analysis",ariaControls:"tabpanel-player-analysis"},{id:"game-analysis",label:"Game Analysis",ariaControls:"tabpanel-game-analysis"}]),U={hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0},O=(0,t.lazy)((()=>Promise.all([r.e(2559),r.e(7784),r.e(1244),r.e(2177),r.e(8491),r.e(6790),r.e(7690),r.e(9708),r.e(6664),r.e(6645),r.e(8935),r.e(1573),r.e(9421),r.e(6472),r.e(1266)]).then(r.bind(r,6799)))),Z=(0,t.lazy)((()=>r.e(5530).then(r.bind(r,15530)))),H=(0,t.lazy)((()=>r.e(5507).then(r.bind(r,75507)))),W=(0,t.lazy)((()=>r.e(8724).then(r.bind(r,38724)))),q=()=>{const{summaryStats:e,recentTransactions:a,isLoading:r,error:m,formattedLastUpdated:b,refreshData:v}=(()=>{const e=(0,C.wA)(),a=(0,C.d4)(L),r=(0,C.d4)($),n=(0,C.d4)(R),s=(0,C.d4)(w),[i,o]=(0,t.useState)(new Date),l=(0,t.useCallback)((()=>{e((0,M.JD)()),e((0,M.ro)()),e((0,M.Tz)()),e((0,M.pg)()),o(new Date)}),[e]);(0,t.useEffect)((()=>{l()}),[l]);const d=i.toLocaleTimeString(void 0,U);return{summaryStats:a,recentTransactions:r,isLoading:n,error:s,lastUpdated:i,formattedLastUpdated:d,loadDashboardData:l,refreshData:l}})(),{activeTab:j,handleTabChange:A}=(e=>{const{initialTab:a=0,onTabChange:r,tabs:n}=e,[s,i]=(0,t.useState)(a),o=(0,t.useCallback)(((e,a)=>{i(a),r&&r(a)}),[r]),l=n[s],d=(0,t.useCallback)((e=>{e>=0&&e<n.length&&(i(e),r&&r(e))}),[n,r]),c=(0,t.useCallback)((e=>{const a=n.findIndex((a=>a.id===e));-1!==a&&d(a)}),[n,d]);return{activeTab:s,currentTab:l,handleTabChange:o,navigateToTab:d,navigateToTabById:c,tabs:n}})({tabs:J,initialTab:0}),T=(0,t.useCallback)((()=>{v()}),[v]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(n.mg,{children:[(0,y.jsx)("title",{children:"Analytics Dashboard | PPrePorter"}),(0,y.jsx)("meta",{name:"description",content:"Analytics dashboard with comprehensive data visualizations and insights"})]}),(0,y.jsxs)(s.A,{maxWidth:"xl",children:[(0,y.jsx)("header",{style:g.k_,children:(0,y.jsxs)(u.S,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(i.A,{variant:"h4",component:"h1",style:{marginBottom:"4px"},children:"Analytics Dashboard"}),(0,y.jsxs)(i.A,{variant:"body2",color:"text.secondary",children:["Last updated: ",b]})]}),(0,y.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,y.jsx)(h.A,{}),onClick:T,"aria-label":"Refresh dashboard data",children:"Refresh Data"})]})}),m&&(0,y.jsx)("div",{style:g.ZB,children:(0,y.jsx)(p.A,{error:m,title:"Failed to load dashboard data",onRetry:T})}),r&&(0,y.jsx)(x.A,{}),(0,y.jsx)("div",{style:g.e$,children:(0,y.jsx)(l.A,{value:j,onChange:A,"aria-label":"analytics dashboard tabs",variant:"scrollable",scrollButtons:"auto",children:J.map((e=>(0,y.jsx)(d.A,{label:e.label,id:`tab-${e.id}`,"aria-controls":e.ariaControls},e.id)))})}),(0,y.jsx)("main",{children:(0,y.jsx)(z.A,{onReset:T,children:(0,y.jsx)(t.Suspense,{fallback:(0,y.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"32px"},children:(0,y.jsx)(c.A,{size:40})}),children:(0,t.useMemo)((()=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f,{value:j,index:0,id:J[0].id,lazyLoad:!0,children:(0,y.jsx)(O,{summaryStats:e,recentTransactions:a,isLoading:r,error:m})}),(0,y.jsx)(f,{value:j,index:1,id:J[1].id,lazyLoad:!0,children:(0,y.jsx)(Z,{})}),(0,y.jsx)(f,{value:j,index:2,id:J[2].id,lazyLoad:!0,children:(0,y.jsx)(H,{})}),(0,y.jsx)(f,{value:j,index:3,id:J[3].id,lazyLoad:!0,children:(0,y.jsx)(W,{})})]})),[j,e,a,r,m])})})})]})]})},K=(0,t.memo)(q)},47987:(e,a,r)=>{r.d(a,{A:()=>o});r(65043);var t=r(96446),n=r(81637),s=r(85865),i=r(70579);const o=e=>{let{loading:a=!0,message:r="Loading...",sx:o={},size:l=40,color:d="primary",backgroundColor:c="rgba(255, 255, 255, 0.7)",zIndex:h=1e3}=e;return a?(0,i.jsxs)(t.A,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:c,zIndex:h,...o},children:[(0,i.jsx)(n.A,{size:l,color:d}),r&&(0,i.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mt:2},children:r})]}):null}},54971:(e,a,r)=>{r.d(a,{A:()=>d});r(65043);var t=r(63336),n=r(85865),s=r(11906),i=r(37948),o=r(48625),l=r(70579);const d=e=>{var a;let{error:r,title:d="Something went wrong",onRetry:c=null,sx:h,showRetry:p=!0,retryText:x="Try Again"}=e,u="An unexpected error occurred. Please try again later.";if("string"===typeof r)u=r;else if(null!==r&&void 0!==r&&r.message)u=r.message;else if(null!==r&&void 0!==r&&r.statusText)u=r.statusText||"";else if(null!==r&&void 0!==r&&null!==(a=r.data)&&void 0!==a&&a.message){var m;u=(null===(m=r.data)||void 0===m?void 0:m.message)||""}return(0,l.jsxs)(t.A,{elevation:2,sx:{p:3,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",border:"1px solid #e0e0e0",borderRadius:2,backgroundColor:"#fff9f9",width:"100%",...h},children:[(0,l.jsx)(i.A,{color:"error",sx:{fontSize:48,mb:2}}),(0,l.jsx)(n.A,{variant:"h6",gutterBottom:!0,color:"error",children:d}),(0,l.jsx)(n.A,{variant:"body2",color:"textSecondary",sx:{mb:3},children:u}),p&&c&&(0,l.jsx)(s.A,{variant:"outlined",color:"primary",startIcon:(0,l.jsx)(o.A,{}),onClick:c,children:x})]})}},73281:(e,a,r)=>{r.d(a,{A:()=>u});var t=r(65043),n=r(34535),s=r(63336),i=r(85865),o=r(11906),l=r(37948),d=r(48625),c=r(70579);const h=(0,n.Ay)(s.A)((e=>{let{theme:a}=e;return{padding:"24px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",borderRadius:"8px",margin:"16px 0"}})),p=(0,n.Ay)(l.A)((e=>{let{theme:a}=e;return{fontSize:48,color:a.palette.error.main,marginBottom:"16px"}}));class x extends t.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null}),this.props.onReset&&this.props.onReset()},this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){console.error("Error caught by ErrorBoundary:",e,a)}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:(0,c.jsxs)(h,{children:[(0,c.jsx)(p,{}),(0,c.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Something went wrong"}),(0,c.jsx)(i.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,c.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,c.jsx)(d.A,{}),onClick:this.handleReset,children:"Try Again"})]}):this.props.children}}const u=x}}]);
//# sourceMappingURL=5344.92ee59dd.chunk.js.map
"use strict";(self.webpackChunkppreporter_client=self.webpackChunkppreporter_client||[]).push([[1364],{34466:(e,t,l)=>{l.d(t,{ap:()=>$,n1:()=>D,rJ:()=>I,rm:()=>z,tM:()=>L});l(65043);var r=l(96446),n=l(85865),a=l(26240),i=l(81637),s=l(50108),o=l(42458),c=l(87734),d=l(52185),h=l(6026),x=l(15847),u=l(86150),m=l(21327),g=l(77943),p=l(17869),j=l(64960),y=l(65514),f=l(49866),A=l(53721),v=l(35258),b=l(30004),C=l(87890),w=l(4240),k=l(70579);const F=["#0088FE","#00C49F","#FFBB28","#FF8042","#A569BD","#5DADE2","#48C9B0","#F4D03F"],S=e=>{let{active:t,payload:l,label:a}=e;return t&&l&&l.length?(0,k.jsxs)(r.A,{sx:{backgroundColor:"background.paper",p:1.5,border:"1px solid",borderColor:"divider",borderRadius:1,boxShadow:1},children:[(0,k.jsx)(n.A,{variant:"subtitle2",sx:{mb:1},children:a}),l.map(((e,t)=>{return(0,k.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",mb:.5},children:[(0,k.jsx)(r.A,{sx:{width:12,height:12,backgroundColor:e.color,mr:1,borderRadius:"50%"}}),(0,k.jsxs)(n.A,{variant:"body2",color:"text.secondary",children:[e.name,": ",e.value>=1e3?(a=e.value,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(a)):(l=e.value,new Intl.NumberFormat("en-US").format(l))]})]},`item-${t}`);var l,a}))]}):null},D=e=>{let{data:t,xKey:l,yKey:j,zKey:y,nameKey:f,height:A=300,loading:v=!1,error:b=null,title:C,showLegend:w=!0,showGrid:D=!0}=e;const z=(0,a.A)();return v?(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:A},children:(0,k.jsx)(i.A,{})}):b?(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:A},children:(0,k.jsx)(n.A,{color:"error",children:b})}):t&&0!==t.length?(0,k.jsxs)(r.A,{sx:{width:"100%",height:A},children:[C&&(0,k.jsx)(n.A,{variant:"subtitle1",gutterBottom:!0,children:C}),(0,k.jsx)(s.u,{children:(0,k.jsxs)(o.t,{margin:{top:10,right:30,left:0,bottom:0},children:[D&&(0,k.jsx)(c.d,{strokeDasharray:"3 3"}),(0,k.jsx)(d.W,{dataKey:l,name:l.charAt(0).toUpperCase()+l.slice(1).replace(/([A-Z])/g," $1"),tick:{fill:z.palette.text.secondary,fontSize:12},type:"number"}),(0,k.jsx)(h.h,{dataKey:j,name:j.charAt(0).toUpperCase()+j.slice(1).replace(/([A-Z])/g," $1"),tick:{fill:z.palette.text.secondary,fontSize:12},type:"number"}),y&&(0,k.jsx)(x.K,{dataKey:y,range:[50,500],name:y.charAt(0).toUpperCase()+y.slice(1).replace(/([A-Z])/g," $1")}),(0,k.jsx)(u.m,{cursor:{strokeDasharray:"3 3"},content:(0,k.jsx)(S,{})}),w&&(0,k.jsx)(m.s,{}),(0,k.jsx)(g.X,{name:f||"Data",data:t,fill:F[0],children:t.map(((e,t)=>(0,k.jsx)(p.f,{fill:F[t%F.length]},`cell-${t}`)))})]})})]}):(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:A},children:(0,k.jsx)(n.A,{color:"text.secondary",children:"No data available"})})},z=e=>{let{data:t,dataKey:l,nameKey:o,height:c=300,loading:d=!1,error:h=null,title:x,showLegend:g=!0}=e;const p=(0,a.A)();return d?(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:c},children:(0,k.jsx)(i.A,{})}):h?(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:c},children:(0,k.jsx)(n.A,{color:"error",children:h})}):t&&0!==t.length?(0,k.jsxs)(r.A,{sx:{width:"100%",height:c},children:[x&&(0,k.jsx)(n.A,{variant:"subtitle1",gutterBottom:!0,children:x}),(0,k.jsx)(s.u,{children:(0,k.jsxs)(j.V,{cx:"50%",cy:"50%",outerRadius:"80%",data:t,children:[(0,k.jsx)(y.z,{}),(0,k.jsx)(f.r,{dataKey:o,tick:{fill:p.palette.text.secondary,fontSize:12}}),(0,k.jsx)(A.E,{}),(0,k.jsx)(v.V,{name:l.charAt(0).toUpperCase()+l.slice(1).replace(/([A-Z])/g," $1"),dataKey:l,stroke:F[0],fill:F[0],fillOpacity:.6}),g&&(0,k.jsx)(m.s,{}),(0,k.jsx)(u.m,{})]})})]}):(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:c},children:(0,k.jsx)(n.A,{color:"text.secondary",children:"No data available"})})},I=e=>{let{data:t,dataKey:l,nameKey:a,height:o=300,loading:c=!1,error:d=null,title:h}=e;return c?(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:o},children:(0,k.jsx)(i.A,{})}):d?(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:o},children:(0,k.jsx)(n.A,{color:"error",children:d})}):t&&0!==t.length?(0,k.jsxs)(r.A,{sx:{width:"100%",height:o},children:[h&&(0,k.jsx)(n.A,{variant:"subtitle1",gutterBottom:!0,children:h}),(0,k.jsx)(s.u,{children:(0,k.jsx)(b.V,{data:t,dataKey:l,nameKey:a,aspectRatio:4/3,stroke:"#fff",fill:F[0],children:t.map(((e,t)=>(0,k.jsx)(p.f,{fill:F[t%F.length]},`cell-${t}`)))})})]}):(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:o},children:(0,k.jsx)(n.A,{color:"text.secondary",children:"No data available"})})},$=e=>{let{data:t,dataKey:l,nameKey:o,height:c=300,loading:d=!1,error:h=null,title:x,startAngle:g=180,endAngle:j=0}=e;(0,a.A)();return d?(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:c},children:(0,k.jsx)(i.A,{})}):h?(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:c},children:(0,k.jsx)(n.A,{color:"error",children:h})}):t&&0!==t.length?(0,k.jsxs)(r.A,{sx:{width:"100%",height:c},children:[x&&(0,k.jsx)(n.A,{variant:"subtitle1",gutterBottom:!0,children:x}),(0,k.jsx)(s.u,{children:(0,k.jsxs)(C.r,{children:[(0,k.jsx)(w.F,{data:t,cx:"50%",cy:"50%",innerRadius:"60%",outerRadius:"80%",startAngle:g,endAngle:j,dataKey:l,nameKey:o,label:!0,children:t.map(((e,t)=>(0,k.jsx)(p.f,{fill:F[t%F.length]},`cell-${t}`)))}),(0,k.jsx)(m.s,{iconSize:10,layout:"vertical",verticalAlign:"middle",align:"right"}),(0,k.jsx)(u.m,{})]})})]}):(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:c},children:(0,k.jsx)(n.A,{color:"text.secondary",children:"No data available"})})},L=e=>{let{data:t,xKey:l,yKey:s,valueKey:o,height:c=300,loading:d=!1,error:h=null,title:x}=e;const u=(0,a.A)();if(d)return(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:c},children:(0,k.jsx)(i.A,{})});if(h)return(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:c},children:(0,k.jsx)(n.A,{color:"error",children:h})});if(!t||0===t.length)return(0,k.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:c},children:(0,k.jsx)(n.A,{color:"text.secondary",children:"No data available"})});const m=Array.from(new Set(t.map((e=>e[l])))).sort(),g=Array.from(new Set(t.map((e=>e[s])))).sort(),p=Math.min((c-100)/g.length,2*c/m.length),j=t.map((e=>e[o])),y=Math.min(...j),f=Math.max(...j),A=e=>`hsl(${240*(1-(e-y)/(f-y))}, 100%, 50%)`;return(0,k.jsxs)(r.A,{sx:{width:"100%",height:c},children:[x&&(0,k.jsx)(n.A,{variant:"subtitle1",gutterBottom:!0,children:x}),(0,k.jsx)(r.A,{sx:{overflowX:"auto",overflowY:"auto",height:c-40},children:(0,k.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",minWidth:m.length*p},children:[(0,k.jsx)(r.A,{sx:{display:"flex",ml:8},children:m.map((e=>(0,k.jsx)(r.A,{sx:{width:p,height:40,display:"flex",alignItems:"center",justifyContent:"center",transform:"rotate(-45deg)",transformOrigin:"bottom left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.75rem",color:u.palette.text.secondary},children:e},`x-${e}`)))}),(0,k.jsxs)(r.A,{sx:{display:"flex"},children:[(0,k.jsx)(r.A,{sx:{width:60},children:g.map((e=>(0,k.jsx)(r.A,{sx:{height:p,display:"flex",alignItems:"center",justifyContent:"flex-end",pr:1,fontSize:"0.75rem",color:u.palette.text.secondary},children:e},`y-${e}`)))}),(0,k.jsx)(r.A,{children:g.map((e=>(0,k.jsx)(r.A,{sx:{display:"flex"},children:m.map((a=>{const i=t.find((t=>t[l]===a&&t[s]===e)),c=i?i[o]:0;return(0,k.jsx)(r.A,{sx:{width:p,height:p,backgroundColor:A(c),border:"1px solid",borderColor:u.palette.background.paper,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer","&:hover":{opacity:.8,boxShadow:1}},title:`${a}, ${e}: ${c}`,children:(0,k.jsx)(n.A,{variant:"caption",sx:{color:c>(f-y)/2+y?"white":"black",fontWeight:"bold",fontSize:"0.6rem"},children:c})},`cell-${a}-${e}`)}))},`row-${e}`)))})]})]})})]})}},34469:(e,t,l)=>{l.d(t,{A:()=>le});var r=l(65043),n=l(34535),a=l(26240),i=l(63336),s=l(85865),o=l(77739),c=l(17392),d=l(45424),h=l(32143),x=l(2050),u=l(48734),m=l(39336),g=l(43845),p=l(47030),j=l(5393),y=l(98082),f=l(40835),A=l(37965),v=l(41132),b=l(66461),C=l(81637),w=l(28242),k=l(35624),F=l(69525),S=l(677),D=l(50108),z=l(877),I=l(87734),$=l(52185),L=l(6026),K=l(86150),M=l(21327),B=l(13839),N=l(82291),R=l(38643),E=l(75748),U=l(90168),T=l(87890),P=l(4240),Z=l(17869),O=l(69771),W=l(89676),G=l(47339),V=l(70579);const H=e=>{let{id:t,title:l,description:n,type:d,data:h,xKey:x,yKeys:u=[],nameKey:m="name",valueKey:y="value",height:f=300,loading:A=!1,error:v=null,colors:b=["#0088FE","#00C49F","#FFBB28","#FF8042","#A569BD","#5DADE2","#48C9B0","#F4D03F"],showLegend:H=!0,showGrid:X=!0,enableDrilldown:Q=!0,enableTooltip:Y=!0,enableCrossFiltering:q=!0,tooltipFormatter:_,onClick:J,getTooltipData:ee,getDrilldownData:te}=e;const le=(0,a.A)(),{filters:re,addFilter:ne,removeFilter:ae,getFiltersForSource:ie,applyFilters:se}=(0,G.bZ)(),[oe,ce]=(0,r.useState)(null),[de,he]=(0,r.useState)(!1),[xe,ue]=(0,r.useState)(null),me=(0,r.useMemo)((()=>ie(t)),[ie,t]),ge=(0,r.useMemo)((()=>se(h,t)),[se,h,t]),pe=(0,r.useMemo)((()=>{const e=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2});return t=>e.format(t)}),[]),je=(0,r.useMemo)((()=>{const e=new Intl.NumberFormat("en-US");return t=>e.format(t)}),[]),ye=((0,r.useCallback)((e=>{try{if(void 0===e||null===e)return"";const t=String(e);if("string"===typeof t&&t.includes("T")){const e=new Date(t);return isNaN(e.getTime())?t:(0,F.A)(e,"MMM dd")}return t}catch(v){return console.warn("Error formatting date:",v),String(e||"")}}),[]),(0,r.useCallback)(((e,r)=>{if(J)J(e,r);else if(Q){let t;if(te)t=te(e,r);else{let r="",a="",i=0,s=[];"pie"===d?(r=`${l} - ${e[m]}`,a=e[m],i=e[y],s=ge.filter((t=>"string"===typeof t[m]&&"string"===typeof e[m]?t[m].toLowerCase()===e[m].toLowerCase():t[m]===e[m]))):(r=`${l} - ${e[x]}`,a=e[x],i=u.length>0?e[u[0]]:e[y],s=ge.filter((t=>"string"===typeof t[x]&&"string"===typeof e[x]?t[x].toLowerCase()===e[x].toLowerCase():t[x]===e[x]))),t={title:r,description:n,category:a,value:i,data:s}}ue(t),he(!0)}else if(q){let l="",r=null,n="";"pie"===d?(l=`${t}-${m}-${e[m]}`,r=e[m],n=m):(l=`${t}-${x}-${e[x]}`,r=e[x],n=x);if(me.find((e=>e.id===l)))ae(l);else{ne({id:l,type:"category",field:n,value:r,operator:"equals",source:t})}}}),[J,Q,te,d,l,n,m,y,x,u,ge,q,t,me,ae,ne])),fe=(0,r.useCallback)(((e,t)=>{ce(t)}),[]),Ae=(0,r.useCallback)((()=>{ce(null)}),[]),ve=e=>{const{cx:t,cy:l,innerRadius:r,outerRadius:n,startAngle:a,endAngle:i,fill:s,payload:o,percent:c,value:d}=e;return(0,V.jsxs)("g",{children:[(0,V.jsx)("text",{x:t,y:l,dy:-20,textAnchor:"middle",fill:le.palette.text.primary,children:o[m]}),(0,V.jsx)("text",{x:t,y:l,dy:0,textAnchor:"middle",fill:le.palette.text.primary,children:d>=1e3?pe(d):je(d)}),(0,V.jsx)("text",{x:t,y:l,dy:20,textAnchor:"middle",fill:le.palette.text.secondary,children:`(${(100*c).toFixed(2)}%)`}),(0,V.jsx)(S.h,{cx:t,cy:l,innerRadius:r,outerRadius:n+10,startAngle:a,endAngle:i,fill:s}),(0,V.jsx)(S.h,{cx:t,cy:l,startAngle:a,endAngle:i,innerRadius:n+6,outerRadius:n+10,fill:s})]})},be=e=>{let t,{active:l,payload:r,label:n}=e;if(!l||!r||0===r.length||!Y)return null;if(ee)t=ee(r,n);else if(t={label:n,payload:r.map((e=>({name:e.name,value:e.value,color:e.color||e.fill})))},r[0]&&r[0].payload){const e=r[0].payload.previousValue;if(void 0!==e){const l=r[0].value-e,n=0!==e?l/e*100:0;t.comparison={label:"Previous Period",value:e,change:l,changePercentage:n}}}return(0,V.jsx)(O.A,{tooltipData:t,formatter:_})},Ce=(0,r.useCallback)((e=>e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1")),[]),we=(0,r.useCallback)((e=>{try{if(!e)return"";if("string"===typeof e&&e.includes("T")){const t=new Date(e);return isNaN(t.getTime())?String(e):(0,F.A)(t,"MMM dd")}return String(e)}catch(v){return console.warn("Error formatting date:",v),String(e||"")}}),[]),ke=(0,r.useCallback)((e=>e>=1e3?`${(e/1e3).toFixed(0)}k`:String(e)),[]),Fe=(0,r.useMemo)((()=>{if(!ge||0===ge.length)return null;const e={data:ge,margin:{top:10,right:30,left:0,bottom:0}},t={dataKey:x,tick:{fill:le.palette.text.secondary,fontSize:12},tickFormatter:we},l={tick:{fill:le.palette.text.secondary,fontSize:12},tickFormatter:ke};switch(d){case"area":return(0,V.jsx)(D.u,{width:"100%",height:"100%",children:(0,V.jsxs)(z.Q,{...e,children:[X&&(0,V.jsx)(I.d,{strokeDasharray:"3 3"}),(0,V.jsx)($.W,{...t}),(0,V.jsx)(L.h,{...l}),(0,V.jsx)(K.m,{content:(0,V.jsx)(be,{})}),H&&(0,V.jsx)(M.s,{}),null===u||void 0===u?void 0:u.map(((e,t)=>(0,V.jsx)(B.G,{type:"monotone",dataKey:e,stroke:b[t%b.length],fill:b[t%b.length],fillOpacity:.3,name:Ce(e),activeDot:{onClick:(e,t)=>ye(e.payload,t)}},e)))]})});case"bar":return(0,V.jsx)(D.u,{width:"100%",height:"100%",children:(0,V.jsxs)(N.E,{...e,children:[X&&(0,V.jsx)(I.d,{strokeDasharray:"3 3"}),(0,V.jsx)($.W,{...t}),(0,V.jsx)(L.h,{...l}),(0,V.jsx)(K.m,{content:(0,V.jsx)(be,{})}),H&&(0,V.jsx)(M.s,{}),null===u||void 0===u?void 0:u.map(((e,t)=>(0,V.jsx)(R.y,{dataKey:e,fill:b[t%b.length],name:Ce(e),onClick:(e,t)=>ye(e,t)},e)))]})});case"line":return(0,V.jsx)(D.u,{width:"100%",height:"100%",children:(0,V.jsxs)(E.b,{...e,children:[X&&(0,V.jsx)(I.d,{strokeDasharray:"3 3"}),(0,V.jsx)($.W,{...t}),(0,V.jsx)(L.h,{...l}),(0,V.jsx)(K.m,{content:(0,V.jsx)(be,{})}),H&&(0,V.jsx)(M.s,{}),null===u||void 0===u?void 0:u.map(((e,t)=>(0,V.jsx)(U.N,{type:"monotone",dataKey:e,stroke:b[t%b.length],name:Ce(e),activeDot:{onClick:(e,t)=>ye(e.payload,t)}},e)))]})});case"pie":return(0,V.jsx)(D.u,{width:"100%",height:"100%",children:(0,V.jsxs)(T.r,{children:[(0,V.jsx)(P.F,{activeIndex:null!==oe?oe:void 0,activeShape:ve,data:ge,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",dataKey:y,nameKey:m,onMouseEnter:fe,onMouseLeave:Ae,onClick:(e,t)=>ye(e,t),children:ge.map(((e,t)=>(0,V.jsx)(Z.f,{fill:b[t%b.length]},`cell-${t}`)))}),(0,V.jsx)(K.m,{content:(0,V.jsx)(be,{})}),H&&(0,V.jsx)(M.s,{})]})});default:return(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,V.jsx)(s.A,{color:"text.secondary",children:"Unsupported chart type"})})}}),[ge,d,X,x,le,H,u,b,y,m,oe,ve,fe,Ae,ye,Ce,we,ke,be]);return A?(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:f},children:(0,V.jsx)(C.A,{})}):v?(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:f},children:(0,V.jsx)(s.A,{color:"error",children:v})}):ge&&0!==ge.length?(0,V.jsxs)(i.A,{sx:{height:f,display:"flex",flexDirection:"column"},children:[(0,V.jsxs)("div",{style:{padding:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,V.jsx)(s.A,{variant:"subtitle1",children:l}),n&&(0,V.jsx)(o.A,{title:n,children:(0,V.jsx)(c.A,{size:"small",children:(0,V.jsx)(p.A,{fontSize:"small"})})})]}),(0,V.jsxs)("div",{style:{display:"flex",gap:8},children:[Q&&(0,V.jsx)(o.A,{title:"Click on chart elements to drill down",children:(0,V.jsx)(c.A,{size:"small",children:(0,V.jsx)(k.A,{fontSize:"small"})})}),q&&(0,V.jsx)(o.A,{title:"Click on chart elements to filter",children:(0,V.jsx)(c.A,{size:"small",children:(0,V.jsx)(w.A,{fontSize:"small"})})})]})]}),me.length>0&&(0,V.jsx)("div",{style:{paddingLeft:16,paddingRight:16,paddingBottom:8,display:"flex",flexWrap:"wrap",gap:8},children:me.map((e=>(0,V.jsx)(g.A,{label:`${e.field}: ${e.value}`,size:"small",onDelete:()=>{return t=e.id,void ae(t);var t},deleteIcon:(0,V.jsx)(j.A,{})},e.id)))}),(0,V.jsx)("div",{style:{flex:1,padding:8},children:Fe}),(0,V.jsx)(W.A,{open:de,onClose:()=>he(!1),drilldownData:xe})]}):(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:f},children:(0,V.jsx)(s.A,{color:"text.secondary",children:"No data available"})})};var X=l(61799),Q=l(37076),Y=l(54962);const q=(0,n.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(2),borderBottom:"1px solid",borderColor:t.palette.divider}})),_=(0,n.Ay)("div")({display:"flex",alignItems:"center"}),J=(0,n.Ay)("div")({display:"flex",gap:4}),ee=(0,n.Ay)("div")((e=>{let{theme:t}=e;return{padding:`${t.spacing(1)} ${t.spacing(2)}`,display:"flex",flexWrap:"wrap",gap:t.spacing(1)}})),te=(0,n.Ay)("div")({flex:1,position:"relative"}),le=e=>{let{id:t,title:l,description:n,type:C,data:w,xKey:k,yKeys:F=[],nameKey:S="name",valueKey:D="value",height:z=300,loading:I=!1,error:$=null,colors:L=["#0088FE","#00C49F","#FFBB28","#FF8042","#A569BD","#5DADE2","#48C9B0","#F4D03F"],showLegend:K=!0,showGrid:M=!0,enableDrilldown:B=!0,enableTooltip:N=!0,enableCrossFiltering:R=!0,enableZoom:E=!0,enableLassoSelection:U=!0,enableAnnotations:T=!0,enableExport:P=!0,enableFullscreen:Z=!0,tooltipFormatter:O,getTooltipData:le,getDrilldownData:re,onExport:ne,onShare:ae,onClick:ie}=e;(0,a.A)();const{filters:se,addFilter:oe,removeFilter:ce,getFiltersForSource:de}=(0,G.bZ)(),{getAnnotationsForChart:he}=(0,Y.IH)(),[xe,ue]=(0,r.useState)(!1),[me,ge]=(0,r.useState)(null),[pe,je]=(0,r.useState)(!1),[ye,fe]=(0,r.useState)(null),Ae=(0,r.useMemo)((()=>de(t)),[de,t]),ve=(0,r.useMemo)((()=>he(t)),[he,t]),be=(0,r.useCallback)(((e,t)=>{if(ie)return void ie(e,t);if(!B)return;let r;if(re)r=re(e,t);else{let t="",s="",o=0,c=[];var a;if("pie"===C)t=`${l} - ${e[S]}`,s=e[S],o=e[D],c=(null===(a=e.metadata)||void 0===a?void 0:a.detailData)||[];else if("scatter"===C||"lassoScatter"===C)t=`${l} - Point Details`,s=e[S]||`${e[k]}, ${e[(null===F||void 0===F?void 0:F[0])||"y"]}`,o=e[D]||e[null===F||void 0===F?void 0:F[0]],c=[e];else{var i;t=`${l} - ${e[k]}`,s=e[k],o=F.length>0?e[F[0]]:e[D],c=(null===(i=e.metadata)||void 0===i?void 0:i.detailData)||[]}r={title:t,description:n,category:s,value:o,data:c.length>0?c:[e]}}ge(r),ue(!0)}),[B,re,C,l,n,S,D,k,F,ie]),Ce=()=>{fe(null)},we=e=>{ne?ne(e,w):console.log(`Exporting chart in ${e} format`),Ce()},ke=(0,r.useMemo)((()=>{const e={id:t,title:l,description:n,data:w,xKey:k,loading:I,error:$,colors:L,showLegend:K,showGrid:M,tooltipFormatter:O,getTooltipData:le};return"timeSeries"===C||"zoomableTimeSeries"===C?(0,V.jsx)(X.A,{...e,type:"timeSeries"===C?"line":"area",yKeys:F,height:z,enableBrush:E,enableZoom:E,onClick:be}):"scatter"===C||"lassoScatter"===C?(0,V.jsx)(Q.A,{...e,yKey:(null===F||void 0===F?void 0:F[0])||"y",zKey:F&&F.length>1?F[1]:void 0,nameKey:S,height:z,enableLassoSelection:U,enableCrossFiltering:R,onClick:be}):(0,V.jsx)(H,{...e,type:C,yKeys:F,nameKey:S,valueKey:D,height:z,enableDrilldown:B,enableTooltip:N,enableCrossFiltering:R,onClick:be})}),[t,l,n,w,k,I,$,L,K,M,O,le,C,F,z,E,U,R,S,D,B,N,be]);return(0,V.jsxs)(i.A,{sx:{height:pe?"100vh":z,width:pe?"100vw":"100%",position:pe?"fixed":"relative",top:pe?0:"auto",left:pe?0:"auto",zIndex:pe?1300:"auto",display:"flex",flexDirection:"column",overflow:"hidden"},elevation:pe?24:1,children:[(0,V.jsxs)(q,{children:[(0,V.jsxs)(_,{children:[(0,V.jsx)(s.A,{variant:"subtitle1",children:l}),n&&(0,V.jsx)(o.A,{title:n,children:(0,V.jsx)(c.A,{size:"small",children:(0,V.jsx)(p.A,{fontSize:"small"})})})]}),(0,V.jsxs)(J,{children:[Z&&(0,V.jsx)(o.A,{title:pe?"Exit Fullscreen":"Fullscreen",children:(0,V.jsx)(c.A,{size:"small",onClick:()=>{je(!pe)},children:(0,V.jsx)(b.A,{fontSize:"small"})})}),(P||T)&&(0,V.jsx)(o.A,{title:"More Options",children:(0,V.jsx)(c.A,{size:"small",onClick:e=>{fe(e.currentTarget)},children:(0,V.jsx)(y.A,{fontSize:"small"})})})]}),(0,V.jsxs)(d.A,{anchorEl:ye,open:Boolean(ye),onClose:Ce,children:[P&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(h.A,{onClick:()=>we("csv"),children:[(0,V.jsx)(x.A,{children:(0,V.jsx)(v.A,{fontSize:"small"})}),(0,V.jsx)(u.A,{children:"Export as CSV"})]}),(0,V.jsxs)(h.A,{onClick:()=>we("excel"),children:[(0,V.jsx)(x.A,{children:(0,V.jsx)(v.A,{fontSize:"small"})}),(0,V.jsx)(u.A,{children:"Export as Excel"})]}),(0,V.jsxs)(h.A,{onClick:()=>we("pdf"),children:[(0,V.jsx)(x.A,{children:(0,V.jsx)(v.A,{fontSize:"small"})}),(0,V.jsx)(u.A,{children:"Export as PDF"})]}),(0,V.jsx)(m.A,{})]}),T&&(0,V.jsxs)(h.A,{onClick:()=>console.log("View all annotations"),children:[(0,V.jsx)(x.A,{children:(0,V.jsx)(f.A,{fontSize:"small"})}),(0,V.jsxs)(u.A,{children:["View All Annotations (",ve.length,")"]})]}),ae&&(0,V.jsxs)(h.A,{onClick:()=>{ae?ae(t):console.log(`Sharing chart with ID: ${t}`),Ce()},children:[(0,V.jsx)(x.A,{children:(0,V.jsx)(A.A,{fontSize:"small"})}),(0,V.jsx)(u.A,{children:"Share Chart"})]})]})]}),Ae.length>0&&(0,V.jsx)(ee,{children:Ae.map((e=>(0,V.jsx)(g.A,{label:`${e.field}: ${Array.isArray(e.value)?`${e.value.length} selected`:e.value}`,size:"small",onDelete:()=>{return t=e.id,void ce(t);var t},deleteIcon:(0,V.jsx)(j.A,{})},e.id)))}),(0,V.jsxs)(te,{children:[ke,T&&0!==ve.length?ve.map((e=>{var l;return e.position?(0,V.jsx)(Y.iL,{chartId:t,dataPointId:e.dataPointId,dataPointLabel:(null===(l=e.metadata)||void 0===l?void 0:l.label)||`Data point ${e.dataPointId}`,position:e.position},e.id):null})):null]}),(0,V.jsx)(W.A,{open:xe,onClose:()=>ue(!1),drilldownData:me})]})}},37076:(e,t,l)=>{l.d(t,{A:()=>z});var r=l(65043),n=l(26240),a=l(96446),i=l(81637),s=l(85865),o=l(77739),c=l(17392),d=l(93933),h=l(43845),x=l(5393),u=l(28242),m=l(95305),g=l(34916),p=l(50108),j=l(42458),y=l(87734),f=l(52185),A=l(6026),v=l(15847),b=l(86150),C=l(21327),w=l(77943),k=l(17869),F=l(69771),S=l(47339),D=l(70579);const z=e=>{let{id:t,title:l,description:z,data:I,xKey:$,yKey:L,zKey:K,nameKey:M="name",height:B=300,loading:N=!1,error:R=null,colors:E=["#0088FE","#00C49F","#FFBB28","#FF8042","#A569BD","#5DADE2","#48C9B0","#F4D03F"],showLegend:U=!0,showGrid:T=!0,enableLassoSelection:P=!0,enableCrossFiltering:Z=!0,tooltipFormatter:O,getTooltipData:W,onClick:G}=e;const V=(0,n.A)(),{filters:H,addFilter:X,removeFilter:Q,clearFilters:Y,getFiltersForSource:q,applyFilters:_}=(0,S.bZ)(),J=(q(t),_(I,t)),[ee,te]=(0,r.useState)([]),[le,re]=(0,r.useState)(!1),[ne,ae]=(0,r.useState)([]),[ie,se]=(0,r.useState)(null),oe=(0,r.useRef)(null),ce=(0,r.useRef)(null),de=e=>{let t,{active:l,payload:r}=e;if(!l||!r||0===r.length)return null;if(W)t=W(r,"");else{const e=r[0].payload;t={label:e[M]||"",payload:[{name:$.charAt(0).toUpperCase()+$.slice(1).replace(/([A-Z])/g," $1"),value:e[$],color:r[0].color||r[0].fill},{name:L.charAt(0).toUpperCase()+L.slice(1).replace(/([A-Z])/g," $1"),value:e[L],color:r[0].color||r[0].fill}]},K&&void 0!==e[K]&&t.payload.push({name:K.charAt(0).toUpperCase()+K.slice(1).replace(/([A-Z])/g," $1"),value:e[K],color:r[0].color||r[0].fill});const l=[];for(const t in e)t!==$&&t!==L&&t!==K&&t!==M&&"id"!==t&&"color"!==t&&"fill"!==t&&l.push({label:t.charAt(0).toUpperCase()+t.slice(1).replace(/([A-Z])/g," $1"),value:e[t]});l.length>0&&(t.additionalInfo=l)}return(0,D.jsx)(F.A,{tooltipData:t,formatter:O})},he=(0,r.useCallback)(((e,t)=>{if(!oe.current)return null;const l=oe.current.getBoundingClientRect(),r=(e-60)/(l.width-60-30),n=(t-10)/(l.height-10-30);return r<0||r>1||n<0||n>1?null:{x:r,y:n}}),[]),xe=(0,r.useCallback)((e=>{if(!P)return;const t=e.currentTarget.getBoundingClientRect(),l=e.clientX-t.left,r=e.clientY-t.top,n=he(l,r);n&&(re(!0),te([n]))}),[P,he]),ue=(0,r.useCallback)((e=>{if(!P||!le)return;const t=e.currentTarget.getBoundingClientRect(),l=e.clientX-t.left,r=e.clientY-t.top,n=he(l,r);n&&te((e=>[...e,n]))}),[P,le,he]),me=(0,r.useCallback)((()=>{if(!P||!le)return;if(re(!1),ee.length<3)return void te([]);const e=[...ee,ee[0]],l=J.filter((t=>{const l=t[$],r=t[L];if("number"!==typeof l||"number"!==typeof r)return!1;const n=Math.min(...J.map((e=>e[$]))),a=Math.max(...J.map((e=>e[$]))),i=Math.min(...J.map((e=>e[L]))),s=Math.max(...J.map((e=>e[L])));return ge((l-n)/(a-n),1-(r-i)/(s-i),e)}));if(ae(l),Z&&l.length>0){const e=`${t}-lasso-selection`;Q(e);const r={id:e,type:"category",field:"id",value:l.map((e=>e.id)),operator:"in",source:t};X(r)}te([])}),[P,le,ee,J,$,L,t,Z,X,Q]),ge=(e,t,l)=>{let r=!1;for(let n=0,a=l.length-1;n<l.length;a=n++){const i=l[n].x,s=l[n].y,o=l[a].x,c=l[a].y;s>t!==c>t&&e<(o-i)*(t-s)/(c-s)+i&&(r=!r)}return r},pe=(0,r.useCallback)((()=>{ae([]);Q(`${t}-lasso-selection`)}),[t,Q]),je=(0,r.useCallback)((()=>{ae(J);const e=`${t}-lasso-selection`;Q(e);const l={id:e,type:"category",field:"id",value:J.map((e=>e.id)),operator:"in",source:t};X(l)}),[J,t,X,Q]),ye=(0,r.useCallback)((e=>{se(e)}),[]),fe=(0,r.useCallback)(((e,t)=>{G&&G(e,t)}),[G]);return N?(0,D.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:B},children:(0,D.jsx)(i.A,{})}):R?(0,D.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:B},children:(0,D.jsx)(s.A,{color:"error",children:R})}):J&&0!==J.length?(0,D.jsxs)(a.A,{sx:{height:B,position:"relative"},children:[P&&(0,D.jsxs)(a.A,{sx:{position:"absolute",top:10,right:10,zIndex:1,display:"flex",flexDirection:"column",gap:.5,backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:1,p:.5},children:[(0,D.jsx)(o.A,{title:"Select All Points",children:(0,D.jsx)(c.A,{size:"small",onClick:je,children:(0,D.jsx)(m.A,{fontSize:"small"})})}),(0,D.jsx)(o.A,{title:"Clear Selection",children:(0,D.jsx)(c.A,{size:"small",onClick:pe,disabled:0===ne.length,children:(0,D.jsx)(g.A,{fontSize:"small"})})}),(0,D.jsx)(d.A,{badgeContent:ne.length,color:"primary",max:99,children:(0,D.jsx)(u.A,{fontSize:"small"})})]}),ne.length>0&&(0,D.jsx)(a.A,{sx:{position:"absolute",top:10,left:10,zIndex:1},children:(0,D.jsx)(h.A,{label:`${ne.length} points selected`,onDelete:pe,deleteIcon:(0,D.jsx)(x.A,{}),color:"primary",size:"small"})}),(0,D.jsx)(p.u,{width:"100%",height:"100%",children:(0,D.jsxs)(j.t,{margin:{top:10,right:30,left:0,bottom:0},ref:ce,children:[T&&(0,D.jsx)(y.d,{strokeDasharray:"3 3"}),(0,D.jsx)(f.W,{type:"number",dataKey:$,name:$.charAt(0).toUpperCase()+$.slice(1).replace(/([A-Z])/g," $1"),tick:{fill:V.palette.text.secondary,fontSize:12}}),(0,D.jsx)(A.h,{type:"number",dataKey:L,name:L.charAt(0).toUpperCase()+L.slice(1).replace(/([A-Z])/g," $1"),tick:{fill:V.palette.text.secondary,fontSize:12}}),K&&(0,D.jsx)(v.K,{type:"number",dataKey:K,range:[50,500],name:K.charAt(0).toUpperCase()+K.slice(1).replace(/([A-Z])/g," $1")}),(0,D.jsx)(b.m,{content:(0,D.jsx)(de,{})}),U&&(0,D.jsx)(C.s,{}),(0,D.jsx)(w.X,{name:l,data:J,fill:E[0],onMouseEnter:ye,onClick:fe,children:J.map(((e,t)=>{const l=ne.some((t=>t.id===e.id)),r=ie&&ie.id===e.id;let n=E[t%E.length];return e.color&&(n=e.color),(0,D.jsx)(k.f,{fill:n,stroke:l?V.palette.primary.main:r?V.palette.secondary.main:n,strokeWidth:l?2:r?1.5:0,opacity:l?1:.7},`cell-${t}`)}))})]})}),(0,D.jsx)("svg",{ref:oe,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0,pointerEvents:P?"auto":"none",cursor:le?"crosshair":"default"},onMouseDown:xe,onMouseMove:ue,onMouseUp:me,onMouseLeave:me,children:(()=>{if(ee.length<2)return null;const e=ee.map((e=>{const t=oe.current;if(!t)return"";const l=t.getBoundingClientRect(),r=l.width-60-30,n=l.height-10-30;return`${e.x*r+60},${e.y*n+10}`}));return(0,D.jsx)("polyline",{points:e.join(" "),fill:"none",stroke:V.palette.primary.main,strokeWidth:2,strokeDasharray:"5,5",strokeLinecap:"round",strokeLinejoin:"round"})})()})]}):(0,D.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:B},children:(0,D.jsx)(s.A,{color:"text.secondary",children:"No data available"})})}},47339:(e,t,l)=>{l.d(t,{bZ:()=>s,dv:()=>i});var r=l(65043),n=l(70579);const a=(0,r.createContext)(void 0),i=e=>{let{children:t}=e;const[l,i]=(0,r.useState)([]),s=(0,r.useCallback)((e=>{i((t=>{const l=t.findIndex((t=>t.id===e.id));if(l>=0){const r=[...t];return r[l]=e,r}return[...t,e]}))}),[]),o=(0,r.useCallback)(((e,t)=>{i((l=>{const r=l.findIndex((t=>t.id===e));if(r>=0){const e=[...l];return e[r]={...e[r],value:t},e}return l}))}),[]),c=(0,r.useCallback)((e=>{i((t=>t.filter((t=>t.id!==e))))}),[]),d=(0,r.useCallback)((e=>{i(e?t=>t.filter((t=>t.source!==e)):[])}),[]),h=(0,r.useCallback)((e=>l.filter((t=>t.source===e))),[l]),x=(0,r.useCallback)((e=>l.filter((t=>t.source!==e))),[l]),u=(0,r.useCallback)(((e,t)=>{if(0===l.length||0===e.length)return e;const r=t?l.filter((e=>e.source!==t)):l;return 0===r.length?e:e.filter((e=>r.every((t=>{const l=e[t.field];if(void 0===l)return!0;switch(t.type){case"category":if("in"===t.operator&&Array.isArray(t.value)){const e=String(l);return t.value.some((t=>String(t)===e))}return l===t.value;case"date":if(!t.value)return!0;const e=l instanceof Date?l:new Date(l);if("between"===t.operator&&Array.isArray(t.value)&&2===t.value.length){const[l,r]=t.value;return e>=l&&e<=r}return!(t.value instanceof Date)||e.toDateString()===t.value.toDateString();case"value":if("number"!==typeof l)return!0;if("greaterThan"===t.operator)return l>t.value;if("lessThan"===t.operator)return l<t.value;if("between"===t.operator&&Array.isArray(t.value)&&2===t.value.length){const[e,r]=t.value;return l>=e&&l<=r}return l===t.value;case"search":return"string"!==typeof l||l.toLowerCase().includes(t.value.toLowerCase());default:return!0}}))))}),[l]),m={filters:l,addFilter:s,updateFilter:o,removeFilter:c,clearFilters:d,getFiltersForSource:h,getFiltersExceptSource:x,applyFilters:u};return(0,n.jsx)(a.Provider,{value:m,children:t})},s=()=>{const e=(0,r.useContext)(a);if(void 0===e)throw new Error("useFilterContext must be used within a FilterContextProvider");return e}},54962:(e,t,l)=>{l.d(t,{IH:()=>B,iL:()=>R,uh:()=>M});var r=l(65043),n=l(26240),a=l(83462),i=l(4219),s=l(96446),o=l(85865),c=l(17392),d=l(35316),h=l(35721),x=l(37918),u=l(48734),m=l(8266),g=l(77739),p=l(39336),j=l(67784),y=l(43845),f=l(29347),A=l(11906),v=l(93933),b=l(81045),C=l(41020),w=l(63336),k=l(40835),F=l(55600),S=l(95540),D=l(63471),z=l(74802),I=l(69286),$=l(69525),L=l(70579);const K=(0,r.createContext)(void 0),M=e=>{let{children:t}=e;const[l,n]=(0,r.useState)([]),a=(0,r.useCallback)((e=>{const t=(new Date).toISOString(),l={...e,id:`annotation-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,createdAt:t,updatedAt:t};n((e=>[...e,l]))}),[]),i=(0,r.useCallback)(((e,t,l)=>{n((r=>r.map((r=>r.id===e?{...r,text:t,type:l,updatedAt:(new Date).toISOString()}:r))))}),[]),s=(0,r.useCallback)((e=>{n((t=>t.filter((t=>t.id!==e))))}),[]),o=(0,r.useCallback)((e=>l.filter((t=>t.chartId===e))),[l]),c=(0,r.useCallback)(((e,t)=>l.filter((l=>l.chartId===e&&l.dataPointId===t))),[l]),d={annotations:l,addAnnotation:a,updateAnnotation:i,deleteAnnotation:s,getAnnotationsForChart:o,getAnnotationsForDataPoint:c};return(0,L.jsx)(K.Provider,{value:d,children:t})},B=()=>{const e=(0,r.useContext)(K);if(void 0===e)throw new Error("useAnnotationContext must be used within an AnnotationContextProvider");return e},N=e=>{let{open:t,onClose:l,chartId:v,dataPointId:b,dataPointLabel:C,existingAnnotations:w}=e;const K=(0,n.A)(),{addAnnotation:M,updateAnnotation:N,deleteAnnotation:R}=B(),[E,U]=(0,r.useState)(""),[T,P]=(0,r.useState)("comment"),[Z,O]=(0,r.useState)(null),W=()=>{O(null),U(""),P("comment")},G=e=>{switch(e){case"comment":default:return(0,L.jsx)(k.A,{fontSize:"small"});case"flag":return(0,L.jsx)(I.A,{fontSize:"small",color:"error"});case"insight":return(0,L.jsx)(F.A,{fontSize:"small",color:"primary"})}};return(0,L.jsxs)(a.A,{open:t,onClose:l,maxWidth:"sm",fullWidth:!0,children:[(0,L.jsx)(i.A,{children:(0,L.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsxs)(o.A,{variant:"h6",children:["Annotations for ",C]}),(0,L.jsx)(c.A,{"aria-label":"close",onClick:l,sx:{color:K.palette.grey[500]},children:(0,L.jsx)(z.A,{})})]})}),(0,L.jsxs)(d.A,{dividers:!0,children:[w.length>0?(0,L.jsx)(h.A,{children:w.map((e=>(0,L.jsxs)(r.Fragment,{children:[(0,L.jsxs)(x.Ay,{alignItems:"flex-start",children:[(0,L.jsx)(s.A,{sx:{mr:1,mt:.5},children:G(e.type)}),(0,L.jsx)(u.A,{primary:(0,L.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,L.jsx)(o.A,{variant:"subtitle2",children:e.author}),(0,L.jsx)(o.A,{variant:"caption",color:"text.secondary",children:(0,$.A)(new Date(e.createdAt),"MMM dd, yyyy HH:mm")})]}),secondary:(0,L.jsx)(o.A,{variant:"body2",color:"text.primary",sx:{mt:.5,whiteSpace:"pre-wrap"},children:e.text})}),(0,L.jsxs)(m.A,{children:[(0,L.jsx)(g.A,{title:"Edit",children:(0,L.jsx)(c.A,{edge:"end","aria-label":"edit",onClick:()=>(e=>{O(e),U(e.text),P(e.type)})(e),size:"small",children:(0,L.jsx)(S.A,{fontSize:"small"})})}),(0,L.jsx)(g.A,{title:"Delete",children:(0,L.jsx)(c.A,{edge:"end","aria-label":"delete",onClick:()=>{return t=e.id,R(t),void(Z&&Z.id===t&&W());var t},size:"small",children:(0,L.jsx)(D.A,{fontSize:"small"})})})]})]}),(0,L.jsx)(p.A,{component:"li"})]},e.id)))}):(0,L.jsx)(s.A,{sx:{py:2,textAlign:"center"},children:(0,L.jsx)(o.A,{color:"text.secondary",children:"No annotations yet. Add one below."})}),(0,L.jsxs)(s.A,{sx:{mt:2},children:[(0,L.jsx)(o.A,{variant:"subtitle2",gutterBottom:!0,children:Z?"Edit Annotation":"Add Annotation"}),(0,L.jsx)(j.A,{fullWidth:!0,multiline:!0,rows:3,placeholder:"Add your annotation here...",value:E,onChange:e=>U(e.target.value),variant:"outlined",size:"small"}),(0,L.jsxs)(s.A,{sx:{display:"flex",mt:1,gap:1},children:[(0,L.jsx)(y.A,{icon:(0,L.jsx)(k.A,{}),label:"Comment",onClick:()=>P("comment"),color:"comment"===T?"primary":"default",variant:"comment"===T?"filled":"outlined"}),(0,L.jsx)(y.A,{icon:(0,L.jsx)(I.A,{}),label:"Flag",onClick:()=>P("flag"),color:"flag"===T?"primary":"default",variant:"flag"===T?"filled":"outlined"}),(0,L.jsx)(y.A,{icon:(0,L.jsx)(F.A,{}),label:"Insight",onClick:()=>P("insight"),color:"insight"===T?"primary":"default",variant:"insight"===T?"filled":"outlined"})]})]})]}),(0,L.jsx)(f.A,{children:Z?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(A.A,{onClick:W,children:"Cancel"}),(0,L.jsx)(A.A,{onClick:()=>{Z&&E.trim()&&(N(Z.id,E,T),O(null),U(""),P("comment"))},variant:"contained",color:"primary",disabled:!E.trim(),children:"Save Changes"})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(A.A,{onClick:l,children:"Close"}),(0,L.jsx)(A.A,{onClick:()=>{E.trim()&&(M({chartId:v,dataPointId:b,text:E,author:"Current User",type:T}),U(""),P("comment"))},variant:"contained",color:"primary",disabled:!E.trim(),children:"Add Annotation"})]})})]})},R=e=>{let{chartId:t,dataPointId:l,dataPointLabel:a,position:i}=e;const c=(0,n.A)(),{getAnnotationsForDataPoint:d}=B(),[m,g]=(0,r.useState)(null),[p,j]=(0,r.useState)(!1),y=d(t,l),f=()=>{g(null)},F=Boolean(m);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(v.A,{badgeContent:y.length,color:"primary",overlap:"circular",sx:{position:"absolute",left:`${i.x}%`,top:`${i.y}%`,transform:"translate(-50%, -50%)",zIndex:1},children:(0,L.jsx)(b.A,{sx:{width:24,height:24,bgcolor:y.length>0?c.palette.primary.main:c.palette.grey[300],cursor:"pointer"},onClick:e=>{g(e.currentTarget)},children:(0,L.jsx)(k.A,{sx:{fontSize:14}})})}),(0,L.jsx)(C.Ay,{open:F,anchorEl:m,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,L.jsxs)(w.A,{sx:{p:2,maxWidth:300},children:[(0,L.jsx)(o.A,{variant:"subtitle2",gutterBottom:!0,children:a}),y.length>0?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(o.A,{variant:"body2",gutterBottom:!0,children:[y.length," annotation",1!==y.length?"s":""]}),(0,L.jsx)(h.A,{dense:!0,children:y.slice(0,2).map((e=>(0,L.jsx)(x.Ay,{children:(0,L.jsx)(u.A,{primary:e.text.length>50?`${e.text.substring(0,50)}...`:e.text,secondary:`${e.author} - ${(0,$.A)(new Date(e.createdAt),"MMM dd")}`})},e.id)))}),y.length>2&&(0,L.jsxs)(o.A,{variant:"body2",color:"primary",sx:{mt:1},children:[y.length-2," more..."]})]}):(0,L.jsx)(o.A,{variant:"body2",children:"No annotations yet. Add one now."}),(0,L.jsx)(s.A,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:(0,L.jsx)(A.A,{size:"small",onClick:()=>{j(!0),f()},children:y.length>0?"View All":"Add Annotation"})})]})}),(0,L.jsx)(N,{open:p,onClose:()=>{j(!1)},chartId:t,dataPointId:l,dataPointLabel:a,existingAnnotations:y})]})}},61799:(e,t,l)=>{l.d(t,{A:()=>I});var r=l(65043),n=l(26240),a=l(81637),i=l(85865),s=l(77739),o=l(17392),c=l(35624),d=l(57943),h=l(56170),x=l(5093),u=l(69525),m=l(877),g=l(87734),p=l(52185),j=l(6026),y=l(86150),f=l(21327),A=l(13839),v=l(89600),b=l(80768),C=l(75748),w=l(90168),k=l(82291),F=l(38643),S=l(50108),D=l(69771),z=l(70579);const I=e=>{let{id:t,title:l,description:I,type:$,data:L,xKey:K,yKeys:M,height:B=300,loading:N=!1,error:R=null,colors:E=["#0088FE","#00C49F","#FFBB28","#FF8042","#A569BD","#5DADE2","#48C9B0","#F4D03F"],showLegend:U=!0,showGrid:T=!0,enableBrush:P=!0,enableZoom:Z=!0,tooltipFormatter:O,getTooltipData:W,onClick:G}=e;const V=(0,n.A)(),[H,X]=(0,r.useState)({refAreaLeft:null,refAreaRight:null,zoomed:!1,zoomDomain:null}),Q=(0,r.useRef)(null),Y=e=>{try{if(!e||"string"!==typeof e)return String(e||"");if(e.includes("T")){const t=(0,x.A)(e);return isNaN(t.getTime())?String(e):(0,u.A)(t,"MMM dd, yyyy")}return e}catch(R){return console.warn("Error formatting date:",R),String(e||"")}},q=e=>{let t,{active:l,payload:r,label:n}=e;if(!l||!r||0===r.length)return null;if(W)t=W(r,n);else if(t={label:Y(n),payload:r.map((e=>({name:e.name,value:e.value,color:e.color||e.fill})))},r[0]&&r[0].payload){const e=r[0].payload.previousValue;if(void 0!==e){const l=r[0].value-e,n=0!==e?l/e*100:0;t.comparison={label:"Previous Period",value:e,change:l,changePercentage:n}}}return(0,z.jsx)(D.A,{tooltipData:t,formatter:O})},_=(0,r.useCallback)((e=>{Z&&e&&X((t=>({...t,refAreaLeft:e.activeLabel})))}),[Z]),J=(0,r.useCallback)((e=>{Z&&H.refAreaLeft&&e&&X((t=>({...t,refAreaRight:e.activeLabel})))}),[Z,H.refAreaLeft]),ee=(0,r.useCallback)((()=>{if(!Z||!H.refAreaLeft||!H.refAreaRight)return void X((e=>({...e,refAreaLeft:null,refAreaRight:null})));let e=L.findIndex((e=>e[K]===H.refAreaLeft)),t=L.findIndex((e=>e[K]===H.refAreaRight));e>t&&([e,t]=[t,e]),X({refAreaLeft:null,refAreaRight:null,zoomed:!0,zoomDomain:{x:[e,t]}})}),[Z,H.refAreaLeft,H.refAreaRight,L,K]),te=(0,r.useCallback)((()=>{X({refAreaLeft:null,refAreaRight:null,zoomed:!1,zoomDomain:null})}),[]),le=(0,r.useCallback)((()=>{if(H.zoomed){if(H.zoomDomain){const[e,t]=H.zoomDomain.x,l=t-e,r=Math.max(0,Math.floor(e+.25*l)),n=Math.min(L.length-1,Math.floor(t-.25*l));X({...H,zoomDomain:{x:[r,n]}})}}else{const e=Math.floor(L.length/2),t=Math.floor(L.length/4);X({refAreaLeft:null,refAreaRight:null,zoomed:!0,zoomDomain:{x:[e-t,e+t]}})}}),[H,L]),re=(0,r.useCallback)((()=>{if(H.zoomed&&H.zoomDomain){const[e,t]=H.zoomDomain.x,l=t-e,r=Math.max(0,Math.floor(e-.25*l)),n=Math.min(L.length-1,Math.floor(t+.25*l));r<=1&&n>=L.length-2?te():X({...H,zoomDomain:{x:[r,n]}})}}),[H,L,te]),ne=(0,r.useCallback)((()=>{if(H.zoomed&&H.zoomDomain){var e,t;const[l,r]=H.zoomDomain.x;return[null===(e=L[l])||void 0===e?void 0:e[K],null===(t=L[r])||void 0===t?void 0:t[K]]}}),[H,L,K]);if(N)return(0,z.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:B},children:(0,z.jsx)(a.A,{})});if(R)return(0,z.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:B},children:(0,z.jsx)(i.A,{color:"error",children:R})});if(!L||0===L.length)return(0,z.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:B},children:(0,z.jsx)(i.A,{color:"text.secondary",children:"No data available"})});return(0,z.jsxs)("div",{style:{height:B,position:"relative"},children:[Z&&(0,z.jsxs)("div",{style:{position:"absolute",top:10,right:10,zIndex:1,display:"flex",flexDirection:"column",gap:4,backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:4,padding:4},children:[(0,z.jsx)(s.A,{title:"Zoom In",children:(0,z.jsx)(o.A,{size:"small",onClick:le,children:(0,z.jsx)(c.A,{fontSize:"small"})})}),(0,z.jsx)(s.A,{title:"Zoom Out",children:(0,z.jsx)(o.A,{size:"small",onClick:re,disabled:!H.zoomed,children:(0,z.jsx)(d.A,{fontSize:"small"})})}),(0,z.jsx)(s.A,{title:"Reset Zoom",children:(0,z.jsx)(o.A,{size:"small",onClick:te,disabled:!H.zoomed,children:(0,z.jsx)(h.A,{fontSize:"small"})})})]}),(0,z.jsx)(S.u,{width:"100%",height:"100%",children:(()=>{const e={data:L,margin:{top:10,right:30,left:0,bottom:0},onMouseDown:_,onMouseMove:J,onMouseUp:ee},t=ne(),l={dataKey:K,tick:{fill:V.palette.text.secondary,fontSize:12},tickFormatter:e=>void 0===e||null===e?"":Y(String(e)),domain:t,allowDataOverflow:!0},r={tick:{fill:V.palette.text.secondary,fontSize:12},tickFormatter:e=>e>=1e3?`${(e/1e3).toFixed(0)}k`:e.toString()};switch($){case"area":return(0,z.jsxs)(m.Q,{...e,ref:Q,children:[T&&(0,z.jsx)(g.d,{strokeDasharray:"3 3"}),(0,z.jsx)(p.W,{...l}),(0,z.jsx)(j.h,{...r}),(0,z.jsx)(y.m,{content:(0,z.jsx)(q,{})}),U&&(0,z.jsx)(f.s,{}),M.map(((e,t)=>(0,z.jsx)(A.G,{type:"monotone",dataKey:e,stroke:E[t%E.length],fill:E[t%E.length],fillOpacity:.3,name:e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1"),activeDot:{onClick:(e,t)=>G&&G(e.payload,t)}},e))),P&&!H.zoomed&&(0,z.jsx)(v.v,{dataKey:K,height:30,stroke:V.palette.primary.main,tickFormatter:e=>void 0===e||null===e?"":Y(String(e))}),H.refAreaLeft&&H.refAreaRight&&(0,z.jsx)(b.T,{x1:H.refAreaLeft,x2:H.refAreaRight,strokeOpacity:.3,fill:V.palette.primary.main,fillOpacity:.3})]});case"line":return(0,z.jsxs)(C.b,{...e,ref:Q,children:[T&&(0,z.jsx)(g.d,{strokeDasharray:"3 3"}),(0,z.jsx)(p.W,{...l}),(0,z.jsx)(j.h,{...r}),(0,z.jsx)(y.m,{content:(0,z.jsx)(q,{})}),U&&(0,z.jsx)(f.s,{}),M.map(((e,t)=>(0,z.jsx)(w.N,{type:"monotone",dataKey:e,stroke:E[t%E.length],name:e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1"),activeDot:{onClick:(e,t)=>G&&G(e.payload,t)}},e))),P&&!H.zoomed&&(0,z.jsx)(v.v,{dataKey:K,height:30,stroke:V.palette.primary.main,tickFormatter:e=>void 0===e||null===e?"":Y(String(e))}),H.refAreaLeft&&H.refAreaRight&&(0,z.jsx)(b.T,{x1:H.refAreaLeft,x2:H.refAreaRight,strokeOpacity:.3,fill:V.palette.primary.main,fillOpacity:.3})]});case"bar":return(0,z.jsxs)(k.E,{...e,ref:Q,children:[T&&(0,z.jsx)(g.d,{strokeDasharray:"3 3"}),(0,z.jsx)(p.W,{...l}),(0,z.jsx)(j.h,{...r}),(0,z.jsx)(y.m,{content:(0,z.jsx)(q,{})}),U&&(0,z.jsx)(f.s,{}),M.map(((e,t)=>(0,z.jsx)(F.y,{dataKey:e,fill:E[t%E.length],name:e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1"),onClick:(e,t)=>G&&G(e,t)},e))),P&&!H.zoomed&&(0,z.jsx)(v.v,{dataKey:K,height:30,stroke:V.palette.primary.main,tickFormatter:e=>void 0===e||null===e?"":Y(String(e))}),H.refAreaLeft&&H.refAreaRight&&(0,z.jsx)(b.T,{x1:H.refAreaLeft,x2:H.refAreaRight,strokeOpacity:.3,fill:V.palette.primary.main,fillOpacity:.3})]});default:return null}})()})]})}},69771:(e,t,l)=>{l.d(t,{A:()=>j});l(65043);var r=l(26240),n=l(63336),a=l(90310),i=l(85865),s=l(39336),o=l(37912),c=l(93881),d=l(2306),h=l(69525),x=l(50108),u=l(82291),m=l(38643),g=l(17869),p=l(70579);const j=e=>{var t;let{active:l,payload:j,label:y,tooltipData:f,showComparison:A=!0,showTrend:v=!0,showAdditionalInfo:b=!0,formatter:C}=e;const w=(0,r.A)();if(!l||!j||0===j.length)return null;const k=(e,t)=>{return C?C(e,t,{}):"number"!==typeof e?(null===e||void 0===e?void 0:e.toString())||"":t.toLowerCase().includes("amount")||t.toLowerCase().includes("revenue")||t.toLowerCase().includes("deposit")||t.toLowerCase().includes("withdrawal")||t.toLowerCase().includes("bet")||t.toLowerCase().includes("win")||t.toLowerCase().includes("ggr")||e>=1e3?(l=e,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(l)):t.toLowerCase().includes("percentage")||t.toLowerCase().includes("rate")||t.toLowerCase().includes("ratio")?`${e.toFixed(2)}%`:(e=>new Intl.NumberFormat("en-US").format(e))(e);var l},F=f||{label:y||"",payload:j.map((e=>({name:e.name,value:e.value,color:e.color||e.fill||w.palette.primary.main})))};return(0,p.jsxs)(n.A,{elevation:3,sx:{p:1.5,maxWidth:300,border:`1px solid ${w.palette.divider}`,backgroundColor:(0,a.X4)(w.palette.background.paper,.95)},children:[(0,p.jsx)(i.A,{variant:"subtitle2",sx:{mb:1},children:"string"===typeof F.label&&F.label.includes("T")?(0,h.A)(new Date(F.label),"MMM dd, yyyy"):F.label}),F.payload.map(((e,t)=>(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[(0,p.jsx)("div",{style:{width:12,height:12,backgroundColor:e.color,marginRight:8,borderRadius:"50%"}}),(0,p.jsx)(i.A,{variant:"body2",sx:{flex:1},children:e.name}),(0,p.jsx)(i.A,{variant:"body2",fontWeight:"medium",children:k(e.value,e.name)})]},`item-${t}`))),A&&F.comparison&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.A,{sx:{my:1}}),(0,p.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,p.jsx)(i.A,{variant:"caption",color:"text.secondary",children:F.comparison.label}),(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,p.jsx)(i.A,{variant:"body2",children:k(F.comparison.value,"comparison")}),(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(D=F.comparison.changePercentage,D>0?(0,p.jsx)(o.A,{fontSize:"small",sx:{color:w.palette.success.main}}):D<0?(0,p.jsx)(c.A,{fontSize:"small",sx:{color:w.palette.error.main}}):(0,p.jsx)(d.A,{fontSize:"small",sx:{color:w.palette.text.secondary}})),(0,p.jsx)(i.A,{variant:"body2",sx:{ml:.5,color:(e=>e>0?w.palette.success.main:e<0?w.palette.error.main:w.palette.text.secondary)(F.comparison.changePercentage)},children:(S=F.comparison.changePercentage,`${S>=0?"+":""}${S.toFixed(2)}%`)})]})]})]})]}),v&&F.trend&&F.trend.data&&(0,p.jsx)("div",{style:{height:40,marginTop:8},children:(0,p.jsx)(x.u,{width:"100%",height:"100%",children:(0,p.jsx)(u.E,{data:F.trend.data,children:(0,p.jsx)(m.y,{dataKey:"value",fill:(null===(t=F.trend)||void 0===t?void 0:t.color)||"#1976d2",children:F.trend.data.map(((e,t)=>{const l=F.trend;return l?(0,p.jsx)(g.f,{fill:l.color||"#1976d2",fillOpacity:.6+t/l.data.length*.4},`cell-${t}`):null}))})})})}),b&&F.additionalInfo&&F.additionalInfo.length>0&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.A,{sx:{my:1}}),F.additionalInfo.map(((e,t)=>(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[(0,p.jsx)(i.A,{variant:"caption",color:"text.secondary",children:e.label}),(0,p.jsx)(i.A,{variant:"caption",fontWeight:"medium",children:"number"===typeof e.value?k(e.value,e.label):e.value})]},`info-${t}`)))]})]});var S,D}},86039:(e,t,l)=>{l.d(t,{eF:()=>C,ML:()=>w,LL:()=>k});l(65043);var r=l(85865),n=l(26240),a=l(81637),i=l(50108),s=l(877),o=l(87734),c=l(52185),d=l(6026),h=l(86150),x=l(21327),u=l(13839),m=l(82291),g=l(38643),p=l(87890),j=l(4240),y=l(17869),f=l(69525),A=l(70579);const v=["#0088FE","#00C49F","#FFBB28","#FF8042","#A569BD","#5DADE2","#48C9B0","#F4D03F"],b=e=>{let{active:t,payload:l,label:n}=e;return t&&l&&l.length?(0,A.jsxs)("div",{className:"custom-tooltip",style:{backgroundColor:"#fff",padding:"12px",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,A.jsx)(r.A,{variant:"subtitle2",style:{marginBottom:"8px"},children:n}),l.map(((e,t)=>{return(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[(0,A.jsx)("span",{style:{width:"12px",height:"12px",backgroundColor:e.color,marginRight:"8px",borderRadius:"50%",display:"inline-block"}}),(0,A.jsxs)(r.A,{variant:"body2",color:"text.secondary",children:[e.name,": ",e.value>=1e3?(n=e.value,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)):(l=e.value,new Intl.NumberFormat("en-US").format(l))]})]},`item-${t}`);var l,n}))]}):null},C=e=>{let{data:t,xKey:l,yKeys:m,height:g=300,loading:p=!1,error:j=null,title:y,showLegend:C=!0,showGrid:w=!0}=e;const k=(0,n.A)();return p?(0,A.jsx)("div",{className:"chart-loading-container",style:{height:g},children:(0,A.jsx)(a.A,{})}):j?(0,A.jsx)("div",{className:"chart-error-container",style:{height:g},children:(0,A.jsx)(r.A,{color:"error",children:j})}):t&&0!==t.length?(0,A.jsxs)("div",{className:"chart-container",style:{width:"100%",height:g},children:[y&&(0,A.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,children:y}),(0,A.jsx)(i.u,{children:(0,A.jsxs)(s.Q,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[w&&(0,A.jsx)(o.d,{strokeDasharray:"3 3"}),(0,A.jsx)(c.W,{dataKey:l,tick:{fill:k.palette.text.secondary,fontSize:12},tickFormatter:e=>{try{if(!e)return"";if("string"===typeof e&&e.includes("T")){const t=new Date(e);return isNaN(t.getTime())?String(e):(0,f.A)(t,"MMM dd")}return String(e)}catch(j){return console.warn("Error formatting date:",j),String(e||"")}}}),(0,A.jsx)(d.h,{tick:{fill:k.palette.text.secondary,fontSize:12},tickFormatter:e=>e>=1e3?`${(e/1e3).toFixed(0)}k`:e}),(0,A.jsx)(h.m,{content:(0,A.jsx)(b,{})}),C&&(0,A.jsx)(x.s,{}),m.map(((e,t)=>(0,A.jsx)(u.G,{type:"monotone",dataKey:e,stroke:v[t%v.length],fill:v[t%v.length],fillOpacity:.3,name:e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1")},e)))]})})]}):(0,A.jsx)("div",{className:"chart-empty-container",style:{height:g},children:(0,A.jsx)(r.A,{color:"text.secondary",children:"No data available"})})},w=e=>{let{data:t,xKey:l,yKeys:s,height:u=300,loading:p=!1,error:j=null,title:y,showLegend:C=!0,showGrid:w=!0,stacked:k=!1}=e;const F=(0,n.A)();return p?(0,A.jsx)("div",{className:"chart-loading-container",style:{height:u},children:(0,A.jsx)(a.A,{})}):j?(0,A.jsx)("div",{className:"chart-error-container",style:{height:u},children:(0,A.jsx)(r.A,{color:"error",children:j})}):t&&0!==t.length?(0,A.jsxs)("div",{className:"chart-container",style:{width:"100%",height:u},children:[y&&(0,A.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,children:y}),(0,A.jsx)(i.u,{children:(0,A.jsxs)(m.E,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[w&&(0,A.jsx)(o.d,{strokeDasharray:"3 3"}),(0,A.jsx)(c.W,{dataKey:l,tick:{fill:F.palette.text.secondary,fontSize:12},tickFormatter:e=>{try{if(!e)return"";if("string"===typeof e&&e.includes("T")){const t=new Date(e);return isNaN(t.getTime())?String(e):(0,f.A)(t,"MMM dd")}return String(e)}catch(j){return console.warn("Error formatting date:",j),String(e||"")}}}),(0,A.jsx)(d.h,{tick:{fill:F.palette.text.secondary,fontSize:12},tickFormatter:e=>e>=1e3?`${(e/1e3).toFixed(0)}k`:e}),(0,A.jsx)(h.m,{content:(0,A.jsx)(b,{})}),C&&(0,A.jsx)(x.s,{}),s.map(((e,t)=>(0,A.jsx)(g.y,{dataKey:e,fill:v[t%v.length],stackId:k?"stack":void 0,name:e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1")},e)))]})})]}):(0,A.jsx)("div",{className:"chart-empty-container",style:{height:u},children:(0,A.jsx)(r.A,{color:"text.secondary",children:"No data available"})})},k=e=>{let{data:t,nameKey:l,valueKey:n,height:s=300,loading:o=!1,error:c=null,title:d,showLegend:u=!0}=e;return o?(0,A.jsx)("div",{className:"chart-loading-container",style:{height:s},children:(0,A.jsx)(a.A,{})}):c?(0,A.jsx)("div",{className:"chart-error-container",style:{height:s},children:(0,A.jsx)(r.A,{color:"error",children:c})}):t&&0!==t.length?(0,A.jsxs)("div",{className:"chart-container",style:{width:"100%",height:s},children:[d&&(0,A.jsx)(r.A,{variant:"subtitle1",gutterBottom:!0,children:d}),(0,A.jsx)(i.u,{children:(0,A.jsxs)(p.r,{children:[(0,A.jsx)(j.F,{data:t,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:n,nameKey:l,label:e=>{let{name:t,percent:l}=e;return`${t}: ${(100*l).toFixed(0)}%`},children:t.map(((e,t)=>(0,A.jsx)(y.f,{fill:v[t%v.length]},`cell-${t}`)))}),u&&(0,A.jsx)(x.s,{}),(0,A.jsx)(h.m,{})]})})]}):(0,A.jsx)("div",{className:"chart-empty-container",style:{height:s},children:(0,A.jsx)(r.A,{color:"text.secondary",children:"No data available"})})}},89676:(e,t,l)=>{l.d(t,{A:()=>I});var r=l(65043),n=l(26240),a=l(96446),i=l(85865),s=l(83462),o=l(4219),c=l(77739),d=l(17392),h=l(35316),x=l(8591),u=l(63336),m=l(39336),g=l(8939),p=l(24056),j=l(29347),y=l(11906),f=l(74802),A=l(41132),v=l(47030),b=l(24176),C=l(57875),w=l(33458),k=l(15415),F=l(69525),S=l(88696),D=l(86039),z=l(70579);const I=e=>{let{open:t,onClose:l,drilldownData:I}=e;const $=(0,n.A)(),[L,K]=(0,r.useState)(0),M=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),B=e=>new Intl.NumberFormat("en-US").format(e),N=e=>`${e.toFixed(2)}%`,R=()=>{if(!I||!I.data||0===I.data.length)return[];const e=I.data[0];return Object.keys(e).map((t=>"id"===t?{id:t,label:"ID",sortable:!0,hidden:!0}:t.toLowerCase().includes("date")&&"string"===typeof e[t]&&e[t].includes("T")?{id:t,label:t.charAt(0).toUpperCase()+t.slice(1).replace(/([A-Z])/g," $1"),sortable:!0,format:e=>(0,F.A)(new Date(e),"MMM dd, yyyy")}:t.toLowerCase().includes("amount")||t.toLowerCase().includes("revenue")||t.toLowerCase().includes("deposit")||t.toLowerCase().includes("withdrawal")||t.toLowerCase().includes("bet")||t.toLowerCase().includes("win")||t.toLowerCase().includes("ggr")?{id:t,label:t.charAt(0).toUpperCase()+t.slice(1).replace(/([A-Z])/g," $1"),sortable:!0,type:"currency",format:e=>M(e)}:t.toLowerCase().includes("percentage")||t.toLowerCase().includes("rate")||t.toLowerCase().includes("ratio")?{id:t,label:t.charAt(0).toUpperCase()+t.slice(1).replace(/([A-Z])/g," $1"),sortable:!0,format:e=>N(e)}:{id:t,label:t.charAt(0).toUpperCase()+t.slice(1).replace(/([A-Z])/g," $1"),sortable:!0}))};return I?(0,z.jsxs)(s.A,{open:t,onClose:l,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh",maxHeight:"90vh"}},children:[(0,z.jsx)(o.A,{children:(0,z.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,z.jsxs)(i.A,{variant:"h6",children:[I.title,I.description&&(0,z.jsx)(c.A,{title:I.description,children:(0,z.jsx)(d.A,{size:"small",children:(0,z.jsx)(v.A,{fontSize:"small"})})})]}),(0,z.jsx)(d.A,{"aria-label":"close",onClick:l,sx:{color:$.palette.grey[500]},children:(0,z.jsx)(f.A,{})})]})}),(0,z.jsxs)(h.A,{dividers:!0,children:[(0,z.jsxs)(x.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,z.jsx)(x.Ay,{item:!0,xs:12,md:4,children:(0,z.jsxs)(u.A,{sx:{p:2},children:[(0,z.jsx)(i.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Category"}),(0,z.jsx)(i.A,{variant:"h5",children:I.category})]})}),(0,z.jsx)(x.Ay,{item:!0,xs:12,md:4,children:(0,z.jsxs)(u.A,{sx:{p:2},children:[(0,z.jsx)(i.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Value"}),(0,z.jsx)(i.A,{variant:"h5",children:"number"===typeof I.value&&I.value>=1e3?M(I.value):B(I.value)})]})}),(0,z.jsx)(x.Ay,{item:!0,xs:12,md:4,children:(0,z.jsxs)(u.A,{sx:{p:2},children:[(0,z.jsx)(i.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Records"}),(0,z.jsx)(i.A,{variant:"h5",children:I.data.length})]})})]}),(0,z.jsxs)(a.A,{sx:{mb:3},children:[(0,z.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Summary Metrics"}),(0,z.jsx)(x.Ay,{container:!0,spacing:2,children:(()=>{if(!I||!I.data||0===I.data.length)return[];const e=[],t=I.data;e.push({label:"Count",value:B(t.length)});const l=t[0];return Object.keys(l).forEach((r=>{if("number"===typeof l[r]){if("id"===r)return;const l=t.reduce(((e,t)=>e+(t[r]||0)),0);let n;if(r.toLowerCase().includes("amount")||r.toLowerCase().includes("revenue")||r.toLowerCase().includes("deposit")||r.toLowerCase().includes("withdrawal")||r.toLowerCase().includes("bet")||r.toLowerCase().includes("win")||r.toLowerCase().includes("ggr"))n=M(l);else if(r.toLowerCase().includes("percentage")||r.toLowerCase().includes("rate")||r.toLowerCase().includes("ratio")){const e=l/t.length;n=N(e)}else n=B(l);e.push({label:`Total ${r.charAt(0).toUpperCase()+r.slice(1).replace(/([A-Z])/g," $1")}`,value:n})}})),e})().map(((e,t)=>(0,z.jsx)(x.Ay,{item:!0,xs:6,sm:4,md:3,children:(0,z.jsxs)(a.A,{sx:{p:1},children:[(0,z.jsx)(i.A,{variant:"caption",color:"text.secondary",children:e.label}),(0,z.jsx)(i.A,{variant:"body1",fontWeight:"medium",children:e.value})]})},t)))})]}),(0,z.jsx)(m.A,{sx:{my:2}}),(0,z.jsx)(a.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,z.jsxs)(g.A,{value:L,onChange:(e,t)=>{K(t)},"aria-label":"drilldown tabs",children:[(0,z.jsx)(p.A,{icon:(0,z.jsx)(b.A,{}),label:"Table"}),(0,z.jsx)(p.A,{icon:(0,z.jsx)(C.A,{}),label:"Bar Chart"}),(0,z.jsx)(p.A,{icon:(0,z.jsx)(w.A,{}),label:"Pie Chart"}),(0,z.jsx)(p.A,{icon:(0,z.jsx)(k.A,{}),label:"Trend"})]})}),(0,z.jsx)(a.A,{sx:{mt:2},children:(()=>{if(!I||!I.data||0===I.data.length)return(0,z.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:300},children:(0,z.jsx)(i.A,{color:"text.secondary",children:"No data available"})});const e=I.data;if(1===L){const t=e[0],l=Object.keys(t).filter((e=>"number"===typeof t[e]&&"id"!==e));let r=Object.keys(t).find((e=>e.toLowerCase().includes("date")&&"string"===typeof t[e]));return r||(r=Object.keys(t).find((e=>"string"===typeof t[e]&&"id"!==e))),r&&0!==l.length?(0,z.jsx)(D.ML,{data:e,xKey:r,yKeys:l.slice(0,3),height:400}):(0,z.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:300},children:(0,z.jsx)(i.A,{color:"text.secondary",children:"Cannot generate chart from this data"})})}if(2===L){const t=e[0],l=Object.keys(t).find((e=>"string"===typeof t[e]&&"id"!==e&&!e.toLowerCase().includes("date"))),r=Object.keys(t).find((e=>"number"===typeof t[e]&&"id"!==e));if(!l||!r)return(0,z.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:300},children:(0,z.jsx)(i.A,{color:"text.secondary",children:"Cannot generate pie chart from this data"})});const n=e.reduce(((e,t)=>{const n=t[l]||"Unknown";return e[n]||(e[n]=0),e[n]+=t[r]||0,e}),{}),s=Object.entries(n).map((e=>{let[t,l]=e;return{name:t,value:l}}));return(0,z.jsx)(D.LL,{data:s,nameKey:"name",valueKey:"value",height:400})}if(3===L){const t=e[0],l=Object.keys(t).find((e=>e.toLowerCase().includes("date")&&"string"===typeof t[e])),r=Object.keys(t).filter((e=>"number"===typeof t[e]&&"id"!==e));if(!l||0===r.length)return(0,z.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:300},children:(0,z.jsx)(i.A,{color:"text.secondary",children:"Cannot generate area chart from this data"})});const n=[...e].sort(((e,t)=>new Date(e[l]).getTime()-new Date(t[l]).getTime()));return(0,z.jsx)(D.eF,{data:n,xKey:l,yKeys:r.slice(0,3),height:400})}return(0,z.jsx)(S.zZ,{columns:R(),data:e,idField:"id",features:{sorting:!0,filtering:{enabled:!0,quickFilter:!0},pagination:{enabled:!0,defaultPageSize:10,pageSizeOptions:[10,25,50]},columnManagement:{enabled:!0,allowReordering:!0,allowHiding:!0}}})})()})]}),(0,z.jsxs)(j.A,{children:[(0,z.jsx)(y.A,{startIcon:(0,z.jsx)(A.A,{}),onClick:()=>{console.log("Export data",I)},children:"Export"}),(0,z.jsx)(y.A,{onClick:l,children:"Close"})]})]}):null}}}]);
//# sourceMappingURL=1364.bcd3ccf8.chunk.js.map
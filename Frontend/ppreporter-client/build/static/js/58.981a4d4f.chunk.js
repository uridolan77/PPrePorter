"use strict";(self.webpackChunkppreporter_client=self.webpackChunkppreporter_client||[]).push([[58],{46058:(t,e,a)=>{a.r(e),a.d(e,{default:()=>k});var s=a(65043),l=a(35475),i=a(19252),o=a(96446),r=a(85865),n=a(11906),c=a(63336),d=a(68903),A=a(53193),h=a(18356),g=a(69285),x=a(32143),y=a(12110),m=a(26494),u=a(14194),j=a(81637),I=a(79650),D=a(71806),G=a(84882),p=a(28076),C=a(10039),f=a(73460),S=a(29598),T=a(82232),b=a(58390),E=a(69525),L=a(93418),v=a(54235),N=a(28242),O=a(48625),R=a(41132),P=a(24176),w=a(70579);const k=()=>{const[t,e]=(0,s.useState)(new Date("2023-05-01")),[k,F]=(0,s.useState)(new Date("2023-05-05")),[Y,_]=(0,s.useState)(""),[M,U]=(0,s.useState)([]),[W,B]=(0,s.useState)([]),[K,$]=(0,s.useState)(!1),[z,V]=(0,s.useState)(null),[q,H]=(0,s.useState)({totalRegistrations:0,totalFTD:0,totalDeposits:0,totalCashouts:0,totalGGR:0});(0,s.useEffect)((()=>{(async()=>{try{console.log("[DAILY ACTIONS PAGE] Fetching metadata");if(L.Gv.USE_MOCK_DATA_FOR_UI_TESTING||"true"===localStorage.getItem("USE_MOCK_DATA_FOR_UI_TESTING")){console.log("[DAILY ACTIONS PAGE] Using mock data for metadata");const t=await a.e(800).then(a.bind(a,87800)),e=t.default.getMockData("/reports/daily-actions/metadata");if(e&&e.whiteLabels)return console.log("[DAILY ACTIONS PAGE] Got mock white labels:",e.whiteLabels),void U(e.whiteLabels)}const t=await v.A.getMetadata();console.log("[DAILY ACTIONS PAGE] Got white labels from service:",t.whiteLabels),U(t.whiteLabels||[])}catch(t){console.error("[DAILY ACTIONS PAGE] Error fetching metadata:",t),V("Failed to load metadata. Please try again later.")}})()}),[]),(0,s.useEffect)((()=>{const t=setTimeout((()=>{(async()=>{console.log("[DAILY ACTIONS PAGE] Fetching initial data"),await J()})()}),100);return()=>clearTimeout(t)}),[]);const J=async()=>{$(!0),V(null);try{const l=(0,E.A)(t,"yyyy-MM-dd"),i={startDate:l,endDate:(0,E.A)(k,"yyyy-MM-dd")};Y&&""!==Y?(console.log(`[DAILY ACTIONS PAGE] Filtering by white label ID: ${Y}`),i.whiteLabelId=Y):console.log("[DAILY ACTIONS PAGE] No white label filter applied"),console.log("[DAILY ACTIONS PAGE] Starting data fetch with filters:",i);try{console.log("[DAILY ACTIONS PAGE] Checking if mock data is enabled");if(L.Gv.USE_MOCK_DATA_FOR_UI_TESTING||"true"===localStorage.getItem("USE_MOCK_DATA_FOR_UI_TESTING")){console.log("[DAILY ACTIONS PAGE] Mock data is enabled, trying to get mock data directly");const t=(await a.e(800).then(a.bind(a,87800))).default;console.log("[DAILY ACTIONS PAGE] Getting mock summary data directly with filters:",i);const e=t.getMockData("/reports/daily-actions/summary",i);if(e&&e.dailyActions){console.log("[DAILY ACTIONS PAGE] Got mock summary data directly:",e),console.log("[DAILY ACTIONS PAGE] Daily actions from mock data:",e.dailyActions),B(e.dailyActions||[]);const t={totalRegistrations:e.totalRegistrations||0,totalFTD:e.totalFTD||0,totalDeposits:e.totalDeposits||0,totalCashouts:e.totalCashouts||0,totalGGR:e.totalGGR||0};return H(t),void $(!1)}{console.log("[DAILY ACTIONS PAGE] No mock summary data found or no daily actions in the response, trying regular mock data");const e=t.getMockData("/reports/daily-actions/data",i);if(e){if(console.log("[DAILY ACTIONS PAGE] Got mock regular data directly:",e),e.dailyActions&&e.dailyActions.length>0?(console.log("[DAILY ACTIONS PAGE] Using dailyActions from mock data:",e.dailyActions),B(e.dailyActions)):e.data&&e.data.length>0?(console.log("[DAILY ACTIONS PAGE] Using data field from mock data:",e.data),B(e.data)):(console.log("[DAILY ACTIONS PAGE] No data found in mock response"),B([])),e.summary)H(e.summary);else{const t=e.dailyActions||e.data||[],a={totalRegistrations:e.totalRegistrations||t.reduce(((t,e)=>t+(e.registrations||0)),0),totalFTD:e.totalFTD||t.reduce(((t,e)=>t+(e.ftd||0)),0),totalDeposits:e.totalDeposits||t.reduce(((t,e)=>t+(e.deposits||0)),0),totalCashouts:e.totalCashouts||t.reduce(((t,e)=>t+(e.paidCashouts||0)),0),totalGGR:e.totalGGR||t.reduce(((t,e)=>t+(e.totalGGR||0)),0)};H(a)}return void $(!1)}}}}catch(e){console.error("[DAILY ACTIONS PAGE] Error getting mock data directly:",e)}try{console.log("[DAILY ACTIONS PAGE] Fetching summary data with filters:",i);const t=await v.A.getSummaryData(i);if(console.log("[DAILY ACTIONS PAGE] Summary response:",t),!t||!t.dailyActions)throw new Error("Invalid summary data format");{B(t.dailyActions);const e={totalRegistrations:t.totalRegistrations||0,totalFTD:t.totalFTD||0,totalDeposits:t.totalDeposits||0,totalCashouts:t.totalCashouts||0,totalGGR:t.totalGGR||0};H(e)}}catch(s){console.error("[DAILY ACTIONS PAGE] Error fetching summary data:",s),console.log("[DAILY ACTIONS PAGE] Falling back to regular data fetch");const t=await v.A.getData(i);console.log("[DAILY ACTIONS PAGE] Regular data response:",t);const e=t.data||[];if(B(e),t.summary)H(t.summary);else{const t={totalRegistrations:e.reduce(((t,e)=>t+(e.registrations||0)),0),totalFTD:e.reduce(((t,e)=>t+(e.ftd||0)),0),totalDeposits:e.reduce(((t,e)=>t+(e.deposits||0)),0),totalCashouts:e.reduce(((t,e)=>t+(e.paidCashouts||0)),0),totalGGR:e.reduce(((t,e)=>t+(e.totalGGR||0)),0)};H(t)}}}catch(l){console.error("[DAILY ACTIONS PAGE] Error fetching daily actions:",l),V("Failed to load daily actions data. Please try again later.")}finally{$(!1)}},Q=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(t);return(0,w.jsxs)(i.A,{maxWidth:"xl",children:[(0,w.jsxs)(o.A,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,w.jsxs)(o.A,{children:[(0,w.jsx)(r.A,{variant:"h4",gutterBottom:!0,children:"Daily Actions Report"}),(0,w.jsx)(r.A,{variant:"body1",color:"text.secondary",children:"View and analyze daily player activities, deposits, and gaming revenue"})]}),(0,w.jsx)(n.A,{variant:"contained",color:"primary",component:l.N_,to:"/reports/daily-actions/advanced",startIcon:(0,w.jsx)(N.A,{}),children:"Advanced Report"})]}),(0,w.jsxs)(c.A,{sx:{p:3,mb:4},children:[(0,w.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,w.jsx)(N.A,{sx:{mr:1}}),(0,w.jsx)(r.A,{variant:"h6",children:"Filters"})]}),(0,w.jsxs)(d.Ay,{container:!0,spacing:3,children:[(0,w.jsx)(d.Ay,{item:!0,xs:12,md:3,children:(0,w.jsx)(b.$,{dateAdapter:T.h,children:(0,w.jsx)(S.l,{label:"Start Date",value:t,onChange:t=>t&&e(t),slotProps:{textField:{fullWidth:!0}}})})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,md:3,children:(0,w.jsx)(b.$,{dateAdapter:T.h,children:(0,w.jsx)(S.l,{label:"End Date",value:k,onChange:t=>t&&F(t),slotProps:{textField:{fullWidth:!0}}})})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,md:3,children:(0,w.jsxs)(A.A,{fullWidth:!0,children:[(0,w.jsx)(h.A,{children:"White Label"}),(0,w.jsxs)(g.A,{value:Y,onChange:t=>{console.log(`[DAILY ACTIONS PAGE] White label changed to: ${t.target.value}`),_(t.target.value)},label:"White Label",children:[(0,w.jsx)(x.A,{value:"",children:"All White Labels"}),M&&M.length>0?M.map((t=>(0,w.jsx)(x.A,{value:t.id,children:t.name},t.id))):[(0,w.jsx)(x.A,{value:"casino-royale",children:"Casino Royale"},"casino-royale"),(0,w.jsx)(x.A,{value:"lucky-spin",children:"Lucky Spin"},"lucky-spin"),(0,w.jsx)(x.A,{value:"golden-bet",children:"Golden Bet"},"golden-bet")]]})]})}),(0,w.jsxs)(d.Ay,{item:!0,xs:12,md:3,sx:{display:"flex",alignItems:"center"},children:[(0,w.jsx)(n.A,{variant:"contained",color:"primary",startIcon:(0,w.jsx)(O.A,{}),onClick:()=>{console.log("[DAILY ACTIONS PAGE] Apply filters button clicked"),console.log("[DAILY ACTIONS PAGE] Current filters:",{startDate:(0,E.A)(t,"yyyy-MM-dd"),endDate:(0,E.A)(k,"yyyy-MM-dd"),whiteLabelId:Y}),J()},sx:{mr:2},children:"Apply Filters"}),(0,w.jsx)("span",{children:(0,w.jsx)(n.A,{variant:"outlined",startIcon:(0,w.jsx)(R.A,{}),disabled:K||0===W.length,children:"Export"})})]})]})]}),(0,w.jsxs)(d.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,w.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,w.jsx)(y.A,{children:(0,w.jsxs)(m.A,{children:[(0,w.jsx)(r.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Registrations"}),(0,w.jsx)(r.A,{variant:"h5",children:q.totalRegistrations.toLocaleString()})]})})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,w.jsx)(y.A,{children:(0,w.jsxs)(m.A,{children:[(0,w.jsx)(r.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"First Time Depositors"}),(0,w.jsx)(r.A,{variant:"h5",children:q.totalFTD.toLocaleString()})]})})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,w.jsx)(y.A,{children:(0,w.jsxs)(m.A,{children:[(0,w.jsx)(r.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Deposits"}),(0,w.jsx)(r.A,{variant:"h5",children:Q(q.totalDeposits)})]})})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,w.jsx)(y.A,{children:(0,w.jsxs)(m.A,{children:[(0,w.jsx)(r.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Cashouts"}),(0,w.jsx)(r.A,{variant:"h5",children:Q(q.totalCashouts)})]})})}),(0,w.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:2.4,children:(0,w.jsx)(y.A,{children:(0,w.jsxs)(m.A,{children:[(0,w.jsx)(r.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Total GGR"}),(0,w.jsx)(r.A,{variant:"h5",children:Q(q.totalGGR)})]})})})]}),(0,w.jsxs)(c.A,{sx:{p:3},children:[(0,w.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,w.jsx)(P.A,{sx:{mr:1}}),(0,w.jsx)(r.A,{variant:"h6",children:"Daily Actions Data"})]}),z&&(0,w.jsx)(u.A,{severity:"error",sx:{mb:3},children:z}),K?(0,w.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,w.jsx)(j.A,{})}):0===W.length?(0,w.jsx)(u.A,{severity:"info",children:'No data available for the selected filters. Try adjusting your filters or click "Apply Filters" to load data.'}):(0,w.jsx)(I.A,{children:(0,w.jsxs)(D.A,{children:[(0,w.jsx)(G.A,{children:(0,w.jsxs)(p.A,{children:[(0,w.jsx)(C.A,{children:"Date"}),(0,w.jsx)(C.A,{children:"White Label"}),(0,w.jsx)(C.A,{align:"right",children:"Registrations"}),(0,w.jsx)(C.A,{align:"right",children:"FTD"}),(0,w.jsx)(C.A,{align:"right",children:"Deposits"}),(0,w.jsx)(C.A,{align:"right",children:"Cashouts"}),(0,w.jsx)(C.A,{align:"right",children:"Casino GGR"}),(0,w.jsx)(C.A,{align:"right",children:"Sports GGR"}),(0,w.jsx)(C.A,{align:"right",children:"Live GGR"}),(0,w.jsx)(C.A,{align:"right",children:"Total GGR"})]})}),(0,w.jsx)(f.A,{children:W.map((t=>(0,w.jsxs)(p.A,{children:[(0,w.jsx)(C.A,{children:(0,E.A)(new Date(t.date),"MMM dd, yyyy")}),(0,w.jsx)(C.A,{children:t.whiteLabelName}),(0,w.jsx)(C.A,{align:"right",children:t.registrations}),(0,w.jsx)(C.A,{align:"right",children:t.ftd}),(0,w.jsx)(C.A,{align:"right",children:Q(t.deposits)}),(0,w.jsx)(C.A,{align:"right",children:Q(t.paidCashouts)}),(0,w.jsx)(C.A,{align:"right",children:Q(t.ggrCasino)}),(0,w.jsx)(C.A,{align:"right",children:Q(t.ggrSport)}),(0,w.jsx)(C.A,{align:"right",children:Q(t.ggrLive)}),(0,w.jsx)(C.A,{align:"right",children:Q(t.totalGGR)})]},t.id)))})]})})]})]})}}}]);
//# sourceMappingURL=58.981a4d4f.chunk.js.map
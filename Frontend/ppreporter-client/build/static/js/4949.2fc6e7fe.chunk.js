"use strict";(self.webpackChunkppreporter_client=self.webpackChunkppreporter_client||[]).push([[4949],{352:(e,t,a)=>{a.d(t,{A:()=>M});var s=a(65043),i=a(85865),l=a(43845),n=a(53193),r=a(18356),o=a(72221),d=a(74050),c=a(32143),x=a(81637),h=a(81673),m=a(67784),u=a(51787),p=a(17392),g=a(11906),A=a(51962),y=a(48734),j=a(77739),v=a(66360),b=a(10155),f=a(47030),S=a(70579);const M=e=>{let{options:t=[],value:a=[],onChange:M,label:w="",placeholder:C="Select items",disabled:P=!1,required:R=!1,error:D="",helperText:E="",maxMenuHeight:I=300,searchable:G=!0,showSelectAllOption:W=!0,renderValue:Y,size:F="small",width:z,id:U,name:k,sx:V,className:$,style:B,loading:L=!1,fullWidth:N=!0}=e;const[O,T]=(0,s.useState)(""),q=t.filter((e=>e.label.toLowerCase().includes(O.toLowerCase())));if(L)return(0,S.jsxs)(n.A,{fullWidth:!0,size:F,error:!!D,disabled:!0,required:R,sx:{width:z,...V},className:$,style:B,children:[w&&(0,S.jsx)(r.A,{id:`${U||"multi-select"}-label`,children:w}),(0,S.jsx)(o.A,{labelId:`${U||"multi-select"}-label`,id:U||"multi-select",name:k,multiple:!0,value:[],input:(0,S.jsx)(d.A,{label:w}),renderValue:()=>(0,S.jsx)(i.A,{color:"text.secondary",children:"Loading options..."}),children:(0,S.jsx)(c.A,{disabled:!0,children:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:8},children:[(0,S.jsx)(x.A,{size:20,style:{marginRight:8}}),(0,S.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Loading options..."})]})})}),E&&(0,S.jsx)(h.A,{children:E})]});if(!t||0===t.length)return(0,S.jsxs)(n.A,{fullWidth:!0,size:F,error:!!D,disabled:!0,required:R,sx:{width:z,...V},className:$,style:B,children:[w&&(0,S.jsx)(r.A,{id:`${U||"multi-select"}-label`,children:w}),(0,S.jsx)(o.A,{labelId:`${U||"multi-select"}-label`,id:U||"multi-select",name:k,multiple:!0,value:[],input:(0,S.jsx)(d.A,{label:w}),renderValue:()=>(0,S.jsx)(i.A,{color:"text.secondary",children:"No options available"}),children:(0,S.jsx)(c.A,{disabled:!0,children:(0,S.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"No options available"})})}),E&&(0,S.jsx)(h.A,{children:E})]});return(0,S.jsxs)(n.A,{fullWidth:!0,size:F,error:!!D,disabled:P,required:R,sx:{width:z||"100%",minWidth:"100%",...V},className:$,style:B,children:[w&&(0,S.jsx)(r.A,{id:`${U||"multi-select"}-label`,children:w}),(0,S.jsxs)(o.A,{labelId:`${U||"multi-select"}-label`,id:U||"multi-select",name:k,multiple:!0,value:a,onChange:e=>{const t=e.target.value;M(t)},input:(0,S.jsx)(d.A,{label:w}),renderValue:Y||(e=>e&&0!==e.length?(0,S.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:e.map((e=>{const s=t.find((t=>t.value.toString()===e.toString()));return(0,S.jsx)(l.A,{label:s?s.label:e,size:"small",onDelete:(i=e,e=>{e.preventDefault(),e.stopPropagation();const t=a.filter((e=>e.toString()!==i.toString()));M(t)}),onClick:e=>e.stopPropagation(),deleteIcon:(0,S.jsx)(b.A,{fontSize:"small",onMouseDown:e=>e.stopPropagation()}),sx:{"& .MuiChip-deleteIcon":{display:"none",opacity:.7,"&:hover":{opacity:1}},"&:hover .MuiChip-deleteIcon":{display:"block"}}},e);var i}))}):(0,S.jsx)(i.A,{color:"text.secondary",children:C})),onClose:()=>{T("")},onClick:e=>{e.target instanceof HTMLElement&&(e.target.classList.contains("MuiChip-root")||e.target.classList.contains("MuiChip-label")||e.target.classList.contains("MuiChip-deleteIcon")||e.target.closest(".MuiChip-deleteIcon"))&&(e.preventDefault(),e.stopPropagation())},MenuProps:{PaperProps:{style:{maxHeight:I}}},children:[(0,S.jsxs)("div",{style:{position:"sticky",top:0,backgroundColor:"#fff",zIndex:2,borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},children:[G&&(0,S.jsx)("div",{style:{padding:8},children:(0,S.jsx)(m.A,{size:"small",placeholder:"Search...",fullWidth:!0,value:O,onChange:e=>{T(e.target.value)},onClick:e=>e.stopPropagation(),InputProps:{startAdornment:(0,S.jsx)(u.A,{position:"start",children:(0,S.jsx)(v.A,{fontSize:"small"})}),endAdornment:O?(0,S.jsx)(u.A,{position:"end",children:(0,S.jsx)(p.A,{size:"small",onClick:e=>{e.stopPropagation(),T("")},children:(0,S.jsx)(b.A,{fontSize:"small"})})}):null}})}),W&&q.length>0&&(0,S.jsxs)("div",{style:{paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4,display:"flex",justifyContent:"space-between"},children:[(0,S.jsx)(g.A,{size:"small",onClick:()=>{const e=q.filter((e=>!e.disabled)).map((e=>e.value));M(e)},children:"Select All"}),(0,S.jsx)(g.A,{size:"small",onClick:()=>{M([])},children:"Clear All"})]})]}),0===q.length&&(0,S.jsx)(c.A,{disabled:!0,children:(0,S.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"No options found"})}),q.map((e=>(0,S.jsxs)(c.A,{value:e.value,disabled:e.disabled,sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(A.A,{checked:a.some((t=>t.toString()===e.value.toString()))}),(0,S.jsx)(y.A,{primary:e.label,secondary:e.group})]}),e.description&&(0,S.jsx)(j.A,{title:e.description,arrow:!0,children:(0,S.jsx)(f.A,{fontSize:"small",color:"action",style:{marginLeft:8}})})]},e.value)))]}),(E||D)&&(0,S.jsx)(h.A,{children:D||E})]})}},36160:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(31623);const i={getGames:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{console.log("[GAMES_SERVICE] Using API endpoint: /api/games");return(await s.A.get("/api/games",{params:e})).data}catch(t){throw t}},getGameById:async e=>{try{console.log(`[GAMES_SERVICE] Using API endpoint: /api/games/${e}`);return(await s.A.get(`/api/games/${e}`)).data}catch(t){throw t}},getGamePerformance:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{console.log(`[GAMES_SERVICE] Using API endpoint: /api/games/${e}/performance`);return(await s.A.get(`/api/games/${e}/performance`,{params:t})).data}catch(a){throw a}},getTopGames:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{console.log("[GAMES_SERVICE] Using API endpoint: /api/games/top");return(await s.A.get("/api/games/top",{params:e})).data}catch(t){throw t}},getGameCategories:async()=>{try{console.log("[GAMES_SERVICE] Using API endpoint: /api/games/categories");return(await s.A.get("/api/games/categories")).data}catch(e){throw e}},getGameProviders:async()=>{try{console.log("[GAMES_SERVICE] Using API endpoint: /api/games/providers");return(await s.A.get("/api/games/providers")).data}catch(e){throw e}},getGamePlayerDemographics:async e=>{try{console.log(`[GAMES_SERVICE] Using API endpoint: /api/games/${e}/player-demographics`);return(await s.A.get(`/api/games/${e}/player-demographics`)).data}catch(t){throw t}},getGameSessions:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{console.log(`[GAMES_SERVICE] Using API endpoint: /api/games/${e}/sessions`);return(await s.A.get(`/api/games/${e}/sessions`,{params:t})).data}catch(a){throw a}},exportGames:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{console.log("[GAMES_SERVICE] Using API endpoint: /api/games/export");return(await s.A.get("/api/games/export",{params:e,responseType:"blob"})).data}catch(t){throw t}}}},54949:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var s=a(65043),i=a(35475),l=a(85865),n=a(43845),r=a(19252),o=a(11906),d=a(63336),c=a(8591),x=a(30279),h=a(39336),m=a(67784),u=a(53193),p=a(18356),g=a(72221),A=a(32143),y=a(12110),j=a(26494),v=a(67254),b=a(83462),f=a(4219),S=a(35316),M=a(77739),w=a(10611),C=a(81637),P=a(29347),R=a(88696),D=a(92317),E=a(352),I=a(69525),G=a(58390),W=a(40672),Y=a(82746),F=a(2830),z=a(18728),U=a(28242),k=a(48625),V=a(24176),$=a(21337),B=a(85473),L=a(37991),N=a(4721),O=a(36160),T=a(70579);const q=()=>{const[e,t]=(0,s.useState)(new Date((new Date).setDate((new Date).getDate()-30))),[a,q]=(0,s.useState)(new Date),[_,H]=(0,s.useState)([]),[J,X]=(0,s.useState)([]),[Z,K]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)({}),[te,ae]=(0,s.useState)([]),[se,ie]=(0,s.useState)(!1),[le,ne]=(0,s.useState)(null),[re,oe]=(0,s.useState)(0),[de,ce]=(0,s.useState)(0),[xe,he]=(0,s.useState)(10),[me,ue]=(0,s.useState)("revenue"),[pe,ge]=(0,s.useState)("desc"),[Ae,ye]=(0,s.useState)([]),[je,ve]=(0,s.useState)([]),[be,fe]=(0,s.useState)([]),[Se,Me]=(0,s.useState)([]),[we,Ce]=(0,s.useState)(null),[Pe,Re]=(0,s.useState)(!1),[De,Ee]=(0,s.useState)(null),Ie=[{id:"name",label:"Game Name",format:(e,t)=>(0,T.jsxs)(F.A,{sx:(0,z.MY)({display:"flex",alignItems:"center"}),children:[t.thumbnailUrl&&(0,T.jsx)(F.A,{component:"img",src:t.thumbnailUrl,alt:t.name,sx:(0,z.MY)({width:40,height:40,mr:2,borderRadius:1})}),(0,T.jsx)(l.A,{variant:"body2",fontWeight:"medium",children:t.name})]}),sortable:!0,width:200},{id:"provider",label:"Provider",type:"text",sortable:!0,width:150},{id:"category",label:"Category",type:"text",sortable:!0,width:150},{id:"rtp",label:"RTP",type:"percentage",sortable:!0,width:100},{id:"volatility",label:"Volatility",format:(e,t)=>{const a=t.volatility;return(0,T.jsx)(n.A,{label:a?a.charAt(0).toUpperCase()+a.slice(1):"N/A",size:"small",color:"high"===a?"error":"medium"===a?"warning":"low"===a?"success":"default"})},sortable:!0,width:120},{id:"revenue",label:"Revenue",type:"currency",sortable:!0,width:120},{id:"uniquePlayers",label:"Players",type:"number",sortable:!0,width:100},{id:"sessions",label:"Sessions",type:"number",sortable:!0,width:100},{id:"winRate",label:"Win Rate",type:"percentage",sortable:!0,width:100},{id:"status",label:"Status",format:(e,t)=>(0,T.jsx)(n.A,{label:t.status?t.status.charAt(0).toUpperCase()+t.status.slice(1):"N/A",size:"small",color:"active"===t.status?"success":"inactive"===t.status?"default":"maintenance"===t.status?"warning":"primary"}),sortable:!0,width:120}],Ge=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);(0,s.useEffect)((()=>{We()}),[]),(0,s.useEffect)((()=>{Ye()}),[de,xe,me,pe]);const We=async()=>{try{ie(!0),ne(null);const e=await O.A.getGameProviders();ye(e);const t=e.map((e=>({value:e.id,label:e.name})));fe(t);const a=await O.A.getGameCategories();ve(a);const s=a.map((e=>({value:e.id,label:e.name})));Me(s)}catch(e){console.error("[GAMES PAGE] Error fetching metadata:",e),ne("Failed to load metadata. Please try again later.")}finally{ie(!1)}},Ye=async()=>{try{ie(!0),ne(null);const s={startDate:(0,I.A)(e,"yyyy-MM-dd"),endDate:(0,I.A)(a,"yyyy-MM-dd"),provider:_.length>0?_.join(","):void 0,category:J.length>0?J.join(","):void 0,page:de+1,limit:xe,sortBy:me,sortOrder:pe};Object.keys(Q).length>0&&(console.log("[GAMES PAGE] Adding advanced filters:",Q),Q.name&&(s.search=Q.name),Q.minRtp&&(s.minRtp=Q.minRtp),Q.maxRtp&&(s.maxRtp=Q.maxRtp),Q.volatility&&Q.volatility.length>0&&(s.volatility=Q.volatility.join(",")),Q.status&&Q.status.length>0&&(s.status=Q.status.join(",")),Q.releaseDate&&(s.releaseDateStart=(0,I.A)(Q.releaseDate,"yyyy-MM-dd")),Q.features&&Q.features.length>0&&(s.features=Q.features.join(",")),Q.tags&&Q.tags.length>0&&(s.tags=Q.tags.join(",")));const i=await O.A.getGames(s);var t;if(i&&i.data)ae(i.data),oe((null===(t=i.meta)||void 0===t?void 0:t.totalCount)||i.data.length);else ae([]),oe(0)}catch(s){console.error("[GAMES PAGE] Error fetching games data:",s),ne("Failed to load games data. Please try again later."),ae([]),oe(0)}finally{ie(!1)}},Fe=(e,t)=>{ee((a=>({...a,[e]:t})))},ze=()=>{Re(!1),Ce(null),Ee(null)},Ue={totalGames:te.length,totalRevenue:te.reduce(((e,t)=>e+(t.revenue||0)),0),totalPlayers:te.reduce(((e,t)=>e+(t.uniquePlayers||0)),0),totalSessions:te.reduce(((e,t)=>e+(t.sessions||0)),0),avgRtp:te.length>0?te.reduce(((e,t)=>e+(t.rtp||0)),0)/te.length:0,avgWinRate:te.length>0?te.reduce(((e,t)=>e+(t.winRate||0)),0)/te.length:0};return(0,T.jsxs)(r.A,{maxWidth:"xl",children:[(0,T.jsxs)(F.A,{sx:(0,z.MY)({mb:4,display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),children:[(0,T.jsxs)(F.A,{children:[(0,T.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:"Games Report"}),(0,T.jsx)(l.A,{variant:"body1",color:"text.secondary",children:"View and analyze game performance, popularity, and revenue metrics"})]}),(0,T.jsx)(o.A,{variant:"contained",color:"primary",component:i.N_,to:"/reports/games/advanced",startIcon:(0,T.jsx)(U.A,{}),children:"Advanced Report"})]}),(0,T.jsxs)(d.A,{sx:{p:3,mb:4},children:[(0,T.jsxs)(F.A,{sx:(0,z.MY)({display:"flex",alignItems:"center",justifyContent:"space-between",mb:2}),children:[(0,T.jsxs)(F.A,{sx:(0,z.MY)({display:"flex",alignItems:"center"}),children:[(0,T.jsx)(U.A,{sx:(0,z.MY)({mr:1})}),(0,T.jsx)(l.A,{variant:"h6",children:"Filters"})]}),(0,T.jsx)(o.A,{color:"primary",onClick:()=>{K(!Z)},endIcon:Z?(0,T.jsx)(B.A,{}):(0,T.jsx)($.A,{}),children:Z?"Hide Advanced Filters":"Show Advanced Filters"})]}),(0,T.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,T.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,T.jsx)(G.$,{dateAdapter:W.h,children:(0,T.jsx)(Y.l,{label:"Start Date",value:e,onChange:e=>e&&t(e),slotProps:{textField:{fullWidth:!0}}})})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,T.jsx)(G.$,{dateAdapter:W.h,children:(0,T.jsx)(Y.l,{label:"End Date",value:a,onChange:e=>e&&q(e),slotProps:{textField:{fullWidth:!0}}})})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,T.jsx)(E.A,{label:"Providers",options:be,value:_,onChange:e=>{H(e.map((e=>e.toString())))},placeholder:"Select Providers",searchable:!0,showSelectAllOption:!0,width:"100%",sx:{width:"100%","& .MuiOutlinedInput-root":{width:"100%",height:"56px"},"& .MuiSelect-select":{height:"56px",display:"flex",alignItems:"center"}}})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,T.jsx)(E.A,{label:"Categories",options:Se,value:J,onChange:e=>{X(e.map((e=>e.toString())))},placeholder:"Select Categories",searchable:!0,showSelectAllOption:!0,width:"100%",sx:{width:"100%","& .MuiOutlinedInput-root":{width:"100%",height:"56px"},"& .MuiSelect-select":{height:"56px",display:"flex",alignItems:"center"}}})})]}),(0,T.jsx)(x.A,{in:Z,timeout:"auto",unmountOnExit:!0,children:(0,T.jsxs)(F.A,{sx:(0,z.MY)({mt:3}),children:[(0,T.jsx)(h.A,{sx:(0,z.MY)({mb:3})}),(0,T.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,children:"Advanced Filters"}),(0,T.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,T.jsx)(c.Ay,{item:!0,xs:12,children:(0,T.jsx)(l.A,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"Game Information"})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,T.jsx)(m.A,{label:"Game Name",fullWidth:!0,value:Q.name||"",onChange:e=>Fe("name",e.target.value),placeholder:"Search by name"})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,T.jsxs)(u.A,{fullWidth:!0,children:[(0,T.jsx)(p.A,{children:"Status"}),(0,T.jsx)(g.A,{multiple:!0,value:Q.status||[],onChange:e=>Fe("status",e.target.value),label:"Status",renderValue:e=>(0,T.jsx)(F.A,{sx:(0,z.MY)({display:"flex",flexWrap:"wrap",gap:.5}),children:e.map((e=>(0,T.jsx)(n.A,{label:e,size:"small"},e)))}),children:["active","inactive","maintenance"].map((e=>(0,T.jsx)(A.A,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))})]})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,T.jsxs)(u.A,{fullWidth:!0,children:[(0,T.jsx)(p.A,{children:"Volatility"}),(0,T.jsx)(g.A,{multiple:!0,value:Q.volatility||[],onChange:e=>Fe("volatility",e.target.value),label:"Volatility",renderValue:e=>(0,T.jsx)(F.A,{sx:(0,z.MY)({display:"flex",flexWrap:"wrap",gap:.5}),children:e.map((e=>(0,T.jsx)(n.A,{label:e,size:"small"},e)))}),children:["low","medium","high"].map((e=>(0,T.jsx)(A.A,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))})]})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,T.jsx)(G.$,{dateAdapter:W.h,children:(0,T.jsx)(Y.l,{label:"Release Date",value:Q.releaseDate||null,onChange:e=>Fe("releaseDate",e),slotProps:{textField:{fullWidth:!0}}})})}),(0,T.jsxs)(c.Ay,{item:!0,xs:12,md:6,children:[(0,T.jsx)(l.A,{variant:"body2",gutterBottom:!0,children:"RTP Range (%)"}),(0,T.jsxs)(F.A,{sx:(0,z.MY)({display:"flex",alignItems:"center",gap:2}),children:[(0,T.jsx)(m.A,{label:"Min",type:"number",fullWidth:!0,value:Q.minRtp||"",onChange:e=>Fe("minRtp",e.target.value),InputProps:{inputProps:{min:0,max:100}}}),(0,T.jsx)(l.A,{variant:"body1",children:"to"}),(0,T.jsx)(m.A,{label:"Max",type:"number",fullWidth:!0,value:Q.maxRtp||"",onChange:e=>Fe("maxRtp",e.target.value),InputProps:{inputProps:{min:0,max:100}}})]})]}),(0,T.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(m.A,{label:"Features",placeholder:"Enter features (comma separated)",fullWidth:!0,value:Q.features||"",onChange:e=>Fe("features",e.target.value.split(",").map((e=>e.trim()))),helperText:"E.g., free spins, bonus rounds, multipliers"})})]}),(0,T.jsx)(F.A,{sx:(0,z.MY)({display:"flex",justifyContent:"flex-end",mt:3}),children:(0,T.jsx)(o.A,{variant:"outlined",onClick:()=>{ee({})},sx:{mr:2},children:"Reset Advanced Filters"})})]})}),(0,T.jsx)(F.A,{sx:(0,z.MY)({display:"flex",justifyContent:"flex-end",alignItems:"center",mt:3}),children:(0,T.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,T.jsx)(k.A,{}),onClick:()=>{console.log("[GAMES PAGE] Apply filters button clicked");const t={startDate:(0,I.A)(e,"yyyy-MM-dd"),endDate:(0,I.A)(a,"yyyy-MM-dd"),selectedProviders:_,selectedCategories:J,...Q};console.log("[GAMES PAGE] Current filters:",t),ce(0),Ye()},children:"Apply Filters"})})]}),(0,T.jsxs)(c.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,T.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,T.jsx)(y.A,{children:(0,T.jsxs)(j.A,{children:[(0,T.jsx)(l.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Total Games"}),(0,T.jsx)(l.A,{variant:"h5",children:Ue.totalGames.toLocaleString()})]})})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,T.jsx)(y.A,{children:(0,T.jsxs)(j.A,{children:[(0,T.jsx)(l.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Total Revenue"}),(0,T.jsx)(l.A,{variant:"h5",children:Ge(Ue.totalRevenue)})]})})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,T.jsx)(y.A,{children:(0,T.jsxs)(j.A,{children:[(0,T.jsx)(l.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Total Players"}),(0,T.jsx)(l.A,{variant:"h5",children:Ue.totalPlayers.toLocaleString()})]})})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,T.jsx)(y.A,{children:(0,T.jsxs)(j.A,{children:[(0,T.jsx)(l.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Total Sessions"}),(0,T.jsx)(l.A,{variant:"h5",children:Ue.totalSessions.toLocaleString()})]})})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,T.jsx)(y.A,{children:(0,T.jsxs)(j.A,{children:[(0,T.jsx)(l.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Average RTP"}),(0,T.jsxs)(l.A,{variant:"h5",children:[Ue.avgRtp.toFixed(2),"%"]})]})})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,T.jsx)(y.A,{children:(0,T.jsxs)(j.A,{children:[(0,T.jsx)(l.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Average Win Rate"}),(0,T.jsxs)(l.A,{variant:"h5",children:[Ue.avgWinRate.toFixed(2),"%"]})]})})})]}),(0,T.jsxs)(d.A,{sx:{p:3},children:[(0,T.jsxs)(F.A,{sx:(0,z.MY)({display:"flex",alignItems:"center",mb:2}),children:[(0,T.jsx)(V.A,{sx:(0,z.MY)({mr:1})}),(0,T.jsx)(l.A,{variant:"h6",children:"Games Data"})]}),le&&(0,T.jsx)(v.A,{severity:"error",sx:{mb:3},children:le}),(0,T.jsx)(R.zZ,{columns:Ie,data:te,loading:se,title:"Games Data",emptyMessage:"No games data available",idField:"id",onExport:async(t,s)=>{try{ie(!0);const i=t===D.A.CSV?"csv":t===D.A.EXCEL?"xlsx":t===D.A.PDF?"pdf":"csv",l={startDate:(0,I.A)(e,"yyyy-MM-dd"),endDate:(0,I.A)(a,"yyyy-MM-dd"),provider:_.length>0?_.join(","):void 0,category:J.length>0?J.join(","):void 0,format:i};let n;if(Object.keys(Q).length>0&&(Q.name&&(l.search=Q.name),Q.minRtp&&(l.minRtp=Q.minRtp),Q.maxRtp&&(l.maxRtp=Q.maxRtp),Q.volatility&&Q.volatility.length>0&&(l.volatility=Q.volatility.join(",")),Q.status&&Q.status.length>0&&(l.status=Q.status.join(",")),Q.releaseDate&&(l.releaseDateStart=(0,I.A)(Q.releaseDate,"yyyy-MM-dd")),Q.features&&Q.features.length>0&&(l.features=Q.features.join(",")),Q.tags&&Q.tags.length>0&&(l.tags=Q.tags.join(","))),s.length>0&&(t===D.A.CSV||t===D.A.JSON)){if(t===D.A.CSV){const e=Ie.map((e=>e.label||e.id)).join(","),t=`${e}\n${s.map((e=>Ie.map((t=>{const a=e[t.id];return"object"===typeof a&&null!==a?JSON.stringify(a).replace(/"/g,'""'):void 0!==a&&null!==a?String(a).replace(/"/g,'""'):""})).join(","))).join("\n")}`;n=new Blob([t],{type:"text/csv"})}else if(t===D.A.JSON){const e=JSON.stringify(s,null,2);n=new Blob([e],{type:"application/json"})}}else n=await O.A.exportGames(l);if(n){const e=window.URL.createObjectURL(n),t=document.createElement("a");t.href=e,t.download=`games-report-${(0,I.A)(new Date,"yyyy-MM-dd")}.${i}`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(e),document.body.removeChild(t)}}catch(i){console.error("[GAMES PAGE] Error exporting data:",i),ne("Failed to export data. Please try again later.")}finally{ie(!1)}},features:{sorting:!0,filtering:{enabled:!0,quickFilter:!0,advancedFilter:!0},pagination:{enabled:!0,defaultPageSize:xe,pageSizeOptions:[10,25,50,100]},columnManagement:{enabled:!0,allowReordering:!0,allowHiding:!0,allowResizing:!0},export:{enabled:!0,formats:[D.A.CSV,D.A.EXCEL,D.A.PDF]}},onRowClick:async t=>{Ce(t),Re(!0);try{const s=await O.A.getGamePerformance(t.id,{startDate:(0,I.A)(e,"yyyy-MM-dd"),endDate:(0,I.A)(a,"yyyy-MM-dd")}),i={gameId:s.gameId||t.id,revenue:s.revenue||0,uniquePlayers:s.uniquePlayers||0,sessions:s.sessions||0,avgSessionDuration:s.avgSessionDuration||0,avgBet:s.avgBet||0,avgWin:s.avgWin||0,betsCount:s.betsCount||0,winsCount:s.winsCount||0,winRate:s.winRate||0,holdPercentage:s.holdPercentage||0,period:s.period||{startDate:(0,I.A)(e,"yyyy-MM-dd"),endDate:(0,I.A)(a,"yyyy-MM-dd")}};Ee(i)}catch(s){console.error("[GAMES PAGE] Error fetching game performance:",s);const i={gameId:t.id,revenue:0,uniquePlayers:0,sessions:0,avgSessionDuration:0,avgBet:0,avgWin:0,betsCount:0,winsCount:0,winRate:0,holdPercentage:0,period:{startDate:(0,I.A)(e,"yyyy-MM-dd"),endDate:(0,I.A)(a,"yyyy-MM-dd")}};Ee(i)}}})]}),(0,T.jsxs)(b.A,{open:Pe,onClose:ze,maxWidth:"md",fullWidth:!0,children:[(0,T.jsx)(f.A,{children:"Game Details"}),(0,T.jsx)(S.A,{dividers:!0,children:we&&(0,T.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,T.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(F.A,{sx:(0,z.MY)({mb:2}),children:[(0,T.jsx)(l.A,{variant:"subtitle2",color:"text.secondary",children:"Basic Information"}),(0,T.jsx)(h.A,{sx:(0,z.MY)({my:1})}),(0,T.jsxs)(F.A,{sx:(0,z.MY)({display:"flex",alignItems:"center",mb:2}),children:[we.thumbnailUrl&&(0,T.jsx)(F.A,{component:"img",src:we.thumbnailUrl,alt:we.name,sx:(0,z.MY)({width:80,height:80,mr:2,borderRadius:1})}),(0,T.jsxs)(F.A,{children:[(0,T.jsx)(l.A,{variant:"h6",children:we.name}),(0,T.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:[we.provider," | ",we.category]})]})]}),we.description&&(0,T.jsx)(l.A,{variant:"body2",sx:{mb:2},children:we.description}),(0,T.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,T.jsx)("strong",{children:"Status:"})," ",we.status?we.status.charAt(0).toUpperCase()+we.status.slice(1):"N/A"]}),(0,T.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,T.jsx)("strong",{children:"Release Date:"})," ",we.releaseDate?(0,I.A)(new Date(we.releaseDate),"MMM dd, yyyy"):"N/A"]}),(0,T.jsxs)(F.A,{sx:(0,z.MY)({mb:1}),children:[(0,T.jsxs)(l.A,{variant:"body1",component:"span",children:[(0,T.jsx)("strong",{children:"RTP:"})," ",we.rtp?`${we.rtp}%`:"N/A"]}),we.rtp&&(0,T.jsx)(M.A,{title:`Return to Player: ${we.rtp}%`,children:(0,T.jsx)(w.A,{variant:"determinate",value:we.rtp,sx:(0,z.MY)({mt:1,height:8,borderRadius:4})})})]}),(0,T.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,T.jsx)("strong",{children:"Volatility:"})," ",we.volatility?we.volatility.charAt(0).toUpperCase()+we.volatility.slice(1):"N/A"]}),we.features&&we.features.length>0&&(0,T.jsxs)(F.A,{sx:(0,z.MY)({mb:1}),children:[(0,T.jsx)(l.A,{variant:"body1",sx:{mb:.5},children:(0,T.jsx)("strong",{children:"Features:"})}),(0,T.jsx)(F.A,{sx:(0,z.MY)({display:"flex",flexWrap:"wrap",gap:.5}),children:we.features.map((e=>(0,T.jsx)(n.A,{label:e,size:"small"},e)))})]}),we.tags&&we.tags.length>0&&(0,T.jsxs)(F.A,{sx:(0,z.MY)({mb:1}),children:[(0,T.jsx)(l.A,{variant:"body1",sx:{mb:.5},children:(0,T.jsx)("strong",{children:"Tags:"})}),(0,T.jsx)(F.A,{sx:(0,z.MY)({display:"flex",flexWrap:"wrap",gap:.5}),children:we.tags.map((e=>(0,T.jsx)(n.A,{label:e,size:"small",variant:"outlined"},e)))})]})]})}),(0,T.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(F.A,{sx:(0,z.MY)({mb:2}),children:[(0,T.jsx)(l.A,{variant:"subtitle2",color:"text.secondary",children:"Performance Metrics"}),(0,T.jsx)(h.A,{sx:(0,z.MY)({my:1})}),De?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(F.A,{sx:(0,z.MY)({display:"flex",alignItems:"center",mb:1}),children:[(0,T.jsx)(N.A,{sx:(0,z.MY)({mr:1,color:"primary.main"})}),(0,T.jsxs)(l.A,{variant:"body1",children:[(0,T.jsx)("strong",{children:"Revenue:"})," ",Ge(De.revenue||0)]})]}),(0,T.jsxs)(F.A,{sx:(0,z.MY)({display:"flex",alignItems:"center",mb:1}),children:[(0,T.jsx)(L.A,{sx:(0,z.MY)({mr:1,color:"primary.main"})}),(0,T.jsxs)(l.A,{variant:"body1",children:[(0,T.jsx)("strong",{children:"Unique Players:"})," ",void 0!==De.uniquePlayers?De.uniquePlayers.toLocaleString():"0"]})]}),(0,T.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,T.jsx)("strong",{children:"Sessions:"})," ",void 0!==De.sessions?De.sessions.toLocaleString():"0"]}),(0,T.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,T.jsx)("strong",{children:"Average Session Duration:"})," ",void 0!==De.avgSessionDuration?De.avgSessionDuration.toFixed(2):"0.00"," minutes"]}),(0,T.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,T.jsx)("strong",{children:"Average Bet:"})," ",Ge(De.avgBet||0)]}),(0,T.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,T.jsx)("strong",{children:"Average Win:"})," ",Ge(De.avgWin||0)]}),(0,T.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,T.jsx)("strong",{children:"Bets Count:"})," ",void 0!==De.betsCount?De.betsCount.toLocaleString():"0"]}),(0,T.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,T.jsx)("strong",{children:"Wins Count:"})," ",void 0!==De.winsCount?De.winsCount.toLocaleString():"0"]}),(0,T.jsxs)(F.A,{sx:(0,z.MY)({mb:1}),children:[(0,T.jsxs)(l.A,{variant:"body1",component:"span",children:[(0,T.jsx)("strong",{children:"Win Rate:"})," ",void 0!==De.winRate?De.winRate.toFixed(2):"0.00","%"]}),(0,T.jsx)(M.A,{title:`Win Rate: ${void 0!==De.winRate?De.winRate.toFixed(2):"0.00"}%`,children:(0,T.jsx)(w.A,{variant:"determinate",value:De.winRate||0,sx:(0,z.MY)({mt:1,height:8,borderRadius:4})})})]}),(0,T.jsxs)(l.A,{variant:"body1",sx:{mb:1},children:[(0,T.jsx)("strong",{children:"Hold Percentage:"})," ",void 0!==De.holdPercentage?De.holdPercentage.toFixed(2):"0.00","%"]}),De.period&&(0,T.jsxs)(l.A,{variant:"body2",color:"text.secondary",sx:{mt:2},children:["Data period: ",(0,I.A)(new Date(De.period.startDate),"MMM dd, yyyy")," to ",(0,I.A)(new Date(De.period.endDate),"MMM dd, yyyy")]})]}):(0,T.jsx)(F.A,{sx:(0,z.MY)({display:"flex",justifyContent:"center",alignItems:"center",height:200}),children:se?(0,T.jsx)(C.A,{}):(0,T.jsx)(l.A,{variant:"body1",color:"text.secondary",children:"No performance data available for the selected period."})})]})})]})}),(0,T.jsx)(P.A,{children:(0,T.jsx)(o.A,{onClick:ze,children:"Close"})})]})]})}}}]);
//# sourceMappingURL=4949.2fc6e7fe.chunk.js.map
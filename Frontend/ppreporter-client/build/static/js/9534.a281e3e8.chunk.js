"use strict";(self.webpackChunkppreporter_client=self.webpackChunkppreporter_client||[]).push([[9534],{99534:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var l=a(65043),n=a(49367),s=a(96446),r=a(22698),o=a(88446),i=a(85865),d=a(35475),c=a(73216),A=a(19252),h=a(81637),u=a(67254),x=a(11906),p=a(12110),m=a(26494),y=a(77739),g=a(17392),j=a(45424),v=a(32143),b=a(63336),D=a(8591),C=a(67784),f=a(51787),S=a(8939),I=a(24056),w=a(48625),T=a(28242),E=a(41132),N=a(66360),_=a(72898),M=a(60708),F=a(5780),O=a(19170),k=a(46087),L=a(69525),R=a(70579);const U=e=>{let{metadata:t,data:a,loading:n,error:r,onFilterChange:o,onRefresh:d,onExport:c}=e;const[A,U]=(0,l.useState)(0),[G,P]=(0,l.useState)(null),[V,K]=(0,l.useState)(!1),[Y,B]=(0,l.useState)({startDate:(0,F.A)((0,O.A)(new Date,30)),endDate:(0,k.A)(new Date),gameCategories:[],playerStatuses:[],countries:[],whiteLabels:[],minAmount:"",maxAmount:"",searchTerm:""}),[W,$]=(0,l.useState)([]),[z,J]=(0,l.useState)([]),[Z,q]=(0,l.useState)([]),[H,Q]=(0,l.useState)([]);(0,l.useEffect)((()=>{if(t){var e,a,l,n;const s=null===(e=t.filters)||void 0===e?void 0:e.find((e=>"gameCategory"===e.id));null!==s&&void 0!==s&&s.options?$(s.options):$([{value:"slots",label:"Slots"},{value:"table",label:"Table Games"},{value:"live",label:"Live Casino"},{value:"poker",label:"Poker"},{value:"sports",label:"Sports"},{value:"arcade",label:"Arcade"}]);const r=null===(a=t.filters)||void 0===a?void 0:a.find((e=>"playerStatus"===e.id));null!==r&&void 0!==r&&r.options?J(r.options):J([{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"new",label:"New"},{value:"vip",label:"VIP"}]);const o=null===(l=t.filters)||void 0===l?void 0:l.find((e=>"country"===e.id));null!==o&&void 0!==o&&o.options?q(o.options):q([{value:"us",label:"United States"},{value:"uk",label:"United Kingdom"},{value:"ca",label:"Canada"},{value:"de",label:"Germany"},{value:"fr",label:"France"},{value:"es",label:"Spain"},{value:"it",label:"Italy"},{value:"au",label:"Australia"}]);const i=null===(n=t.filters)||void 0===n?void 0:n.find((e=>"whiteLabel"===e.id));null!==i&&void 0!==i&&i.options?Q(i.options):t.whiteLabels?Q(t.whiteLabels.map((e=>({value:e.id,label:e.name})))):Q([{value:"casino-royale",label:"Casino Royale"},{value:"lucky-spin",label:"Lucky Spin"},{value:"golden-bet",label:"Golden Bet"},{value:"diamond-play",label:"Diamond Play"},{value:"royal-flush",label:"Royal Flush"}])}}),[t]);const X=()=>{P(null)},ee=e=>{c(Y,e),X()},te=(e,t)=>{const a={...Y,[e]:t};B(a),o(a)},ae=(e,t)=>{te(e,t)},le=()=>{d(Y)};return(0,R.jsx)(p.A,{children:(0,R.jsxs)(m.A,{children:[(0,R.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,R.jsx)(i.A,{variant:"h5",children:"Advanced Daily Actions Report"}),(0,R.jsxs)(s.A,{children:[(0,R.jsx)(y.A,{title:"Refresh data",children:(0,R.jsx)(g.A,{onClick:le,disabled:n,children:(0,R.jsx)(w.A,{})})}),(0,R.jsx)(y.A,{title:"Filter data",children:(0,R.jsx)(g.A,{onClick:()=>{K(!V)},color:V?"primary":"default",children:(0,R.jsx)(T.A,{})})}),(0,R.jsx)(y.A,{title:"Export data",children:(0,R.jsx)(g.A,{onClick:e=>{P(e.currentTarget)},disabled:n||!a,children:(0,R.jsx)(E.A,{})})}),(0,R.jsxs)(j.A,{anchorEl:G,open:Boolean(G),onClose:X,children:[(0,R.jsx)(v.A,{onClick:()=>ee("csv"),children:"Export as CSV"}),(0,R.jsx)(v.A,{onClick:()=>ee("xlsx"),children:"Export as Excel"}),(0,R.jsx)(v.A,{onClick:()=>ee("pdf"),children:"Export as PDF"}),(0,R.jsx)(v.A,{onClick:()=>ee("json"),children:"Export as JSON"})]})]})]}),r&&(0,R.jsx)(u.A,{severity:"error",sx:{mb:3},children:r}),V&&(0,R.jsxs)(b.A,{variant:"outlined",sx:{p:2,mb:3},children:[(0,R.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Filters"}),(0,R.jsxs)(D.Ay,{container:!0,spacing:2,children:[(0,R.jsx)(D.Ay,{item:!0,xs:12,children:(0,R.jsx)(_.A,{startDate:Y.startDate,endDate:Y.endDate,onChange:e=>{if(e.start&&e.end){const t={...Y,startDate:e.start,endDate:e.end};B(t),o(t)}},buttonLabel:"Date Range"})}),(0,R.jsx)(D.Ay,{item:!0,xs:12,children:(0,R.jsx)(C.A,{fullWidth:!0,size:"small",label:"Search",placeholder:"Search by player, game, etc.",value:Y.searchTerm,onChange:e=>{te("searchTerm",e.target.value)},InputProps:{startAdornment:(0,R.jsx)(f.A,{position:"start",children:(0,R.jsx)(N.A,{fontSize:"small"})})}})}),(0,R.jsx)(D.Ay,{item:!0,xs:12,md:6,children:(0,R.jsx)(M.KF,{label:"Game Categories",options:W,value:Y.gameCategories,onChange:e=>ae("gameCategories",e),placeholder:"Select game categories",searchable:!0,showSelectAllOption:!0})}),(0,R.jsx)(D.Ay,{item:!0,xs:12,md:6,children:(0,R.jsx)(M.KF,{label:"Player Statuses",options:z,value:Y.playerStatuses,onChange:e=>ae("playerStatuses",e),placeholder:"Select player statuses",searchable:!0,showSelectAllOption:!0})}),(0,R.jsx)(D.Ay,{item:!0,xs:12,md:6,children:(0,R.jsx)(M.KF,{label:"Countries",options:Z,value:Y.countries,onChange:e=>ae("countries",e),placeholder:"Select countries",searchable:!0,showSelectAllOption:!0})}),(0,R.jsx)(D.Ay,{item:!0,xs:12,md:6,children:(0,R.jsx)(M.KF,{label:"White Labels",options:H,value:Y.whiteLabels,onChange:e=>ae("whiteLabels",e),placeholder:"Select white labels",searchable:!0,showSelectAllOption:!0})}),(0,R.jsx)(D.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(D.Ay,{container:!0,spacing:2,children:[(0,R.jsx)(D.Ay,{item:!0,xs:6,children:(0,R.jsx)(C.A,{fullWidth:!0,size:"small",label:"Min Amount",type:"number",placeholder:"0",value:Y.minAmount,onChange:e=>te("minAmount",e.target.value),InputProps:{startAdornment:(0,R.jsx)(f.A,{position:"start",children:"$"})}})}),(0,R.jsx)(D.Ay,{item:!0,xs:6,children:(0,R.jsx)(C.A,{fullWidth:!0,size:"small",label:"Max Amount",type:"number",placeholder:"1000",value:Y.maxAmount,onChange:e=>te("maxAmount",e.target.value),InputProps:{startAdornment:(0,R.jsx)(f.A,{position:"start",children:"$"})}})})]})})]}),(0,R.jsxs)(s.A,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:[(0,R.jsx)(x.A,{variant:"outlined",onClick:()=>{const e={startDate:(0,F.A)((0,O.A)(new Date,30)),endDate:(0,k.A)(new Date),gameCategories:[],playerStatuses:[],countries:[],whiteLabels:[],minAmount:"",maxAmount:"",searchTerm:""};B(e),o(e)},sx:{mr:1},children:"Reset"}),(0,R.jsx)(x.A,{variant:"contained",onClick:le,children:"Apply Filters"})]})]}),(0,R.jsx)(s.A,{sx:{mb:3},children:(0,R.jsxs)(i.A,{variant:"body2",color:"text.secondary",children:["Showing data from ",(0,L.A)(Y.startDate,"MMM d, yyyy")," to ",(0,L.A)(Y.endDate,"MMM d, yyyy")]})}),n&&(0,R.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,R.jsx)(h.A,{})}),!n&&a&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(s.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,R.jsxs)(S.A,{value:A,onChange:(e,t)=>{U(t)},children:[(0,R.jsx)(I.A,{label:"Summary"}),(0,R.jsx)(I.A,{label:"Detailed View"}),(0,R.jsx)(I.A,{label:"Charts"})]})}),(0,R.jsx)(s.A,{role:"tabpanel",hidden:0!==A,children:0===A&&(0,R.jsx)(i.A,{variant:"body1",children:"Summary content would go here. This is a placeholder component."})}),(0,R.jsx)(s.A,{role:"tabpanel",hidden:1!==A,children:1===A&&(0,R.jsx)(i.A,{variant:"body1",children:"Detailed view content would go here. This is a placeholder component."})}),(0,R.jsx)(s.A,{role:"tabpanel",hidden:2!==A,children:2===A&&(0,R.jsx)(i.A,{variant:"body1",children:"Charts content would go here. This is a placeholder component."})})]}),!n&&!a&&(0,R.jsxs)(s.A,{sx:{p:4,textAlign:"center"},children:[(0,R.jsx)(i.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No data available"}),(0,R.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Try adjusting your filters or select a different date range."}),(0,R.jsx)(x.A,{variant:"outlined",startIcon:(0,R.jsx)(w.A,{}),onClick:le,sx:{mt:2},children:"Refresh Data"})]})]})})};var G=a(54235),P=a(72450),V=a(93418);const K=()=>{const[e,t]=(0,l.useState)(null),[n,r]=(0,l.useState)(null),[o,d]=(0,l.useState)(!1),[x,p]=(0,l.useState)(null),[m,y]=(0,l.useState)(!1),[g,j]=(0,l.useState)(null);(0,c.Zp)();(0,l.useEffect)((()=>{v()}),[]);const v=async()=>{try{y(!0),j(null);if(V.Gv.USE_MOCK_DATA_FOR_UI_TESTING||"true"===localStorage.getItem("USE_MOCK_DATA_FOR_UI_TESTING")){console.log("[DAILY ACTIONS ADVANCED] Using mock data for metadata");const e=await Promise.all([a.e(9758),a.e(7116)]).then(a.bind(a,37116)),l=e.default.getMockData("/reports/daily-actions/metadata");if(l)return console.log("[DAILY ACTIONS ADVANCED] Got mock metadata:",l),void t(l)}console.log("[DAILY ACTIONS ADVANCED] Fetching metadata from service");const e=await G.A.getMetadata();t(e)}catch(e){console.error("Error fetching metadata:",e),j(e.message||"Failed to load filter options")}finally{y(!1)}};return m&&!e?(0,R.jsx)(A.A,{maxWidth:"lg",children:(0,R.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,R.jsx)(h.A,{})})}):g&&!e?(0,R.jsx)(A.A,{maxWidth:"lg",children:(0,R.jsx)(s.A,{sx:{mt:4},children:(0,R.jsxs)(u.A,{severity:"error",children:[g,(0,R.jsx)(s.A,{sx:{mt:2},children:(0,R.jsx)(i.A,{variant:"body2",children:"Please try refreshing the page or contact support if the problem persists."})})]})})}):(0,R.jsx)(A.A,{maxWidth:"lg",children:(0,R.jsx)(s.A,{sx:{mt:4,mb:4},children:(0,R.jsx)(U,{metadata:e,data:n,loading:o,error:x,onFilterChange:e=>{console.log("Filters changed:",e),e.searchTerm||e.gameCategories&&e.gameCategories.length>0||e.playerStatuses&&e.playerStatuses.length>0||e.countries&&e.countries.length},onRefresh:async e=>{try{d(!0),p(null);const t={...e,startDate:e.startDate?(0,L.A)(new Date(e.startDate),"yyyy-MM-dd"):null,endDate:e.endDate?(0,L.A)(new Date(e.endDate),"yyyy-MM-dd"):null};console.log("[DAILY ACTIONS ADVANCED] Fetching data with filters:",t);if(V.Gv.USE_MOCK_DATA_FOR_UI_TESTING||"true"===localStorage.getItem("USE_MOCK_DATA_FOR_UI_TESTING")){console.log("[DAILY ACTIONS ADVANCED] Using mock data for report");const e=await Promise.all([a.e(9758),a.e(7116)]).then(a.bind(a,37116)),l=e.default.getMockData("/reports/daily-actions/data",t);if(l)return console.log("[DAILY ACTIONS ADVANCED] Got mock data:",l),void r(l)}console.log("[DAILY ACTIONS ADVANCED] Fetching data from service");const l=await G.A.getFilteredData(t);r(l)}catch(t){console.error("Error fetching report data:",t),p(t.message||"Failed to load report data")}finally{d(!1)}},onExport:async(e,t)=>{try{d(!0);const l={...e,startDate:e.startDate?(0,L.A)(new Date(e.startDate),"yyyy-MM-dd"):null,endDate:e.endDate?(0,L.A)(new Date(e.endDate),"yyyy-MM-dd"):null};console.log("[DAILY ACTIONS ADVANCED] Exporting data with filters:",l,"format:",t);if(V.Gv.USE_MOCK_DATA_FOR_UI_TESTING||"true"===localStorage.getItem("USE_MOCK_DATA_FOR_UI_TESTING")){console.log("[DAILY ACTIONS ADVANCED] Using mock data for export");const e=await Promise.all([a.e(9758),a.e(7116)]).then(a.bind(a,37116)),t=e.default.getMockData("/reports/daily-actions/data",l);if(t){console.log("[DAILY ACTIONS ADVANCED] Creating mock export file");const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=`daily-actions-report-${(0,L.A)(new Date,"yyyy-MM-dd")}.json`;return void(0,P.saveAs)(e,a)}}console.log("[DAILY ACTIONS ADVANCED] Exporting data from service");const n=await G.A.exportFilteredReport(l,t),s=`daily-actions-report-${(0,L.A)(new Date,"yyyy-MM-dd")}.${t}`;(0,P.saveAs)(n,s)}catch(l){console.error("Error exporting report:",l),p(l.message||"Failed to export report")}finally{d(!1)}}})})})},Y=()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(n.mg,{children:(0,R.jsx)("title",{children:"Advanced Daily Actions Report | PPrePorter"})}),(0,R.jsxs)(s.A,{sx:{p:3},children:[(0,R.jsxs)(r.A,{"aria-label":"breadcrumb",sx:{mb:2},children:[(0,R.jsx)(o.A,{component:d.N_,to:"/",color:"inherit",children:"Dashboard"}),(0,R.jsx)(o.A,{component:d.N_,to:"/reports",color:"inherit",children:"Reports"}),(0,R.jsx)(i.A,{color:"text.primary",children:"Advanced Daily Actions"})]}),(0,R.jsx)(i.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Advanced Daily Actions Report"}),(0,R.jsx)(i.A,{variant:"subtitle1",color:"text.secondary",paragraph:!0,children:"Comprehensive analysis of daily player actions with advanced filtering options."}),(0,R.jsx)(K,{})]})]})}}]);
//# sourceMappingURL=9534.a281e3e8.chunk.js.map